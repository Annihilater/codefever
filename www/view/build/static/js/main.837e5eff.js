!function(e,t){for(var a in t)e[a]=t[a]}(window,function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(p&&p(t);u.length;)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},r={0:0},n=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=this.webpackJsonpundefined=this.webpackJsonpundefined||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;return n.push([483,1]),a()}({335:function(e,t,a){var i;a.p=(i=window).location.protocol+"//"+i.location.host+"/"},343:function(e,t,a){var i=a(344),r=a(345);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var n={insert:"head",singleton:!1};i(r,n);e.exports=r.locals||{}},345:function(e,t,a){"use strict";a.r(t);var i=a(292),r=a.n(i)()(!0);r.push([e.i,"/* global style override */\nbody {\n  margin: 0;\n  padding: 0;\n}\npre {\n  margin: 0;\n}\ncode {\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\n  font-size: 14px;\n  white-space: break-spaces;\n}\n/* global style for app */\n#root a,\n.root a {\n  color: #319ffc;\n  text-decoration: none;\n}\n#root a:hover,\n.root a:hover {\n  text-decoration: underline;\n}\n#root .width-auto,\n.root .width-auto {\n  width: auto !important;\n}\n#root .app-root,\n.root .app-root {\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  width: 100%;\n}\n#root .app-content,\n.root .app-content {\n  width: 100%;\n  height: 100vh;\n  overflow: auto;\n  position: relative;\n}\n#root .text-overflow,\n.root .text-overflow {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n#root .marker-dark,\n.root .marker-dark {\n  color: #fff !important;\n}\n#root .marker-dark-clickable,\n.root .marker-dark-clickable {\n  color: #fff !important;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://src/assets/styles/App.styl"],names:[],mappings:"AAAA,0BAAA;AACA;EACE,SAAQ;EACR,UAAS;AACX;AACA;EACE,SAAQ;AACV;AACA;EACE,wEAA2B;EAC3B,eAAW;EACX,yBAAa;AACf;AACA,yBAAA;AAEE;;EACE,cAAO;EACP,qBAAiB;AACrB;AAAI;;EACE,0BAAiB;AAGvB;AADE;;EACE,sBAAO;AAIX;AADE;;EACE,YAAQ;EACR,gBAAU;EACV,kBAAU;EACV,aAAS;EACT,WAAO;AAIX;AAFE;;EACE,WAAO;EACP,aAAQ;EACR,cAAU;EACV,kBAAU;AAKd;AAFE;;EACE,gBAAU;EACV,uBAAe;EACf,mBAAa;AAKjB;AAFE;;EACE,sBAAO;AAKX;AAJE;;EACE,sBAAO;EACP,eAAQ;AAOZ",sourcesContent:["/* global style override */\nbody\n  margin: 0\n  padding: 0\n\npre\n  margin: 0;\n\ncode\n  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n  font-size: 14px;\n  white-space: break-spaces;\n\n/* global style for app */\n#root, .root\n  a\n    color: #319ffc;\n    text-decoration: none;\n    &:hover\n      text-decoration: underline;\n\n  .width-auto\n    width: auto !important;\n\n  /* style sheet for container */\n  .app-root\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    display: flex;\n    width: 100%;\n\n  .app-content\n    width: 100%;\n    height: 100vh;\n    overflow: auto;\n    position: relative;\n\n  /* css helpers */\n  .text-overflow\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n\n  /* Code Diff Viewer (Diff Maker Style) */\n  .marker-dark\n    color: #FFF !important;\n  .marker-dark-clickable\n    color: #FFF !important;\n    cursor: pointer;"],sourceRoot:""}]),t.default=r},483:function(e,t,a){"use strict";a.r(t);a(335);var i=a(1),r=a.n(i),n=a(35),s=a.n(n),o=a(17),c=a(155),l=a(11),p=(a(343),a(346),a(358),a(7)),d=a(6),u=a(8),m=a(9),h=a(39),g=a(571),f=a(299),b=a(569),j=a(123),O=a(570),v=a(156),y=a(15),x=a(298);var C=function(e){var t=Object(x.a)(e,"CodeFever");return Object(y.a)(Object(y.a)({},t),{},{overrides:Object(y.a)(Object(y.a)({},t.overrides),{},{MuiInputBase:{input:Object(y.a)(Object(y.a)({},t.overrides.MuiInputBase.input),{},{backgroundColor:"none"})},MuiMenuItem:{root:Object(y.a)(Object(y.a)({},t.overrides.MuiMenuItem.root),{},{height:e.spacing(4)})},MuiTableCell:{root:{borderBottom:"1px solid "+t.palette.border,height:e.spacing(5),paddingTop:0,paddingBottom:0,textAlign:"left",flexDirection:"row","&:last-child":{textAlign:"right",flexDirection:"row-reverse"}}}})})},S=a(13),R=a(20),N=a(179),M=a(161),w=a(81),k=a(530),_=a(304),E=a(576),T=a(4);function A(){return window.location.origin+"/"}var D={commonStatus:{normal:1,delete:4},obejctDisplayType:{unknown:0,empty:1,oversize:2,text:3,markdown:4,image:5,video:6},obejctDiffDisplayType:{unknown:0,empty:1,oversize:2,infoChange:3,textChange:4,imageChange:5},activityCategory:{all:0,commit:1,mergeRequest:2,member:3},mergeRequestStatus:{open:1,merged:2,closed:3},notificationCategory:{all:0,unRead:1,system:2,mention:3},notificationRefuseType:{group:1,repository:2},notificationStatus:{mr:1,email:2},STATIC_VERSION:"00000000000000",HOSTS:{STATIC_HOST:A(),PGYER_AVATAR_HOST:A()+"file/fetch/avatar/",STATIC_AVATAR_PREFIX:A()+"file/fetch/avatar/"},codeFileExtentsions:{bat:"bat",clj:"clojure",cljs:"clojure",cljn:"clojure",cljc:"clojure",cljx:"clojure",coffee:"coffee",litcoffee:"coffee",c:"cpp",h:"cpp",cpp:"cpp",cs:"csharp",css:"css",go:"go",graphql:"graphql",htm:"html",xhtm:"html",html:"html",xhtml:"html",ini:"ini",java:"java",js:"javascript",jsx:"javascript",es:"javascript",jsm:"javascript",esm:"javascript",json:"json",kt:"kotlin",less:"less",lua:"lua",md:"markdown",mysql:"mysql",m:"objective-c",pas:"pascal",perl:"perl",pgsql:"pgsql",php:"php",xhp:"php",php3:"php",php4:"php",ps:"powershell",py:"python",r:"r",rb:"ruby",rust:"rust",scss:"scss",sh:"bash",sql:"sql",swift:"swift",ts:"typescript",tsx:"typescript",tsm:"typescript",vb:"vb",xml:"xml",yml:"yaml"}},I={NO_PERMISSION:0,GUEST:1,REPORTER:2,DEVELOPER:3,MAINTAINER:4,OWNER:5,NOBODY:6},F={NO_PERMISSION:0,REPO_READ:1,REPO_PUSH:2,REPO_REMOVE:3,REPO_CHANGE_MEMBER:4,REPO_CHANGE_INFO:5,MR_READ:8,MR_PUSH:9,MR_MERGE:10,GROUP_CHANGE_MEMBER:16,GROUP_CREATE_REPO:17},P={};P[I.NO_PERMISSION]=[],P[I.GUEST]=[F.REPO_READ],P[I.REPORTER]=[F.REPO_READ,F.MR_READ],P[I.DEVELOPER]=[F.REPO_READ,F.MR_READ,F.MR_PUSH],P[I.MAINTAINER]=[F.REPO_READ,F.REPO_PUSH,F.REPO_CHANGE_MEMBER,F.REPO_CHANGE_INFO,F.MR_READ,F.MR_PUSH,F.MR_MERGE,F.GROUP_CHANGE_MEMBER,F.GROUP_CREATE_REPO],P[I.OWNER]=[F.REPO_READ,F.REPO_PUSH,F.REPO_REMOVE,F.REPO_CHANGE_MEMBER,F.REPO_CHANGE_INFO,F.MR_READ,F.MR_PUSH,F.MR_MERGE,F.GROUP_CHANGE_MEMBER,F.GROUP_CREATE_REPO];var L={Role:I,PermissionCode:F,PermissionConfig:P},B={NORMAL:1,USER:2};var U={not:function(e){return function(t){return!e(t)}},and:function(){var e=arguments;return function(t){return[].slice.call(e).reduce((function(e,a){return e&&a(t)}),!1)}},or:function(){var e=arguments;return function(t){return[].slice.call(e).reduce((function(e,a){return e||a(t)}),!1)}},userGroup:function(){return function(e){return e.type===B.USER}},normalGroup:function(){return function(e){return e.type===B.NORMAL}},id:function(e){return function(t){return e===t.id}},rule:function(e){return function(t){return e===t.rule}},ids:function(e){return function(t){return e.some((function(e){return e===t.id}))}},email:function(e){return function(t){return e===t.email}},indexOfEmails:function(e){return function(t){return t.emails.indexOf(e)>-1}},name:function(e){return function(t){return e===t.name}},names:function(e){return function(t){return e.some((function(e){return e===t.name}))}},group:function(e){return function(t){return e===t.group.id}},groups:function(e){return function(t){return e.some((function(e){return e===t.group.id}))}},groupMember:function(){return function(e){return e.groupMember}},notGroupMember:function(){return function(e){return!e.groupMember}},deleted:function(){return function(e){return e.deleteFlag}},notDeleted:function(){return function(e){return!e.deleteFlag}},fork:function(e){return function(t){return e===t.forkFrom}},forks:function(e){return function(t){return e.some((function(e){return e===t.forkFrom}))}},nameLikes:function(e){return function(t){return t.name.indexOf(e)>-1}},search:function(e,t){return function(a){return t.reduce((function(t,i){return t||a[i].toLowerCase().indexOf(e.toLowerCase())>-1}),!1)}},creator:function(e){return function(t){return e===t.owner}},creators:function(e){return function(t){return e.some((function(e){return e===t.owner}))}},withPermission:function(e){return function(t){return J(t.role,e)}},withPermissions:function(e){return function(t){return e.some((function(e){return J(t.role,e)}))}},groupName:function(e){return function(t){return e===t.group.name}},target:function(e){return function(t){return e===t.target}}};function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===e?t:e}function H(e){var t=new window.FormData;for(var a in e)if("object"!==typeof e[a]||a.match(/_(SAFE|BINARY)$/))t.append(a.replace(/_(SAFE|BINARY)$/,""),e[a]);else for(var i in e[a])"number"===typeof e[a].length?t.append(a+"[]",e[a][i]):t.append(a+"["+i+"]",e[a][i]);return t}function q(e,t,a){for(var i=0;i<e.length;i++)if(e[i][t]===a)return e[i];return{}}function z(e,t){var a=0;if(Math.abs(e)>Number.MAX_VALUE)return NaN;if("%"===t)e*=100;else for(;e>=1e3;)e/=1e3,a++;return a?(Math.round(10*e)/10+" "+["","k","M","G","T","P"][a]).trim()+(t||""):(t=t?" "+t:"",Math.round(100*e)/100+(t||""))}function V(){return"/"+[].slice.call(arguments).join("/")}function W(){for(var e={},t=0;t<arguments.length;t++)if(arguments[t]&&arguments[t].__namespace__)for(var a in arguments[t])e[arguments[t].__namespace__+"."+a]=arguments[t][a];else arguments[t]&&(e=Object(y.a)(Object(y.a)({},e),arguments[t]));return e}function K(e,t){return(a=1,function(e,t){if(t&&t.map&&t[a]&&t[a].map){var i=Object(T.a)(t);return i.map((function(t,i){return i===a?t.map((function(t){return"string"===typeof t?t.replace(/((legend|label|map)\.\w+)/g,(function(t,a){return e({id:a})})):t})):t.map((function(t,a){return"string"===typeof t&&0===a?t.replace(/((legend|label|map)\.\w+)/g,(function(t,a){return e({id:a})})):t}))}))}return t})(e,t);var a}function J(e,t){return!!(e&&L.PermissionConfig[e]&&L.PermissionConfig[e].length)&&L.PermissionConfig[e].indexOf(t)>-1}function $(e){var t=e&&e.split(".").pop().toLowerCase();return t&&D.codeFileExtentsions[t]||"markdown"}function Z(e,t){var a=e?e.filter(U.indexOfEmails(t)):[];return a.length?a[0]:{temporary:!0,name:t,email:t,icon:""}}function Y(e){if(e.branches&&e.branches.length){var t=e.branches.filter(U.id(e.repository.defaultBranch));return t[0]?t[0].id:e.branches[0].id}return""}function X(e,t,a,i){i&&(t+="?"+function(e){var t=[];for(var a in e)t.push(a+"="+window.encodeURIComponent(e[a]));return t.join("&")}(i));var r="codefever-app",n=window.localStorage.getItem("lang")||"zh-cn";return a?window.fetch(t,{body:H(a),cache:"no-cache",credentials:"same-origin",headers:{"codefever-end-env":r,"codefever-end-lang":n,Accept:"application/json"},method:e,mode:"same-origin",redirect:"follow",referrer:"client"}):window.fetch(t,{cache:"no-cache",credentials:"same-origin",headers:{"codefever-end-env":r,"codefever-end-lang":n,Accept:"application/json"},method:e,mode:"same-origin",redirect:"follow",referrer:"client"})}var Q={GET:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.requestTime=(new Date).getTime(),X("GET",e,null,t)},POST:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X("POST",e,t,a)},PUT:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X("PUT",e,t,a)},DELETE:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X("DELETE",e,t,a)},OPTIONS:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X("OPTIONS",e,t,a)}};var ee={getUserInfo:function(){return Q.GET("/api/user/info")},getKeyList:function(){return Q.GET("/api/user/listKey")},addSSHKey:function(e){return Q.POST("/api/user/addSSHKey",e)},removeSSHKey:function(e){return Q.POST("/api/user/removeSSHKey",e)},setUserData:function(e){return Q.POST("/api/user/update",e)},updateBasicInfo:function(e){return Q.POST("/api/user/updateBasicInfo",e)},updatePassword:function(e){return Q.POST("/api/user/updatePassword",e)},changeEmail:function(e){return Q.POST("/api/user/changeEmail",e)},getMFAData:function(){return Q.GET("/api/user/getMFAData")},revokeMFAData:function(){return Q.POST("/api/user/revokeMFAData",{})},updateMFAData:function(e){return Q.POST("/api/user/updateMFAData",e)},getCountriesCode:function(e){return Q.POST("/api/user/getCountriesCode",e)},confirmTel:function(e){return Q.POST("/api/user/confirmTel",e)},uploadAvatar:function(e){return Q.POST("/api/user/uploadAvatar",e)},getCode:function(e){return Q.POST("/api/user/getCode",e)},getEmailCode:function(e){return Q.POST("/api/user/getEmailCode",e)},addCommitEmail:function(e){return Q.POST("/api/user/addCommitEmail",e)},resentCommitEmailCode:function(e){return Q.POST("/api/user/resentCommitEmailCode",e)},deleteCommitEmail:function(e){return Q.POST("/api/user/deleteCommitEmail",e)},validationCommitEmailCode:function(e){return Q.POST("/api/user/validationCommitEmailCode",e)},notifications:function(e){return Q.GET("/api/user/notifications",null,e)},setNotificationRead:function(e){return Q.POST("/api/user/setNotificationRead",e)},deleteNotification:function(e){return Q.POST("/api/user/deleteNotification",e)},userNotificationSetting:function(e){return Q.POST("/api/user/userNotificationSetting",e)},notificationRefused:function(e){return Q.GET("/api/user/notificationRefused",null,e)},setGroupOrRepoNotification:function(e){return Q.POST("/api/user/setGroupOrRepoNotification",e)}};var te={Event:function(e,t){return{type:e,data:t}},NewNotification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"notification.message.add",data:{message:e,level:t,action:a}}},Network:function(e,t){},NewComformation:function(e,t,a,i){return{type:"notification.confirmation.popup",data:{title:e,description:t,accept:a,reject:i}}},consumeComformation:function(){return{type:"notification.confirmation.consume",data:null}},cancelComformation:function(){return{type:"notification.confirmation.close",data:null}},addComformation:function(e,t){return{type:"notification.confirmation.add",data:{key:e,data:t}}},removeComformation:function(e){return{type:"notification.confirmation.remove",data:{key:e}}}};var ae=function(e){if("zh-cn"===(window.localStorage.getItem("lang")?window.localStorage.getItem("lang"):navigator.language.toLowerCase()||navigator.userLanguage.toLowerCase())){return{0:"\u64cd\u4f5c\u6210\u529f",256:"\u8bf7\u6c42\u9519\u8bef",257:"\u767b\u5f55\u4fe1\u606f\u5931\u6548, \u9700\u8981\u91cd\u65b0\u767b\u9646",258:null,259:null,260:null,261:"\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u5b58\u5728",262:"\u6ca1\u6709\u64cd\u4f5c\u6743\u9650",512:"\u8bf7\u6c42\u8d44\u6e90\u4e3a\u7a7a",513:"\u8f93\u5165\u9519\u8bef",514:"\u8f93\u5165\u503c\u8d85\u8fc7\u5141\u8bb8\u8303\u56f4",769:"\u6ca1\u6709\u6b64\u4ed3\u5e93\u7ec4",770:"\u6ca1\u6709\u6b64\u4ed3\u5e93",65280:"\u4e0d\u80fd\u8bc6\u522b\u7684\u54cd\u5e94\u6570\u636e\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",65281:"\u7f51\u7edc\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",65282:"\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}[e]||null}return{0:"Done",256:"Request Error",257:"Invalid Login",258:null,259:null,260:null,261:"Resource Not Found",262:"Insufficient Permission",512:"Empty Resource",513:"Invalid Input",514:"Input Out of Range",769:"No Such Group",770:"No Such Repository",65280:"Response Data Can Not Be Parsed, Try Later",65281:"Network Error, Try Later",65282:"Too Many Request, Try Later"}[e]||null};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&t({type:"network.connection.error"}),t&&t(te.NewNotification(ae(65281),2)),e}var re={getJSONData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&t({type:"network.connection.ok"}),!e.ok){if(429===parseInt(e.status))return t&&t(te.NewNotification(ae(65282),1)),{code:1};if(parseInt(e.status)>=500)return t&&t(te.NewNotification(ae(65283),1)),{code:1}}var a={};return(a=e.json().catch((function(e){return t&&t({type:"network.connection.error"}),t&&t(te.NewNotification(ae(65280),2)),{code:1}}))).then((function(e){e&&e.code&&e.code<1024&&(t&&t(te.NewNotification(ae(e.code)||e.message,2)),257===parseInt(e.code)&&window.setTimeout((function(){window.location.href="/user/login"}),3e3),parseInt(e.code))})).catch((function(e){ie(e,t)})),a},getTextData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e.ok){switch(e.status){case 429:t&&t(te.NewNotification(ae(65282),1));break;case 500:t&&t(te.NewNotification(ae(65283),1));break;default:t&&t(te.NewNotification("Oooops...",1))}return null}return e.text()},getFile:function(e){},catchError:ie,withEventdispatcher:function(e){return function(t){return function(a){return t(a,e)}}},getHost:function(e){return e&&e.host},getSSHHost:function(e){return e&&"git@"+e.host.replace("http://","").replace("https://","")},makeSlug:function(e){return e.replace(/[^\w]/g,"_")}};var ne={stateValidator:function(e,t){return function(){for(var a={},i=!1,r=t.length-1;r>=0;r--){var n=t[r];"string"!==typeof e.state[n.name]||e.state[n.name].match(n.passPattern)||(i|=!0,a[n.name]=n.errorMessage)}return e.setState({error:a}),!i}},codeValidator:function(e,t){return function(a){for(var i={},r=0;r<t.length;r++){var n=t[r];if(n.exceptionCode&&n.exceptionCode===a&&n.name)return i[n.name]=n.errorMessage,e.setState({error:i}),!1;if(n.exceptionCode&&n.exceptionCode===a&&!n.name)return e.props.dispatchEvent(te.NewNotification(n.errorMessage,parseInt(n.level)||2)),!1}return!0}}},se=a(0),oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a);var r=(i=t.call(this,e)).props.intl;return i.state={email:"",password:"",code:"",error:{},showPassword:!1,showCodeInput:!1,emailFocus:!1,passwordFocus:!1,codeBtnDisabled:!1,codeText:r.formatMessage({id:"label.getEmailCode"})},i.getEmailCodeCheckInput=ne.stateValidator(Object(R.a)(i),[{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.email"})})}]),i.getEmailCodeCheckResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1037,errorMessage:r.formatMessage({id:"message.error.inputNewEmail"})},{name:"email",exceptionCode:1030,errorMessage:r.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"password",exceptionCode:1036,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.password"})})},{name:"email",exceptionCode:1029,errorMessage:r.formatMessage({id:"message.error.getEmailCodeFail"})}]),i.saveEmailCheckInput=ne.stateValidator(Object(R.a)(i),[{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"password",passPattern:/^.+$/,errorMessage:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.password"})})},{name:"code",passPattern:/^[0-9]{6}$/,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.emailCode"})})}]),i.saveEmailCheckResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1029,errorMessage:r.formatMessage({id:"message.error.change_S_Fail"},{s:r.formatMessage({id:"label.email"})})},{name:"code",exceptionCode:1036,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.email"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({email:this.props.currentUserInfo.email})}},{key:"getEmailCode",value:function(){var e=this,t=this.props.intl,a=this.state,i=a.email,r=a.password;if(a.codeBtnDisabled||!r||!this.getEmailCodeCheckInput())return!1;ee.getEmailCode({email:i,password:r}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){if(a.code){if(!e.getEmailCodeCheckResponse(a.code))return!1}else e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),e.setState({showCodeInput:!0}),e.countDown()}))}},{key:"countDown",value:function(){var e=this,t=this.props.intl;this.setState({codeBtnDisabled:!0});var a=60;this.int=setInterval((function(){e.setState({codeText:t.formatMessage({id:"label.retryAfter_N_seconds"},{n:a})}),--a<=0&&(clearInterval(e.int),e.setState({codeText:t.formatMessage({id:"label.getEmailCode"}),codeBtnDisabled:!1}))}),1e3)}},{key:"saveData",value:function(){var e=this,t=this.props.intl,a=this.state,i=a.email,r=a.password,n=a.code;if(!this.saveEmailCheckInput())return!1;ee.changeEmail({password:r,email:i,code:n}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){if(a.code){if(e.saveEmailCheckResponse(a.code))return!1}else e.props.update((function(){e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.updated"}),0)),setTimeout((function(){return window.location.href="/user/logout"}),3e3)}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,n=this.state,s=n.email,o=n.password,c=n.code,l=n.error,p=n.showPassword,d=n.showCodeInput;return Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.email"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:s,error:!!l.email,helperText:l.email,placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.email"})}),onChange:function(t){return e.setState({email:t.target.value})},onFocus:function(){return e.setState({emailFocus:!0,showPassword:!0})},onBlur:function(){return setTimeout((function(){e.setState({emailFocus:!1}),!e.state.passwordFocus&&e.setState({showPassword:!1})}),150)}})}),p&&!d&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,md:8,lg:9,children:Object(se.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",value:o,error:!!l.password,helperText:l.password,placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.password"})}),onChange:function(t){return e.setState({password:t.target.value})},onFocus:function(){return e.setState({passwordFocus:!0})},onBlur:function(){return setTimeout((function(){e.setState({passwordFocus:!1}),!e.state.emailFocus&&e.setState({showPassword:!1})}),150)}})}),Object(se.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.getEmailCode()},children:i.formatMessage({id:"label.getEmailCode"})})})]}),d&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,md:8,lg:9,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",className:a.pr0,value:c,error:!!l.code,helperText:l.code,placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.emailCode"})}),onChange:function(t){return e.setState({code:t.target.value})},InputProps:{endAdornment:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.getEmailCode()},disabled:this.state.codeBtnDisabled,children:this.state.codeText})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.saveData()},children:i.formatMessage({id:"label.save"})})})]})]})})}}]),a}(r.a.Component),ce=Object(N.b)(Object(S.a)((function(e){return{pr0:{"& > div":{paddingRight:"0px !important"},"& button":{minWidth:e.spacing(18)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(oe))),le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).oldData=e.currentUserInfo[e.comData.field],i.state={data:i.oldData,showBtn:!1,error:{}},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"data",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:e.comData.label})})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"data",exceptionCode:1029,errorMessage:i.props.intl.formatMessage({id:"message.error.change_S_Fail"},{s:i.props.intl.formatMessage({id:e.comData.label})})}]),i}return Object(d.a)(a,[{key:"saveData",value:function(){var e=this,t=this.props,a=t.intl,i=t.comData,r=this.state.data;if(this.oldData===r||!this.checkInput())return!1;ee.setUserData({data:r,field:i.field}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code){if(!e.checkResponse(t.code))return!1}else e.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.updated"}),0)),e.oldData=r,e.props.update()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,i=t.comData;return Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:a.formatMessage({id:i.label})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.data,error:!!this.state.error.data,helperText:this.state.error.data,placeholder:a.formatMessage({id:"message.error._S_empty"},{s:a.formatMessage({id:i.label})}),onChange:function(t){return e.setState({data:t.target.value})},onFocus:function(){return e.setState({showBtn:!0})}})}),this.state.showBtn&&Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({showBtn:!1})},children:a.formatMessage({id:"label.cancel"})}),"\xa0\xa0",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.saveData()},children:a.formatMessage({id:"label.save"})})]})]})})}}]),a}(r.a.Component),pe=Object(N.b)(Object(S.a)((function(e){return{}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(le))),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={},i.updateAllInfo=i.updateAllInfo.bind(Object(R.a)(i)),i}return Object(d.a)(a,[{key:"updateAllInfo",value:function(e){var t=this;ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||(t.props.dispatchEvent({type:"data.currentUserInfo.update",data:a.data}),"function"===typeof e&&e())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.currentUserInfo,i=e.intl;return Object(se.jsxs)("div",{children:[Object(se.jsx)(w.a,{variant:"subtitle1",gutterBottom:!0,children:i.formatMessage({id:"label.settings"})}),Object(se.jsxs)(M.a,{className:t.infoWrap,children:[Object(se.jsx)(w.a,{variant:"subtitle1",gutterBottom:!0,children:i.formatMessage({id:"label.profile"})}),Object(se.jsx)("div",{className:"mt30"}),"u_key"in a?Object(se.jsx)(pe,{comData:{field:"name",label:"label.userName"},currentUserInfo:a,update:this.updateAllInfo}):"",Object(se.jsx)("div",{className:"mt30"}),"u_key"in a?Object(se.jsx)(ce,{currentUserInfo:a,update:this.updateAllInfo}):"",Object(se.jsx)("div",{className:"mt30"}),Object(se.jsx)(w.a,{variant:"subtitle2",gutterBottom:!0,children:i.formatMessage({id:"label.loginCredential"})}),Object(se.jsx)("div",{className:"mt30"}),"u_key"in a?Object(se.jsx)(pe,{comData:{field:"company",label:"label.company"},currentUserInfo:a,update:this.updateAllInfo}):"",Object(se.jsx)("div",{className:"mt30"}),"u_key"in a?Object(se.jsx)(pe,{comData:{field:"job",label:"label.job"},currentUserInfo:a,update:this.updateAllInfo}):""]})]})}}]),a}(r.a.Component),ue=Object(N.b)(Object(S.a)((function(e){return{infoWrap:{padding:"20px 30px 60px 30px",marginTop:20}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(de))),me=a(545),he=a(55),ge=a(488),fe=a(14),be=a(3),je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.onDelete,i=e.classes;return Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"body1",className:i.line,children:[t.name," \xa0"]}),Object(se.jsx)(w.a,{variant:"body2",className:i.line2,children:t.hash.replace(/([a-f0-9]{2})/gi,"$1:").slice(0,-1)})]}),Object(se.jsx)(k.a,{item:!0,className:i.center,children:Object(se.jsx)(_.a,{onClick:function(e){a&&a(t.id)},children:Object(se.jsx)(fe.a,{icon:be.D,className:i.icon})})})]})}}]),a}(r.a.Component),Oe=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{line:{marginTop:e.spacing(1),marginBottom:e.spacing(.5)},line2:{marginBottom:e.spacing(1)},center:{display:"flex",alignItems:"center"},icon:{color:e.palette.text.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(je))))),ve=a(540),ye=a(544),xe=a(543),Ce=a(541),Se=a(542),Re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.intl,i=t||[[],[]];return i=K(a.formatMessage,i),Object(se.jsxs)(ve.a,{children:[Object(se.jsx)(Ce.a,{children:Object(se.jsx)(Se.a,{children:i[1].map((function(e,t){return Object(se.jsx)(xe.a,{style:{width:i[0][t]},children:Object(se.jsx)(w.a,{variant:"body1",component:"span",children:e})},t)}))})}),Object(se.jsx)(ye.a,{children:i.map((function(e,t){return t>1?Object(se.jsx)(Se.a,{children:e.map((function(e,t){return Object(se.jsx)(xe.a,{children:e},t)}))},t):null}))})]})}}]),a}(i.Component),Ne=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Re))))),Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,keyList:[],name:"",key:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"key",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.SSHKey"})})},{name:"key",passPattern:/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S)+(?:\s+(\S+))?\s*$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.SSHKey"})})},{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.name"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"key",exceptionCode:1037,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.SSHKey"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addKey",value:function(){var e=this;if(!this.checkInput())return!1;var t=this.props,a=t.intl,i=t.dispatchEvent,r=this.state,n=r.key,s=r.name,o=n.match(/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S+)(?:\s+(\S+))?\s*$/);return this.setState({pending:!0}),ee.addSSHKey({name:s,key:o[2]}).then(re.withEventdispatcher(i)(re.getJSONData)).then((function(t){if(e.setState({pending:!1}),t.code){if(!e.checkResponse(t.code))return!1;t.code>1024&&i(te.NewNotification(a.formatMessage({id:"message.error.AddFail"}),2))}else i(te.NewNotification(a.formatMessage({id:"message.Added"}),0)),e.setState({name:"",key:""}),e.getData()})),!0}},{key:"removeKey",value:function(e){var t=this,a=this.props,i=a.intl,r=a.dispatchEvent;ee.removeSSHKey({id:e}).then(re.withEventdispatcher(r)(re.getJSONData)).then((function(e){e.code?e.code>1024&&r(te.NewNotification(i.formatMessage({id:"message.error.removeFail"}),2)):(r(te.NewNotification(i.formatMessage({id:"message.removed"}),0)),t.getData())}))}},{key:"getData",value:function(){var e=this;ee.getKeyList().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.setState({keyList:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.classes,r=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:i.title,children:r.formatMessage({id:"label.SSHKey_pl"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(M.a,{children:a.id?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[r.formatMessage({id:"label.addSSHKey"})," \xa0",Object(se.jsx)(he.a,{type:"icon",docID:"211cfb16bc8460bc44068f3b34ee2a63"})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:7,value:this.state.key,error:!!this.state.error.key,helperText:this.state.error.key,placeholder:r.formatMessage({id:"message.inputSSHKEYContent"}),onChange:function(t){var a=t.target.value,i=a.match(/^((?:ssh|ecdsa)-[\w\d]+)\s+(\S)+(?:\s+(\S+))?\s*$/),r={key:a,name:""};i&&i[3]&&(r.name=i[3]),e.setState(r)}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.name"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){return e.setState({name:t.target.value})},placeholder:r.formatMessage({id:"message.inputSSHKEYName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(se.jsx)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.addKey()},disabled:this.state.pending,className:i.btn,children:r.formatMessage({id:"label.addSSHKey"})})})]})}),Object(se.jsx)(k.a,{item:!0,xs:3}),Object(se.jsx)(k.a,{item:!0,xs:7,className:i.table,children:Object(se.jsx)(Ne,{data:[["100%"],["label.SSHKeyManage"]].concat(Object(T.a)(this.state.keyList.filter(U.notDeleted()).map((function(t,a){return[Object(se.jsx)(Oe,{item:t,onDelete:function(t){return e.removeKey(t)}},a)]}))))})}),Object(se.jsx)(k.a,{item:!0,xs:3})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})})})]})}}]),a}(r.a.Component),we=Object(N.b)(Object(S.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",borderBottom:"1px solid "+e.palette.border},paper:{padding:e.spacing(2)},btn:{margin:e.spacing(2)+"px 0px"},table:{"& th, & td":{textAlign:"left !important"}}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Me))),ke=a(5),_e=a(308),Ee=["icon","className","label","badge","intl","classes"],Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.className,i=e.label,r=e.badge,n=e.intl,s=e.classes,o=Object(ke.a)(e,Ee),c=Object(se.jsxs)(_.a,Object(y.a)(Object(y.a)({},o),{},{className:[s.button,a].join(" "),children:[Object(se.jsx)(fe.a,{icon:t,className:s.icon}),r>0&&Object(se.jsx)("div",{align:"center",className:s.badge,children:r>99?"":r})]}));return i?Object(se.jsx)(_e.a,{title:n.formatMessage({id:i}),placement:"top",disableFocusListener:!0,children:c}):c}}]),a}(r.a.Component),Ae=Object(N.b)(Object(S.a)((function(e){return{button:{minWidth:e.spacing(3)+"px !important",padding:"7px 8px !important"},icon:{width:"18px !important",height:"18px !important"},badge:{right:0,top:"-5px",zIndex:"1",fontSize:"12px",position:"absolute",borderRadius:"10px",background:"#FF3F35",height:e.spacing(2),minWidth:e.spacing(2),lineHeight:e.spacing(2)+"px",color:e.palette.primary.contrastText,border:"2px solid "+e.palette.background.light}}}))(Te)),De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,primaryEmail:e.currentUserInfo.id?e.currentUserInfo.email:"",emails:e.currentUserInfo.id?e.currentUserInfo.emails:null,email:"",error:{},validationEmail:null,code:"",codeDisabled:!1,count:61};var r=e.intl;return i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"email",passPattern:/^.+$/,errorMessage:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.email"})})}]),i.codeCheckInput=ne.stateValidator(Object(R.a)(i),[{name:"code",passPattern:/^\d+$/,errorMessage:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.emailCode"})})},{name:"code",passPattern:/^\d{6}$/,errorMessage:r.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.emailCode"})})}]),i.codeCheckResponse=ne.codeValidator(Object(R.a)(i),[{name:"code",exceptionCode:1036,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:r.formatMessage({id:"label.emailCode"})})}]),i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentUserInfo)===JSON.stringify(this.props.currentUserInfo)||(this.setState({primaryEmail:e.currentUserInfo.email,emails:e.currentUserInfo.emails}),!1)}},{key:"reloadUserData",value:function(e){var t=this;e&&this.cancelForm(),ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||t.props.dispatchEvent({type:"data.currentUserInfo.update",data:e.data})}))}},{key:"addCommitEmail",value:function(){var e=this,t=this.state,a=t.emails,i=t.email,r=this.props.intl;return!(!a||!this.checkInput())&&(a.filter(U.email(i)).length>0?(this.setState({error:{email:r.formatMessage({id:"message.error._S_duplicate"},{s:r.formatMessage({id:"label.email"})})}}),!1):(this.setState({pending:!0}),void ee.addCommitEmail({email:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({pending:!1}),t.code?e.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.error.AddFail"}),2)):(e.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),e.createValidationForm(i),e.reloadUserData(!1))}))))}},{key:"resentCommitEmailCode",value:function(e){var t=this,a=this.props.intl;if(this.state.codeDisabled)return!1;this.cancelForm(),ee.resentCommitEmailCode({email:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.error.getEmailCodeFail"}),2)):(t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.emailCodeHasSendNewEmail"}),0)),t.countDown())}))}},{key:"countDown",value:function(){var e=this,t=this.state.count;t?(this.setState({codeDisabled:!0,count:--t}),window.setTimeout((function(){return e.countDown()}),1e3)):this.setState({codeDisabled:!1,count:61})}},{key:"validationCommitEmailCode",value:function(e){var t=this,a=this.props.intl,i=this.state.code;if(!e||!this.codeCheckInput())return!1;this.setState({pending:!0}),ee.validationCommitEmailCode({id:e.id,email:e.email,code:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){if(t.setState({pending:!1}),e.code){if(!t.codeCheckResponse(e.code))return!1;t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.error.verifyFail"}),2))}else t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.verified"}),0)),t.reloadUserData(!0)}))}},{key:"deleteConfirm",value:function(e,t){var a=this,i=this.props.intl;this.cancelForm(),this.props.dispatchEvent(te.addComformation("delete_my_email",{title:i.formatMessage({id:"message.confirmDelete"},{s:i.formatMessage({id:"label.email"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){return a.deleteCommitEmail(e)}}))}},{key:"deleteCommitEmail",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.setState({pending:!0}),ee.deleteCommitEmail({id:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),t.props.dispatchEvent(te.cancelComformation()),e.code?t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.error.deleteFail"}),2)):(t.props.dispatchEvent(te.NewNotification(a.formatMessage({id:"message.deleted"}),0)),t.reloadUserData(!0))}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,n=this.state,s=n.primaryEmail,o=n.emails,c=n.validationEmail,l=n.codeDisabled,p=n.count,d=[];return!!o&&(o.map((function(t,n){return"create"===t?d.push(e.createForm()):c===t.email?d.push(e.validationForm(t)):d.push([Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t.email}),t.email===s?Object(se.jsx)(w.a,{variant:"body2",component:"div",children:i.formatMessage({id:"label.primaryEmail"})}):t.isCheck?Object(se.jsx)(w.a,{variant:"body2",component:"div",children:i.formatMessage({id:"message.contactedEmail"})}):Object(se.jsxs)(w.a,{variant:"body2",component:"div",children:[i.formatMessage({id:"message.shouldValidation"}),Object(se.jsxs)("a",{href:"#",disabled:l,className:[a.btn,l?a.disabled:""].join(" "),onClick:function(a){return e.resentCommitEmailCode(t.email)},children:[i.formatMessage({id:"message.resendEmail"}),"?",l&&"("+p+")"]})]}),t.email!==s&&Object(se.jsxs)(r.a.Fragment,{children:[!t.isCheck&&Object(se.jsx)(Ae,{label:"message.shouldValidation",className:a.icon,onClick:function(a){return e.createValidationForm(t.email)},icon:be.k}),Object(se.jsx)(Ae,{label:"label.delete",className:[a.icon,a.btn].join(" "),onClick:function(a){return e.deleteConfirm(t.id,t.email)},icon:be.D})]})]),!0})),[["30%","auto","auto"],["label.contactEmail","label.status",""]].concat(d))}},{key:"createForm",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl;return[Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email,placeholder:i.formatMessage({id:"message._S_empty"},{s:i.formatMessage({id:"label.email"})}),error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})}}),"",Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.ok",icon:be.e,onClick:function(t){return e.addCommitEmail()},className:a.ok}),Object(se.jsx)(Ae,{label:"label.cancel",icon:be.f,onClick:function(t){return e.cancelForm()},className:a.cancel})]})]}},{key:"validationForm",value:function(e){var t=this,a=this.props,i=a.classes,n=a.intl;return[Object(se.jsx)(w.a,{variant:"body1",component:"div",children:e.email}),Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.code,placeholder:n.formatMessage({id:"message._S_empty"},{s:n.formatMessage({id:"label.emailCode"})}),error:!!this.state.error.code,helperText:this.state.error.code,onChange:function(e){return t.setState({code:e.target.value})}}),Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.ok",icon:be.e,onClick:function(a){return t.validationCommitEmailCode(e)},className:i.ok}),Object(se.jsx)(Ae,{label:"label.cancel",icon:be.f,onClick:function(e){return t.cancelForm()},className:i.cancel})]})]}},{key:"cancelForm",value:function(){var e=this.state.emails;"create"===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.setState({emails:e,email:"",error:{},validationEmail:null,code:""})}},{key:"createCommitEmailForm",value:function(){var e=this.state.emails;"create"!==e[e.length-1]&&(this.cancelForm(),this.setState({emails:[].concat(Object(T.a)(e),["create"])}))}},{key:"createValidationForm",value:function(e){this.cancelForm(),this.setState({validationEmail:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,i=t.classes,r=t.intl,n=this.state,s=n.pending,o=n.primaryEmail,c=n.emails;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:i.header,children:r.formatMessage({id:"label.emailManage"})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.title,children:r.formatMessage({id:"message.primaryEmail"})}),Object(se.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"message.primaryEmailDescription"})}),Object(se.jsxs)(k.a,{container:!0,className:i.content,children:[Object(se.jsx)(k.a,{item:!0,xs:3,children:Object(se.jsx)(w.a,{variant:"body1",component:"div",children:o})}),Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return a.push(V("settings","profile"))},children:r.formatMessage({id:"message.updatePrimaryEmail"})})})]})]}),Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsxs)(k.a,{item:!0,xs:8,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.title,children:r.formatMessage({id:"message.myEmail"})}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",children:[r.formatMessage({id:"message.myEmailDescription"})," \xa0",Object(se.jsx)(he.a,{type:"icon",docID:"2411cf176aa198cf701a5d422d70a58c"})]})]}),Object(se.jsx)(k.a,{item:!0,xs:4,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:i.create,disabled:s,onClick:function(t){return e.createCommitEmailForm()},children:r.formatMessage({id:"message.addEmail"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:i.table,children:null!==c?Object(se.jsx)(Ne,{data:this.getTableData()}):Object(se.jsx)(k.a,{container:!0,className:i.loading,children:Object(se.jsx)(me.a,{})})})]})]})}}]),a}(r.a.Component),Ie=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},title:{lineHeight:e.spacing(3)+"px",paddingBottom:e.spacing(2)},content:{paddingTop:e.spacing(3),paddingBottom:e.spacing(5),borderBottom:"1px solid "+e.palette.border,marginBottom:e.spacing(3)},create:{marginTop:e.spacing(1)},size:{fontSize:"12px"},btn:{textDecoration:"none !important",marginLeft:e.spacing(3)},icon:{color:e.palette.text.light},disabled:{opacity:.5,cursor:"not-allowed"},ok:{"& svg":{color:e.palette.success.main+" !important"}},cancel:{marginLeft:e.spacing(3),"& svg":{width:"14px !important",height:"14px !important",padding:"2px",color:e.palette.error.main+" !important"}},table:{marginTop:e.spacing(3),"& tbody tr":{"&:hover":{background:e.palette.background.light+" !important"}},"& td":{height:e.spacing(6)+"px","& > div":{verticalAlign:"middle"}}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(De)))),Fe=a(579),Pe=a(295),Le=a.n(Pe),Be=a(32),Ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={showImgIcon:!1},i.uploadFile=i.uploadFile.bind(Object(R.a)(i)),i.instanceID="",i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.instanceID=Math.floor(1e6*Math.random())}},{key:"uploadFile",value:function(e){var t=this.props,a=t.appendData,i=t.name,r=t.dataProvider,n=e.target.files[0],s=Object(y.a)({},a);s[i+"_BINARY"]=n,r(s).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then(this.props.onUpdate)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.src,n=t.variant;return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)("label",{htmlFor:"avater-uploader-"+this.instanceID,className:a.avatarLabel,onMouseEnter:function(){e.setState({showImgIcon:!0})},onMouseLeave:function(){e.setState({showImgIcon:!1})},children:[Object(se.jsx)(Fe.a,{variant:n,src:i,className:Le()(a.userInfoAvatar)}),this.state.showImgIcon&&Object(se.jsx)(k.a,{className:[a.iconBox,"circle"===n?a.iconBoxCircle:a.iconBoxRounded].join(" "),children:Object(se.jsx)(fe.a,{icon:Be.h,className:a.editIcon})})]}),Object(se.jsx)("input",{accept:"image/*",className:a.uploadInput,id:"avater-uploader-"+this.instanceID,type:"file",onChange:this.uploadFile})]})}}]),a}(r.a.Component),Ge=Object(N.b)(Object(S.a)((function(e){return{avatarLabel:{cursor:"pointer",position:"relative",display:"inline-block",borderRadius:e.spacing(1)+"px"},iconBox:{width:"100%",position:"absolute",left:"0",bottom:"0",background:"#2F354D",opacity:.3},iconBoxRounded:{height:"40%",borderBottomLeftRadius:e.spacing(1)+"px",borderBottomRightRadius:e.spacing(1)+"px"},iconBoxCircle:{height:"100%",borderRadius:"50%"},editIcon:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:e.spacing(2)+"px",color:"#fff"},uploadInput:{display:"none !important"},userInfoAvatar:{width:e.spacing(7),height:e.spacing(7)}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ue))),He=a(24),qe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i,r;return Object(p.a)(this,a),(r=t.call(this,e)).state=(i={},Object(He.a)(i,e.name,r.props.currentUserInfo&&r.props.currentUserInfo[e.infoName]?r.props.currentUserInfo[e.infoName]:""),Object(He.a)(i,"error",{}),Object(He.a)(i,"showInput",!1),i),r.unmounted=!1,r.checkResponse=ne.codeValidator(Object(R.a)(r),[{name:"data",exceptionCode:1029,errorMessage:r.props.intl.formatMessage({id:"message.error.basicInfoChangeFail"})}]),r}return Object(d.a)(a,[{key:"checkBaseInfo",value:function(){var e=[];switch(this.props.name){case"name":e.push({name:"name",passPattern:/^\S+$/,errorMessage:this.props.intl.formatMessage({id:"message.error._S_empty"},{s:this.props.intl.formatMessage({id:"label.userName"})})},{name:"name",passPattern:/^.{2,50}$/,errorMessage:this.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:2,n2:50})});break;case"email":e.push({name:"email",passPattern:/^.+$/,errorMessage:this.props.intl.formatMessage({id:"message.error._S_empty"},{s:this.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^[^@]+@[^@]+\.[^@]+$/,errorMessage:this.props.intl.formatMessage({id:"message.error._S_invalid"},{s:this.props.intl.formatMessage({id:"label.email"})})});break;case"team":e.push({name:"team",passPattern:/^.{0,50}$/,errorMessage:this.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:50})});break;case"role":e.push({name:"role",passPattern:/^.{0,50}$/,errorMessage:this.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:50})})}return ne.stateValidator(this,e)()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"basicInfoUpdate",value:function(){var e=this;if(!this.checkBaseInfo())return!1;ee.updateBasicInfo({field:this.props.name,value:this.state[this.props.name]}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code){if(!e.checkResponse(t.code))return!1}else e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.setState({showInput:!1}),e.props.update()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,i=t.showInput,r=this.props,n=r.classes,s=r.intl,o=r.name,c=r.label,l=r.currentUserInfo,p=r.infoName;return Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,className:n.flexRowCenter,children:[Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(w.a,{variant:"body2",component:"div",children:s.formatMessage({id:c})})}),Object(se.jsxs)(k.a,{item:!0,xs:5,className:n.flexRow,children:[!i&&Object(se.jsx)(w.a,{className:n.breakWord,variant:l&&l[p]?"subtitle1":"body2",component:"div",children:l&&l[p]?l[p]:s.formatMessage({id:"message.error._S_empty"},{s:s.formatMessage({id:c})})}),i&&Object(se.jsx)(k.a,{container:!0,children:Object(se.jsx)(k.a,{item:!0,xs:11,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",error:!!a[o],helperText:a[o],placeholder:l&&l[p]?l[p]:s.formatMessage({id:"message.error._S_empty"},{s:s.formatMessage({id:c})}),value:this.state[o],onChange:function(t){var i;a[o]="",e.setState((i={},Object(He.a)(i,o,t.target.value),Object(He.a)(i,"error",a),i))}})})})]}),Object(se.jsxs)(k.a,{item:!0,xs:5,children:[!i&&Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:[n.btn,n.editBtn].join(" "),onClick:function(t){return e.setState({showInput:!0})},children:s.formatMessage({id:"label.edit"})}),i&&Object(se.jsxs)(k.a,{className:n.flexRow,children:[Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:n.btn,onClick:function(t){return e.basicInfoUpdate()},children:s.formatMessage({id:"label.save"})}),Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:n.btn,onClick:function(){return e.setState({showInput:!1})},children:s.formatMessage({id:"label.cancel"})})]})]})]})})}}]),a}(r.a.Component),ze=Object(N.b)(Object(S.a)((function(e){return{btn:{marginLeft:e.spacing(.5),minWidth:e.spacing(8),padding:0},editBtn:{color:e.palette.primary.main},flexRow:{display:"flex",flexFlow:"row nowrap",justifyContent:"flex-start",alignItems:"flex-start"},flexRowCenter:{display:"flex",flexFlow:"row nowrap",alignItems:"center",padding:e.spacing(1.5)+"px "+e.spacing(1)+"px",marginLeft:e.spacing(4)},breakWord:{wordBreak:"break-word"}}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(qe))),Ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={newPassword:"",againPassword:"",oldPassword:"",password:"",error:{}},i.unmounted=!1,i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"oldPassword",exceptionCode:1040,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.password"})})}]),i}return Object(d.a)(a,[{key:"savePasswordCheckInput",value:function(){var e=[{name:"oldPassword",passPattern:/^.{6,}$/,errorMessage:this.props.intl.formatMessage({id:"message.error._S_empty"},{s:this.props.intl.formatMessage({id:"label.oldPassword"})})},{name:"newPassword",passPattern:/^.{6,50}$/,errorMessage:this.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:6,n2:50})},{name:"againPassword",passPattern:new RegExp("^"+this.state.newPassword+"$"),errorMessage:this.props.intl.formatMessage({id:"message.error._S_retype"},{s:this.props.intl.formatMessage({id:"label.newPassword"})})}];return ne.stateValidator(this,e)()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"saveData",value:function(){var e=this,t=this.state,a=t.oldPassword,i=t.newPassword;if(!this.savePasswordCheckInput())return!1;ee.updatePassword({current:a,new:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code){if(!e.checkResponse(t.code))return!1;t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2))}else e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.props.update(),e.cancel()}))}},{key:"cancel",value:function(){this.setState({showInput:!1,newPassword:"",againPassword:"",oldPassword:"",password:"",error:{}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,i=t.classes,n=this.state,s=n.error,o=n.oldPassword,c=n.newPassword,l=n.againPassword;return Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsxs)(k.a,{container:!0,className:[i.flexRowCenter,i.container].join(" "),children:[Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(w.a,{variant:"body2",component:"div",children:a.formatMessage({id:"label.password"})})}),Object(se.jsx)(k.a,{item:!0,xs:5,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:"******"})}),!this.state.showInput&&Object(se.jsx)(k.a,{item:!0,xs:5,children:Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:i.btn,onClick:function(t){return e.setState({showInput:!0})},children:a.formatMessage({id:"label.edit"})})})]}),this.state.showInput&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)(k.a,{container:!0,className:[i.flexRowCenter,i.container].join(" "),children:[Object(se.jsx)(k.a,{item:!0,xs:2}),Object(se.jsx)(k.a,{item:!0,xs:5,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",type:"password",value:o,error:!!s.oldPassword,helperText:s.oldPassword,placeholder:a.formatMessage({id:"message.error._S_empty"},{s:a.formatMessage({id:"label.oldPassword"})}),onChange:function(t){return e.setState({oldPassword:t.target.value})}})})]}),Object(se.jsxs)(k.a,{container:!0,className:[i.flexRowCenter,i.container].join(" "),children:[Object(se.jsx)(k.a,{item:!0,xs:2}),Object(se.jsx)(k.a,{item:!0,xs:5,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",type:"password",value:c,error:!!s.newPassword,helperText:s.newPassword,placeholder:a.formatMessage({id:"message.error._S_empty"},{s:a.formatMessage({id:"label.newPassword"})}),onChange:function(t){return e.setState({newPassword:t.target.value})}})})]}),Object(se.jsxs)(k.a,{container:!0,className:[i.flexRowCenter,i.container].join(" "),children:[Object(se.jsx)(k.a,{item:!0,xs:2}),Object(se.jsx)(k.a,{item:!0,xs:5,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",type:"password",value:l,error:!!s.againPassword,helperText:s.againPassword,placeholder:a.formatMessage({id:"message.error._S_retype"},{s:a.formatMessage({id:"label.newPassword"})}),onChange:function(t){return e.setState({againPassword:t.target.value})}})})]}),Object(se.jsxs)(k.a,{container:!0,className:[i.flexRowCenter,i.container].join(" "),children:[Object(se.jsx)(k.a,{item:!0,xs:2}),Object(se.jsxs)(k.a,{item:!0,xs:5,children:[Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.saveData()},children:a.formatMessage({id:"label.save"})}),Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:i.cancel,onClick:function(){return e.cancel()},children:a.formatMessage({id:"label.cancel"})})]})]})]})]})}}]),a}(r.a.Component),We=Object(N.b)(Object(S.a)((function(e){return{flexRowCenter:{display:"flex",flexFlow:"row nowrap",alignItems:"center"},flexRowCenterEnd:{display:"flex",flexFlow:"row nowrap",justifyContent:"flex-end",alignItems:"center"},flexRow:{display:"flex",flexFlow:"row nowrap",justifyContent:"flex-start",alignItems:"flex-start"},container:{padding:e.spacing(1),marginLeft:e.spacing(4)},btn:{marginLeft:e.spacing(.5),minWidth:e.spacing(8),padding:0,color:e.palette.primary.main},cancel:{marginLeft:e.spacing(1)},pr0:{"& > div":{paddingRight:"0px !important"},"& button":{minWidth:e.spacing(18)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ve))),Ke=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).updateUserInfo=i.updateUserInfo.bind(Object(R.a)(i)),i.mountedFlag=!1,i.state={mfaMode:0,mfaQRCodeData:"",mfaSecret:"",mfaCode1:"",mfaCode2:"",error:{}},i.checkMFAInput=ne.stateValidator(Object(R.a)(i),[{name:"mfaCode1",passPattern:/^\d{6}$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.mfaCode"})})},{name:"mfaCode2",passPattern:/^\d{6}$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.mfaCode"})})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"mfaCode1",exceptionCode:1041,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.mfaCode"})})},{name:"mfaCode2",exceptionCode:1042,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.mfaCode"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.updateUserInfo()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(te.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.updateUserInfo())}},{key:"updateUserInfo",value:function(e){var t=this;ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||(t.props.dispatchEvent({type:"data.currentUserInfo.update",data:a.data}),"function"===typeof e&&e())}))}},{key:"prepareMFADeviceSetup",value:function(){var e=this;this.setState({pending:!0}),ee.getMFAData().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({pending:!1}),t&&!t.code&&t.data&&e.setState({mfaMode:1,mfaQRCodeData:t.data.image,mfaSecret:t.data.secret,mfaCode1:"",mfaCode2:""})}))}},{key:"revokeMFADevice",value:function(){var e=this;this.setState({pending:!0}),ee.revokeMFAData().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({pending:!1}),t&&!t.code&&t.data&&(e.updateUserInfo(),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.removed"}),0)))}))}},{key:"updateMFADevice",value:function(){var e=this;return!!this.checkMFAInput()&&(this.state.mfaCode1===this.state.mfaCode2?(this.setState({error:Object(y.a)(Object(y.a)({},this.state.error),{},{mfaCode2:this.props.intl.formatMessage({id:"message.error.inputSame"})})}),!1):(this.setState({pending:!0}),void ee.updateMFAData({secret:this.state.mfaSecret,code1:this.state.mfaCode1,code2:this.state.mfaCode2}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(e.setState({pending:!1}),t.code){if(!e.checkResponse(t.code))return!1;t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2))}else e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.setState({mfaMode:0,mfaQRCodeData:"",mfaSecret:"",mfaCode1:"",mfaCode2:""}),e.updateUserInfo()}))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,className:i.paper,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:i.header,children:n.formatMessage({id:"menu.profile"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,className:i.flexRowCenter,children:[Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(w.a,{variant:"body2",component:"div",children:n.formatMessage({id:"label.userAvatar"})})}),Object(se.jsx)(k.a,{item:!0,xs:5,className:i.flexRow,children:Object(se.jsx)(Ge,{name:"avatar",variant:"circle",appendData:{},src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:ee.uploadAvatar})})]})}),Object(se.jsx)(ze,{label:"label.userName",name:"name",infoName:"name",update:this.updateUserInfo}),Object(se.jsx)(ze,{label:"label.email",name:"email",infoName:"email",update:this.updateUserInfo}),Object(se.jsx)(ze,{label:"label.team",name:"team",infoName:"team",update:this.updateUserInfo}),Object(se.jsx)(ze,{label:"label.role",name:"role",infoName:"role",update:this.updateUserInfo}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.security"})})}),Object(se.jsx)(We,{currentUserInfo:a,update:this.updateUserInfo}),Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.twoFactorAuthentication"})})}),Object(se.jsx)(k.a,{item:!0,xs:5}),0===this.state.mfaMode&&(a.mfaEnabled?Object(se.jsxs)(k.a,{item:!0,xs:5,className:i.pl,children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:i.btn,disabled:this.state.pending,onClick:function(){return e.prepareMFADeviceSetup()},children:n.formatMessage({id:"label.changeMFADevice"})}),"\xa0\xa0",Object(se.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.revokeMFADevice()},children:n.formatMessage({id:"label.removeMFADevice"})})]}):Object(se.jsx)(k.a,{item:!0,xs:5,className:i.pl,children:Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:i.btn,disabled:this.state.pending,onClick:function(){return e.prepareMFADeviceSetup()},children:n.formatMessage({id:"label.setupNewMFADevice"})})})),1===this.state.mfaMode&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsx)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:n.formatMessage({id:"message.mfaGuide"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)("img",{width:150,height:150,src:this.state.mfaQRCodeData})}),Object(se.jsx)(k.a,{item:!0,xs:12,sm:7,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.mfaCode1,error:!!this.state.error.mfaCode1,helperText:this.state.error.mfaCode1,placeholder:n.formatMessage({id:"label.mfaCode"}),onChange:function(t){return e.setState({mfaCode1:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,sm:7,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.mfaCode2,error:!!this.state.error.mfaCode2,helperText:this.state.error.mfaCode2,placeholder:n.formatMessage({id:"label.mfaCode"}),onChange:function(t){return e.setState({mfaCode2:t.target.value})}})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.updateMFADevice()},children:n.formatMessage({id:"label.save"})}),"\xa0\xa0",Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:i.btn,disabled:this.state.pending,onClick:function(){return e.setState({mfaMode:0})},children:n.formatMessage({id:"label.cancel"})})]})]})]})}}]),a}(r.a.Component),Je=Object(N.b)(Object(S.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},title:{lineHeight:e.spacing(3)+"px",paddingBottom:e.spacing(2)},pl:{paddingLeft:e.spacing(4)+"px !important"},btn:{color:e.palette.primary.main,cursor:"pointer"},paper:{paddingBottom:e.spacing(10)},flexRow:{display:"flex",flexFlow:"row nowrap",justifyContent:"flex-start",alignItems:"center"},flexRowCenter:{display:"flex",flexFlow:"row nowrap",alignItems:"center",padding:e.spacing(1.5)+"px "+e.spacing(1)+"px",marginLeft:e.spacing(4)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ke)))),$e=a(546),Ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,i=e.icon,r=e.text,n=e.color,s={containedInfo:{main:a.palette.primary.contrastText,lighter:a.palette.secondary.main}},o=n?(a.palette[n]?a.palette:s)[n]:a.palette.primary;return i?Object(se.jsxs)("span",{className:[t.root,t.iconPadding].join(" "),style:{backgroundColor:o.lighter,color:o.main},children:[Object(se.jsx)("div",{className:t.icon,children:Object(se.jsx)(fe.a,{icon:i})}),r]}):Object(se.jsx)("span",{className:[t.root,"text-overflow"].join(" "),style:{backgroundColor:o.lighter,color:o.main},children:r})}}]),a}(r.a.Component),Ye=Object(ge.a)(Object(S.a)((function(e){return{root:{padding:"0 "+e.spacing(.5)+"px",lineHeight:1.5,fontSize:e.spacing(1.5)+"px",fontWeight:"normal",display:"inline",borderRadius:e.spacing(.5)},iconPadding:{paddingLeft:e.spacing(1)+"px"},icon:{width:0,left:"-14px",position:"relative",display:"inline-block",verticalAlign:"middle"}}}))(Ze)),Xe=["classes"],Qe=Object(S.a)((function(e){return{root:{padding:0,width:e.spacing(6),height:e.spacing(3),margin:e.spacing(1),marginRight:e.spacing(4.5)},disabled:{"& + $track":{cursor:"not-allowed !important"}},switchBase:{padding:1,"&$checked":{transform:"translateX(24px)",color:e.palette.primary.contrastText,"& + $track":{opacity:1,border:"none"}},"&$focusVisible $thumb":{color:e.palette.primary.light,border:"6px solid "+e.palette.border}},thumb:{width:"22px",height:"22px"},track:{opacity:1,borderRadius:"12px",boxSizing:"border-box",backgroundColor:e.palette.text.lighter,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(ke.a)(e,Xe);return Object(se.jsx)($e.a,Object(y.a)({color:"primary",focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,disabled:t.disabled,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))})),et=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,refusedList:null,openSet:{},groupFold:{},otherRepository:!1},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentUserInfo)===JSON.stringify(e.currentUserInfo)&&JSON.stringify(this.props.groupList)===JSON.stringify(e.groupList)&&JSON.stringify(this.props.repositoryList)===JSON.stringify(e.repositoryList)&&JSON.stringify(this.state.refusedList)===JSON.stringify(t.refusedList)||(this.changeOpenSet(e,t),!1)}},{key:"changeOpenSet",value:function(e,t){var a=this,i=e.currentUserInfo,r=e.groupList,n=e.repositoryList,s=t.refusedList,o=t.openSet,c=!1;i.id&&(o[D.notificationStatus.mr]=this.isUserNotificationOpen(D.notificationStatus.mr,i.notification),o[D.notificationStatus.email]=this.isUserNotificationOpen(D.notificationStatus.email,i.notification)),s&&(n.length&&n.map((function(e,i){return o[e.id]=a.isTargetOpen(t,e.id),r.length&&0===r.filter(U.id(e.group.id)).length&&(c=!0),!0})),r.length&&r.map((function(e,i){if(o[e.id]=a.isTargetOpen(t,e.id),o[e.id]&&n.length){var r=n.filter(U.group(e.id));if(r.length){var s=r.filter((function(e,t){return!o[e.id]||e.role<L.Role.DEVELOPER}));o[e.id]=!(r.length===s.length)}}return!0}))),this.setState({openSet:o,otherRepository:c})}},{key:"isUserNotificationOpen",value:function(e,t){return!(t>>e-1&1)}},{key:"isTargetOpen",value:function(e,t){return!e.refusedList.filter(U.target(t)).length}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),ee.notificationRefused({}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({pending:!1,refusedList:t.code?[]:t.data})}))}},{key:"reloadUserInfo",value:function(){var e=this;ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})}))}},{key:"updated",value:function(e,t,a){var i=this.props,r=i.dispatchEvent,n=i.intl;this.setState({pending:!1}),t.code?r(te.NewNotification(n.formatMessage({id:"message.error.updateFail"}),2)):(r(te.NewNotification(n.formatMessage({id:e?"message.opened":"message.closed"}),0)),a?this.reloadUserInfo():this.getData())}},{key:"userNotificationSetting",value:function(e){var t=this,a=this.state,i=a.pending,r=a.openSet;if(i||!e)return!1;var n=r[e]=!r[e];this.setState({pending:!0,openSet:r}),ee.userNotificationSetting({offset:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.updated(n,e,!0)}))}},{key:"setGroupOrRepoNotification",value:function(e,t){var a=this,i=this.state,r=i.pending,n=i.openSet;if(r||!t||!e)return!1;var s=n[e]=!n[e];this.setState({pending:!0,openSet:n}),ee.setGroupOrRepoNotification({type:t,target:e,open:s?1:0}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){a.updated(s,e,!1)}))}},{key:"tableFold",value:function(e){var t=this.state.groupFold;t[e]=!t[e],this.setState({groupFold:t})}},{key:"getTableRow",value:function(e,t){var a=this,i=this.props,r=i.classes,n=i.intl,s=this.state,o=s.openSet,c=s.groupFold,l=!!e.group,p=e.role<L.Role.DEVELOPER;return[Object(se.jsxs)(w.a,{variant:"body1",component:"div",children:[l&&Object(se.jsx)("span",{className:t,children:e.group.displayName+"/"}),e.displayName," \xa0\xa0",Object(se.jsx)(Ye,{color:e.role===L.Role.OWNER?"containedInfo":"info",text:n.formatMessage({id:"label.roleID_"+e.role})})]}),Object(se.jsx)(Qe,{checked:!p&&o[e.id],disabled:p,onChange:function(t){return a.setGroupOrRepoNotification(e.id,l?D.notificationRefuseType.repository:D.notificationRefuseType.group)}}),l?"":Object(se.jsx)(Ae,{icon:be.b,onClick:function(t){return a.tableFold(e.id)},className:[r.icon,c[e.id]?r.fold:""].join(" ")})]}},{key:"getRepositoryTable",value:function(){var e=this,t=this.props,a=t.repositoryList,i=t.groupList,r=[["auto","auto","50px"],["label.repository","label.notificationReceiveStatus",""]];return a.map((function(t,a){return 0===i.filter(U.id(t.group.id)).length&&r.push(e.getTableRow(t,"")),!0})),r}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.groupList,n=t.repositoryList,s=t.classes,o=t.intl,c=this.state,l=c.refusedList,p=c.openSet,d=c.groupFold,u=c.otherRepository;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:s.header,children:o.formatMessage({id:"label.notification"})})}),l?Object(se.jsxs)(r.a.Fragment,{children:[a.id&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)(k.a,{container:!0,className:s.content,children:[Object(se.jsxs)(k.a,{item:!0,xs:10,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.subtitle,children:o.formatMessage({id:"message.mergeRequestNotification"})}),Object(se.jsx)(w.a,{variant:"body2",component:"span",className:s.desc,children:o.formatMessage({id:"message.mergeRequestNotificationDesc"})})]}),Object(se.jsx)(k.a,{item:!0,xs:2,className:s.switch,children:Object(se.jsx)(Qe,{checked:p[D.notificationStatus.mr],onChange:function(t){return e.userNotificationSetting(D.notificationStatus.mr)}})})]}),Object(se.jsxs)(k.a,{container:!0,className:s.content,children:[Object(se.jsxs)(k.a,{item:!0,xs:10,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.subtitle,children:o.formatMessage({id:"message.emailNotification"})}),Object(se.jsx)(w.a,{variant:"body2",component:"span",className:s.desc,children:o.formatMessage({id:"message.emailNotificationDesc"})})]}),Object(se.jsx)(k.a,{item:!0,xs:2,className:s.switch,children:Object(se.jsx)(Qe,{checked:p[D.notificationStatus.email],onChange:function(t){return e.userNotificationSetting(D.notificationStatus.email)}})})]})]}),Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:s.title,children:o.formatMessage({id:"label.repository"})}),i.length>0&&n.length>0&&i.map((function(t,a){var i=[["auto","auto","50px"],e.getTableRow(t,"")];return n.filter(U.group(t.id)).map((function(t,a){return i.push(e.getTableRow(t,s.span)),!0})),Object(se.jsx)(k.a,{item:!0,xs:12,className:[s.title,d[t.id]||2===i.length?s.tableFold:""].join(" "),children:Object(se.jsx)(Ne,{data:i})},a)})),u&&Object(se.jsx)(k.a,{item:!0,xs:12,className:[s.title,s.otherRepository].join(" "),children:Object(se.jsx)(Ne,{data:this.getRepositoryTable()})})]}):Object(se.jsx)(k.a,{container:!0,className:s.loading,children:Object(se.jsx)(me.a,{})})]})}}]),a}(r.a.Component),tt=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},content:{paddingBottom:e.spacing(4),marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},subtitle:{marginBottom:"14px"},desc:{fontSize:"14px"},title:{marginBottom:e.spacing(3),"&:last-child":{marginBottom:0},"& table tr th:nth-of-type(2), & table tr td:nth-of-type(2)":{textAlign:"right"}},tableFold:{"& table th":{border:"0px"},"& table tbody":{display:"none"}},switch:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:e.spacing(12.5)},icon:{"& svg":{height:"12px !important",color:e.palette.text.light,transform:"rotate(180deg)",transition:"transform .3s"}},span:{marginLeft:e.spacing(2)},fold:{"& svg":{transform:"rotate(0deg)"}},otherRepository:{"& table thead":{display:"none"},"& table tr td:last-child":{width:"50px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(et))));var at={userList:function(e){return Q.POST("/api/admin/userList",e)},updateUserStatus:function(e){return Q.POST("/api/admin/updateUserStatus",e)},closeUserMFA:function(e){return Q.POST("/api/admin/closeUserMFA",e)},resetPassword:function(e){return Q.POST("/api/admin/resetPassword",e)},checkPassword:function(e){return Q.POST("/api/admin/checkPassword",e)},setAdministrator:function(e){return Q.POST("/api/admin/setAdministrator",e)},addUser:function(e){return Q.POST("/api/admin/addUser",e)},groupList:function(e){return Q.POST("/api/admin/groupList",e)},groupMembers:function(e){return Q.POST("/api/admin/groupMembers",e)},groupAddMember:function(e){return Q.POST("/api/admin/groupAddMember",e)},groupRemoveMember:function(e){return Q.POST("/api/admin/groupRemoveMember",e)},setGroupOwner:function(e){return Q.POST("/api/admin/setGroupOwner",e)},repositoryList:function(e){return Q.POST("/api/admin/repositoryList",e)},repositoryMembers:function(e){return Q.POST("/api/admin/repositoryMembers",e)},repositoryAddMember:function(e){return Q.POST("/api/admin/repositoryAddMember",e)},repositoryRemoveMember:function(e){return Q.POST("/api/admin/repositoryRemoveMember",e)},systemStatus:function(){return Q.GET("/api/admin/systemStatus")},getConfig:function(){return Q.GET("/api/admin/config")},setConfig:function(e){return Q.POST("/api/admin/config",e)}},it=a(45),rt=a(547),nt=a(548),st=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.paletteName,i=e.theme,n=e.title,s=e.icon,o=e.label,c=e.unit,l=e.numbericValue,p=e.to,d=e.intl,u=e.history,m=a&&i.palette[a]?i.palette[a]:{},h=l,g=c;if("fromValue"===a&&(m="number"===typeof l?l>=85?i.palette.error:l>=70?i.palette.warning:i.palette.success:"Running"===l?i.palette.success:i.palette.error),h&&(h=(l===parseFloat(l)?z(l):l)||"NaN"),g){var f=function(e,t){var a,i,r,n,s,o,c=["p","u","m","","k","M","G","T","P"];return t&&e?(e=e.toString().trim(),a=(t=t.toString().trim()).slice(0,1),i=t,(r=c.indexOf(a))>-1?i=t.slice(1):(r=3,a=""),n=e.slice(-1),s=e,(o=c.indexOf(n))>-1?s=e.slice(0,-1):(o=3,n=""),[s,c[o+r-3]+i]):[e,t]}(h,g),b=Object(it.a)(f,2);h=b[0],g=b[1]}return Object(se.jsx)(rt.a,{className:[t.card,p&&t.clickable].join(" "),style:{backgroundColor:m&&m.main},onClick:function(){p&&u.push(p)},children:Object(se.jsx)(nt.a,{className:t.content,style:{paddingBottom:i.spacing(2)},component:"div",children:Object(se.jsxs)(k.a,{container:!0,spacing:0,children:[Object(se.jsxs)(k.a,{item:!0,xs:8,children:[Object(se.jsx)(w.a,{className:t.title,variant:"subtitle1",component:"h1",style:{color:m&&m.contrastText,fontSize:16},children:n||(o?d.formatMessage({id:o}):"-")}),Object(se.jsx)(w.a,{variant:"h5",component:"h1",style:{color:m&&m.contrastText,fontSize:24},children:l||0===l?Object(se.jsxs)(r.a.Fragment,{children:[h," ",g||""]}):Object(se.jsx)(me.a,{size:24,style:{color:m&&m.light}})})]}),Object(se.jsx)(k.a,{item:!0,xs:4,children:Object(se.jsx)(w.a,{className:t.icon,variant:"h4",component:"div",children:Object(se.jsx)(fe.a,{icon:s,style:{color:m&&m.dark,fontSize:32}})})})]})})})}}]),a}(i.Component),ot=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{card:{minWidth:e.spacing(22),height:e.spacing(14)},content:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},title:{marginBottom:e.spacing(2)},icon:{textAlign:"right",marginTop:e.spacing(1)},clickable:{cursor:"pointer"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(st))))),ct=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).mountedFlag=!1,i.state={pending:!0,data:null},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.state)!==JSON.stringify(this.nextState)}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),at.systemStatus().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t&&!t.code&&t.data&&e.setState({pending:!1,data:t.data})}))}},{key:"render",value:function(){var e=this.props.intl,t=this.state.pending;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.statistic"})," "]})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{label:"label.user_pl",paletteName:"info",icon:be.S,numbericValue:t?null:this.state.data.usage.user,to:"/admin/users"})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{label:"label.group_pl",paletteName:"info",icon:be.Y,numbericValue:t?null:this.state.data.usage.group,to:"/admin/groups"})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{label:"label.repository_pl",paletteName:"info",icon:be.X,numbericValue:t?null:this.state.data.usage.repository,to:"/admin/repositories"})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.systemResources"})," "]})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:"CPU",paletteName:"fromValue",icon:be.U,numbericValue:t?null:this.state.data.vm.cpu,unit:"%"})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:"RAM",paletteName:"fromValue",icon:be.U,numbericValue:t?null:this.state.data.vm.memory,unit:"%"})}),!t&&this.state.data.vm.disk.length>0&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.diskUsgae"})," "]})}),!t&&this.state.data.vm.disk.map((function(e,t){return Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:e.name,paletteName:"fromValue",icon:be.O,numbericValue:e.usage,unit:"%"})},t)})),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",e.formatMessage({id:"label.serviceStatus"})," "]})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:"CodeFever",paletteName:"fromValue",icon:be.W,numbericValue:t?null:this.state.data.service.codefever?"Running":"Stopped"})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:"Nginx",paletteName:"fromValue",icon:be.W,numbericValue:t?null:this.state.data.service.nginx?"Running":"Stopped"})}),Object(se.jsx)(k.a,{item:!0,sm:6,md:3,children:Object(se.jsx)(ot,{title:"PHP-FPM",paletteName:"fromValue",icon:be.W,numbericValue:t?null:this.state.data.service.php?"Running":"Stopped"})})]})}}]),a}(r.a.Component),lt=Object(N.b)(Object(S.a)((function(e){return{}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ct)))),pt=a(301),dt=a(552),ut=a(550),mt=a(573),ht=a(553),gt=a(551),ft=a(554),bt=a(572),jt=a(549),Ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.tabs,a=e.onChange,i=e.currentTab,r=e.children,n=e.classes;return Object(se.jsxs)(k.a,{container:!0,className:n.background,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(bt.a,{value:i||0,indicatorColor:"primary",textColor:"primary",onChange:a,children:t.map((function(e,t){return Object(se.jsx)(jt.a,{value:t,label:e},t)}))})}),Object(se.jsx)(k.a,{item:!0,children:r})]})}}]),a}(r.a.Component),vt=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{background:{backgroundColor:e.palette.background.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Ot))))),yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,count:0,list:[],category:0,keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingUser:null,password1:"",password2:"",resetPassword:!1,error:{},settingAdmin:!1,password:"",addUser:!1,name:"",email:"",newPassword:""},i.mountedFlag=!1,i.timeout=null,i.checkPasswordInput=ne.stateValidator(Object(R.a)(i),[{name:"password1",passPattern:/^.{6,50}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:6,n2:50})}]),i.checkEmailInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.{1,15}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:1,n2:15})},{name:"email",passPattern:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.email"})})}]),i.checkEmailResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1030,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1029,errorMessage:i.props.intl.formatMessage({id:"message.error.AddFail"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.category===t.category&&this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.category,i=e.keyword,r=e.sort,n=e.page,s=e.pagesize;this.setState({pending:!0}),at.userList({category:a,keyword:i,sort:r,page:n,pagesize:s}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state.list,n=[];return r.map((function(t){return n.push([Object(se.jsxs)(k.a,{className:a.name,children:[Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.avatar,className:a.icon}),Object(se.jsxs)(k.a,{children:[Object(se.jsx)(w.a,{variant:"h6",component:"div",children:t.name}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t.email})]})]}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t.projects}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t.created}),Object(se.jsxs)(k.a,{className:a.tag,children:[t.mfaEnabled&&Object(se.jsx)(Ye,{color:"success",text:"2FA"}),t.admin&&Object(se.jsx)(Ye,{color:"info",text:i.formatMessage({id:"label.administrator"})}),!t.status&&Object(se.jsx)(Ye,{color:"error",text:i.formatMessage({id:"message.disabled"})})]}),Object(se.jsx)(Ae,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingUser:t})},icon:be.Z})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.repository","label.requestCreated","",""]].concat(n)}},{key:"updateUserStatusConfirm",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;if(this.setState({settingAnchor:null}),!a)return!1;this.props.dispatchEvent(te.addComformation("setting_user_status",{title:t.formatMessage({id:a.status?"message.userStatusDisabled":"message.userStatusEnabled"}),description:t.formatMessage({id:a.status?"message.userStatusDisabled_N":"message.userStatusEnabled_N"},{n:a.name}),reject:function(){return!0},accept:function(){return e.updateUserStatus()}}))}},{key:"updateUserStatus",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;at.updateUserStatus({user:a.id,status:a.status?D.commonStatus.delete:D.commonStatus.normal}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(i){e.props.dispatchEvent(te.cancelComformation()),i.code||(e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:a.status?"message.disabled":"message.enabled"}),0)),e.getData(e.state))}))}},{key:"closeUserMFAConfirm",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;if(this.setState({settingAnchor:null}),!a)return!1;this.props.dispatchEvent(te.addComformation("disable_user_mfa",{title:t.formatMessage({id:"message.closeMFA"}),description:t.formatMessage({id:"message.closeMFA_N"},{n:a.name}),reject:function(){return!0},accept:function(){return e.closeUserMFA()}}))}},{key:"closeUserMFA",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;at.closeUserMFA({user:a.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){e.props.dispatchEvent(te.cancelComformation()),a.code||(e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.closed"}),0)),e.getData(e.state))}))}},{key:"resetPassword",value:function(){var e=this,t=this.props.intl,a=this.state,i=a.settingUser,r=a.password1,n=a.password2;return!!this.checkPasswordInput()&&(n!==r?(this.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.error.inputNotSame"}),2)),!1):void at.resetPassword({user:i.id,password:r}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){e.setState({resetPassword:!1}),e.props.dispatchEvent(te.cancelComformation()),a.code||e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.reseted"}),0))})))}},{key:"checkPassword",value:function(){var e=this,t=this.props.intl,a=this.state.password;at.checkPassword({password:a}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code?e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.error._S_invalid"},{s:t.formatMessage({id:"label.password"})}),2)):e.setAdministrator()}))}},{key:"setAdministrator",value:function(){var e=this,t=this.props.intl,a=this.state.settingUser;this.setState({settingAdmin:!1}),at.setAdministrator({user:a.id,admin:a.admin?0:1}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||(e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.updated"}),0)),e.getData(e.state))}))}},{key:"addUser",value:function(){var e=this,t=this.state,a=t.name,i=t.email;if(!this.checkEmailInput())return!1;at.addUser({name:a,email:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code){if(!e.checkEmailResponse(t.code))return!1}else e.setState({addUser:!1,newPassword:t.data.password}),e.getData(e.state)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state,n=r.pending,s=r.count,o=r.category,c=r.keyword,l=r.sort,p=r.page,d=r.pagesize,u=r.settingAnchor,m=r.settingUser,h=r.resetPassword,g=r.password1,f=r.password2,b=r.error,j=r.settingAdmin,O=r.password,v=r.addUser,y=r.name,x=r.email,C=r.newPassword;return Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsx)(vt,{currentTab:o,onChange:function(t,a){return!n&&e.setState({category:a})},tabs:[i.formatMessage({id:"label.all"}),i.formatMessage({id:"label.enabledMFA"}),i.formatMessage({id:"label.disabledMFA"}),i.formatMessage({id:"label.blocked"})]})}),Object(se.jsx)(k.a,{item:!0,xs:4,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.setState({addUser:!0,name:"",email:"",error:{}})},children:i.formatMessage({id:"label.addUser"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{className:a.search,children:[Object(se.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:i.formatMessage({id:"message.searchByName"}),value:c,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(se.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:i.formatMessage({id:"label.sort"})}),Object(se.jsxs)(E.a,{select:!0,variant:"outlined",value:l,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(se.jsx)(ut.a,{value:"name",children:i.formatMessage({id:"label.name"})}),Object(se.jsx)(ut.a,{value:"email",children:i.formatMessage({id:"label.email"})}),Object(se.jsx)(ut.a,{value:"created",children:i.formatMessage({id:"label.createTime"})})]})]})}),n?Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(me.a,{})}):s?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ne,{data:this.getTableData()})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(se.jsx)(mt.a,{count:Math.ceil(s/d),page:p,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(w.a,{variant:"caption",component:"span",children:i.formatMessage({id:"label.noMore"})})}),m&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)(pt.a,{anchorEl:u,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,open:Boolean(u),onClose:function(t){return e.setState({settingAnchor:null})},children:[Object(se.jsx)(ut.a,{onClick:function(t){return e.updateUserStatusConfirm()},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:m.status?"label.disable":"label.enable"})})}),m.status&&Object(se.jsx)(ut.a,{onClick:function(t){return e.setState({resetPassword:!0,settingAnchor:null})},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"message.resetPassword"})})}),m.status&&m.mfaEnabled&&Object(se.jsx)(ut.a,{onClick:function(t){return e.closeUserMFAConfirm()},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"message.closeMFA"})})}),m.status&&Object(se.jsx)(ut.a,{onClick:function(t){return e.setState({settingAdmin:!0,settingAnchor:null,password:""})},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:m.admin?"message.cancelAdministrator":"message.setAdministrator"})})})]}),Object(se.jsxs)(dt.a,{maxWidth:"sm",open:h,fullWidth:Boolean(!0),onClose:function(t){return e.setState({resetPassword:!1})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:"message.reset_N_Password"},{n:m.name})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.newPassword"})}),value:g,error:!!b.password1,helperText:b.password1,onChange:function(t){return e.setState({password1:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_retype"},{s:i.formatMessage({id:"label.newPassword"})}),value:f,onChange:function(t){return e.setState({password2:t.target.value})}})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({resetPassword:!1})},children:i.formatMessage({id:"label.cancel"})}),"\u2003",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.resetPassword()},children:i.formatMessage({id:"label.ok"})})]})]})})]}),Object(se.jsxs)(dt.a,{maxWidth:"sm",open:j,fullWidth:Boolean(!0),onClose:function(t){return e.setState({settingAdmin:!1})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:m.admin?"message.cancelAdministrator":"message.setAdministrator"})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,type:"password",variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.password"})}),value:O,onChange:function(t){return e.setState({password:t.target.value})}})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({settingAdmin:!1})},children:i.formatMessage({id:"label.cancel"})}),"\u2003",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.checkPassword()},children:i.formatMessage({id:"label.ok"})})]})]})})]})]}),Object(se.jsxs)(dt.a,{maxWidth:"sm",open:v,fullWidth:Boolean(!0),onClose:function(t){return e.setState({addUser:!1})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:"label.addUser"})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.name"})}),value:y,error:!!b.name,helperText:b.name,onChange:function(t){return e.setState({name:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message.error._S_empty"},{s:i.formatMessage({id:"label.email"})}),value:x,error:!!b.email,helperText:b.email,onChange:function(t){return e.setState({email:t.target.value})}})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({addUser:!1})},children:i.formatMessage({id:"label.cancel"})}),"\u2003",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addUser()},children:i.formatMessage({id:"label.ok"})})]})]})})]}),Object(se.jsxs)(dt.a,{maxWidth:"sm",open:!!C,fullWidth:Boolean(!0),onClose:function(t){return e.setState({newPassword:""})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:"message.successAddUser"})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body1",component:"div",children:[i.formatMessage({id:"label.name"}),":\u2003",y,"\u2003"]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body1",component:"div",children:[i.formatMessage({id:"label.email"}),":\u2003",x,"\u2003"]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body1",component:"div",children:[i.formatMessage({id:"label.newPassword"}),":\u2003",C,"\u2003",Object(se.jsx)(Ae,{label:"label.copy",onClick:function(t){return a=C,r=function(){return e.props.dispatchEvent(te.NewNotification(i.formatMessage({id:"message.copied"}),0))},n=t.target.parentElement,void window.setTimeout((function(){var e=window.document.createElement("textarea");e.innerHTML=a,n?n.appendChild(e):window.document.body.appendChild(e),e.select(),document.execCommand("copy"),n?n.removeChild(e):window.document.body.removeChild(e),r&&r()}),0);var a,r,n},icon:be.i})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.setState({newPassword:""})},children:i.formatMessage({id:"label.ok"})})})]})})]})]})}}]),a}(r.a.Component),xt=Object(N.b)(Object(S.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},tag:{"& > *":{marginRight:e.spacing(1)}},page:{display:"flex",justifyContent:"flex-end"}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(yt))),Ct=a(157),St=a(580),Rt=a(96),Nt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentLanguage,a=e.timestamp,i=e.absolute,r=e.relative,n="zh-cn"===t?v.a:Rt.a;a*=a<31536e6?1e3:1;var s=(new Date).getTime();return i||r||(Math.abs(a-s)<6048e5?r=!0:i=!0),Object(se.jsxs)(w.a,{variant:"body2",component:"span",children:[i&&a>0&&Object(Ct.a)(a,"yyyy-MM-dd HH:mm:ss",{locale:n}),r&&!i&&a>0&&Object(St.a)(a,s,{locale:n})]})}}]),a}(i.Component),Mt=Object(N.b)(Object(h.f)(Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{}}))(Nt))),wt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,count:0,list:[],keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingGroup:null,members:[],memberManage:!1,email:"",error:{}},i.mountedFlag=!1,i.timeout=null,i.checkAddResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1031,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.keyword,i=e.sort,r=e.page,n=e.pagesize;this.setState({pending:!0}),at.groupList({keyword:a,sort:i,page:r,pagesize:n}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state.list,n=[];return r.map((function(t){return n.push([Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.icon,className:a.icon}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t.displayName}),Object(se.jsx)(Mt,{timestamp:t.created}),t.status===D.commonStatus.normal?Object(se.jsx)(Ae,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingGroup:t})},icon:be.Z}):Object(se.jsx)(Ye,{color:"error",text:i.formatMessage({id:"message.deleted"})})]),!0})),[["auto","auto","auto","auto"],["","label.group","label.requestCreated",""]].concat(n)}},{key:"openMemberManage",value:function(){var e=this,t=this.state.settingGroup;if(this.setState({memberManage:!0,settingAnchor:null}),!t)return!1;at.groupMembers({group:t.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){return e.setState({members:t.data})}))}},{key:"getMembersTable",value:function(){var e,t=this,a=this.props,i=a.classes,r=a.intl,n=this.state.members,s=[],o=(e={},Object(He.a)(e,L.Role.GUEST,"label.guest"),Object(He.a)(e,L.Role.REPORTER,"label.reporter"),Object(He.a)(e,L.Role.DEVELOPER,"label.developer"),Object(He.a)(e,L.Role.MAINTAINER,"label.maintianer"),Object(He.a)(e,L.Role.OWNER,"label.owner"),e);return n.map((function(e){return s.push([Object(se.jsxs)(k.a,{className:i.name,children:[Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+e.icon,className:i.icon}),Object(se.jsxs)(k.a,{children:[Object(se.jsx)(w.a,{variant:"h6",component:"div",children:e.name}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:e.email})]})]}),Object(se.jsx)(Ye,{color:"info",text:r.formatMessage({id:o[e.role]})}),e.creatorFlag&&Object(se.jsx)(Ye,{color:"success",text:r.formatMessage({id:"label.creator"})}),Object(se.jsx)(Mt,{timestamp:e.joined}),Object(se.jsx)(k.a,{className:i.tag,children:e.deleteFlag||e.status===D.commonStatus.delete?Object(se.jsx)(Ye,{color:"error",text:r.formatMessage({id:"message.deleted"})}):!e.creatorFlag&&e.role<L.Role.OWNER&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(Ae,{label:"message.roleToOwner",onClick:function(a){return t.setRoleConfirm(e)},icon:be.R}),Object(se.jsx)(Ae,{label:"label.delete",onClick:function(a){return t.removeMemberConfirm(e)},icon:be.D})]})})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.role","","label.joinedAt",""]].concat(s)}},{key:"addMember",value:function(){var e=this,t=this.props.intl,a=this.state,i=a.settingGroup,r=a.email;if(!i||!r)return!1;at.groupAddMember({email:r,group:i.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){if(a.code){if(!e.checkAddResponse(a.code))return!1}else e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.Added"}),0)),e.openMemberManage()}))}},{key:"removeMemberConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(te.addComformation("remove_group_member",{title:a.formatMessage({id:"message.memberRemoveConfirm"}),description:a.formatMessage({id:"message.confirmDelete"},{s:" '"+e.name+"'"}),reject:function(){return!0},accept:function(){return t.removeMember(e)}}))}},{key:"removeMember",value:function(e){var t=this,a=this.props,i=a.intl,r=a.dispatchEvent,n=this.state.settingGroup;at.groupRemoveMember({group:n.id,user:e.id}).then(re.withEventdispatcher(r)(re.getJSONData)).then((function(e){r(te.cancelComformation()),e.code?e.code>1024&&r(te.NewNotification(i.formatMessage({id:"message.error.removeFail"}),2)):(r(te.NewNotification(i.formatMessage({id:"message.removed"}),0)),t.openMemberManage())}))}},{key:"setRoleConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(te.addComformation("set_group_member_role",{title:a.formatMessage({id:"message.setGroupOwner_S"},{s:" '"+e.name+"'"}),description:"",reject:function(){return!0},accept:function(){return t.setGroupOwner(e)}}))}},{key:"setGroupOwner",value:function(e){var t=this,a=this.props,i=a.intl,r=a.dispatchEvent,n=this.state.settingGroup;at.setGroupOwner({group:n.id,user:e.id}).then(re.withEventdispatcher(r)(re.getJSONData)).then((function(e){r(te.cancelComformation()),e.code?e.code>1024&&r(te.NewNotification(i.formatMessage({id:"message.error.updateFail"}),2)):(r(te.NewNotification(i.formatMessage({id:"message.updated"}),0)),t.openMemberManage())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state,n=r.pending,s=r.count,o=r.keyword,c=r.sort,l=r.page,p=r.pagesize,d=r.settingAnchor,u=r.memberManage,m=r.email,h=r.error;return Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{className:a.search,children:[Object(se.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:i.formatMessage({id:"message.searchGroup"}),value:o,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(se.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:i.formatMessage({id:"label.sort"})}),Object(se.jsxs)(E.a,{select:!0,variant:"outlined",value:c,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(se.jsx)(ut.a,{value:"name",children:i.formatMessage({id:"label.name"})}),Object(se.jsx)(ut.a,{value:"created",children:i.formatMessage({id:"label.createTime"})})]})]})}),n?Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(me.a,{})}):s?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ne,{data:this.getTableData()})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(se.jsx)(mt.a,{count:Math.ceil(s/p),page:l,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(w.a,{variant:"caption",component:"span",children:i.formatMessage({id:"label.noMore"})})}),Object(se.jsx)(pt.a,{anchorEl:d,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,open:Boolean(d),onClose:function(t){return e.setState({settingAnchor:null})},children:Object(se.jsx)(ut.a,{onClick:function(t){return e.openMemberManage()},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"label.memberManage"})})})}),Object(se.jsxs)(dt.a,{maxWidth:"md",open:u,fullWidth:Boolean(!0),onClose:function(t){return e.setState({memberManage:!1})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:"label.memberManage"})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsxs)(k.a,{item:!0,xs:12,className:a.search,children:[Object(se.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:i.formatMessage({id:"message.plsInputInvitedEmail"}),value:m,error:!!h.email,helperText:h.email,onChange:function(t){return e.setState({email:t.target.value})}}),"\u2003",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addMember()},children:i.formatMessage({id:"label.invite"})})]}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ne,{data:this.getMembersTable()})}),Object(se.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({memberManage:!1})},children:i.formatMessage({id:"label.cancel"})})})]})})]})]})}}]),a}(r.a.Component),kt=Object(N.b)(Object(S.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},page:{display:"flex",justifyContent:"flex-end"},tag:{"& > *":{marginLeft:e.spacing(1)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(wt))),_t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,count:0,list:[],keyword:"",sort:"name",page:1,pagesize:20,settingAnchor:null,settingRepository:null,members:[],memberManage:!1,email:"",error:{}},i.mountedFlag=!1,i.timeout=null,i.checkAddResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1031,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;return this.state.keyword===t.keyword&&this.state.sort===t.sort&&this.state.page===t.page||(this.state.page===t.page&&this.setState({page:1}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return a.getData(t)}),200)),!0}},{key:"getData",value:function(e){var t=this,a=e.keyword,i=e.sort,r=e.page,n=e.pagesize;this.setState({pending:!0}),at.repositoryList({keyword:a,sort:i,page:r,pagesize:n}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),!e.code&&t.setState({count:e.data.count,list:e.data.list})}))}},{key:"getTableData",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state.list,n=[];return r.map((function(t){return n.push([Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+t.icon,className:a.icon}),Object(se.jsxs)(w.a,{variant:"body1",component:"div",children:[t.group.displayName," / ",t.displayName]}),Object(se.jsx)(Mt,{timestamp:t.created}),t.status===D.commonStatus.normal?Object(se.jsx)(Ae,{label:"label.setting",onClick:function(a){return e.setState({settingAnchor:a.target,settingRepository:t})},icon:be.Z}):Object(se.jsx)(Ye,{color:"error",text:i.formatMessage({id:"message.deleted"})})]),!0})),[["auto","auto","auto","auto"],["","label.repository","label.requestCreated",""]].concat(n)}},{key:"openMemberManage",value:function(){var e=this,t=this.state.settingRepository;if(this.setState({memberManage:!0,settingAnchor:null}),!t)return!1;at.repositoryMembers({repository:t.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){return e.setState({members:t.data})}))}},{key:"getMembersTable",value:function(){var e,t=this,a=this.props,i=a.classes,r=a.intl,n=this.state.members,s=[],o=(e={},Object(He.a)(e,L.Role.GUEST,"label.guest"),Object(He.a)(e,L.Role.REPORTER,"label.reporter"),Object(He.a)(e,L.Role.DEVELOPER,"label.developer"),Object(He.a)(e,L.Role.MAINTAINER,"label.maintianer"),Object(He.a)(e,L.Role.OWNER,"label.owner"),e);return n.map((function(e){return s.push([Object(se.jsxs)(k.a,{className:i.name,children:[Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+e.icon,className:i.icon}),Object(se.jsxs)(k.a,{children:[Object(se.jsx)(w.a,{variant:"h6",component:"div",children:e.name}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:e.email})]})]}),Object(se.jsx)(Ye,{color:"info",text:r.formatMessage({id:o[e.role]})}),Object(se.jsxs)(k.a,{children:[e.creatorFlag&&Object(se.jsx)(Ye,{color:"success",text:r.formatMessage({id:"label.creator"})}),e.groupMember&&Object(se.jsx)(Ye,{color:"success",text:r.formatMessage({id:"label.group"})+r.formatMessage({id:"label.member"})})]}),Object(se.jsx)(Mt,{timestamp:e.joined}),Object(se.jsxs)(k.a,{className:i.tag,children:[(e.deleteFlag||e.status===D.commonStatus.delete)&&Object(se.jsx)(Ye,{color:"error",text:r.formatMessage({id:"message.deleted"})}),!e.creatorFlag&&!e.groupMember&&e.role<L.Role.OWNER&&Object(se.jsx)(Ae,{label:"label.delete",onClick:function(a){return t.removeMemberConfirm(e)},icon:be.D})]})]),!0})),[["auto","auto","auto","auto","auto"],["label.name","label.role","","label.joinedAt",""]].concat(s)}},{key:"addMember",value:function(){var e=this,t=this.props.intl,a=this.state,i=a.settingRepository,r=a.email;if(!i||!r)return!1;at.repositoryAddMember({email:r,repository:i.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){if(a.code){if(!e.checkAddResponse(a.code))return!1}else e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.Added"}),0)),e.openMemberManage()}))}},{key:"removeMemberConfirm",value:function(e){var t=this,a=this.props.intl;if(!e)return!1;this.props.dispatchEvent(te.addComformation("remove_repository_member",{title:a.formatMessage({id:"message.memberRemoveConfirm"}),description:a.formatMessage({id:"message.confirmDelete"},{s:" '"+e.name+"'"}),reject:function(){return!0},accept:function(){return t.removeMember(e)}}))}},{key:"removeMember",value:function(e){var t=this,a=this.props,i=a.intl,r=a.dispatchEvent,n=this.state.settingRepository;at.repositoryRemoveMember({repository:n.id,user:e.id}).then(re.withEventdispatcher(r)(re.getJSONData)).then((function(e){r(te.cancelComformation()),e.code?e.code>1024&&r(te.NewNotification(i.formatMessage({id:"message.error.removeFail"}),2)):(r(te.NewNotification(i.formatMessage({id:"message.removed"}),0)),t.openMemberManage())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=this.state,n=r.pending,s=r.count,o=r.keyword,c=r.sort,l=r.page,p=r.pagesize,d=r.settingAnchor,u=r.memberManage,m=r.email,h=r.error;return Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{className:a.search,children:[Object(se.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:i.formatMessage({id:"message.searchRepository"}),value:o,onChange:function(t){return e.setState({keyword:t.target.value})}}),Object(se.jsx)(w.a,{variant:"h6",component:"span",className:a.sortLabel,children:i.formatMessage({id:"label.sort"})}),Object(se.jsxs)(E.a,{select:!0,variant:"outlined",value:c,onChange:function(t){return e.setState({sort:t.target.value})},children:[Object(se.jsx)(ut.a,{value:"name",children:i.formatMessage({id:"label.name"})}),Object(se.jsx)(ut.a,{value:"created",children:i.formatMessage({id:"label.createTime"})})]})]})}),n?Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(me.a,{})}):s?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ne,{data:this.getTableData()})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:a.page,children:Object(se.jsx)(mt.a,{count:Math.ceil(s/p),page:l,onChange:function(t,a){return e.setState({page:a})},shape:"rounded",color:"primary"})})]}):Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",children:Object(se.jsx)(w.a,{variant:"caption",component:"span",children:i.formatMessage({id:"label.noMore"})})}),Object(se.jsx)(pt.a,{anchorEl:d,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,open:Boolean(d),onClose:function(t){return e.setState({settingAnchor:null})},children:Object(se.jsx)(ut.a,{onClick:function(t){return e.openMemberManage()},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"label.memberManage"})})})}),Object(se.jsxs)(dt.a,{maxWidth:"md",open:u,fullWidth:Boolean(!0),onClose:function(t){return e.setState({memberManage:!1})},children:[Object(se.jsx)(ht.a,{children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:i.formatMessage({id:"label.memberManage"})})}),Object(se.jsx)(ft.a,{children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsxs)(k.a,{item:!0,xs:12,className:a.search,children:[Object(se.jsx)(E.a,{className:a.keyword,variant:"outlined",placeholder:i.formatMessage({id:"message.plsInputInvitedEmail"}),value:m,error:!!h.email,helperText:h.email,onChange:function(t){return e.setState({email:t.target.value})}}),"\u2003",Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.addMember()},children:i.formatMessage({id:"label.invite"})})]}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ne,{data:this.getMembersTable()})}),Object(se.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({memberManage:!1})},children:i.formatMessage({id:"label.cancel"})})})]})})]})]})}}]),a}(r.a.Component),Et=Object(N.b)(Object(S.a)((function(e){return{search:{display:"flex"},keyword:{flexGrow:1},sortLabel:{lineHeight:e.spacing(4)+"px",padding:"0px "+e.spacing(2)+"px"},name:{display:"flex",textAlign:"left",alignItems:"center",margin:e.spacing(1)+"px 0px"},icon:{margin:e.spacing(1)},page:{display:"flex",justifyContent:"flex-end"},tag:{"& > *":{marginLeft:e.spacing(1)}}}}))(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(_t))),Tt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).mountedFlag=!1,i.state={allowRegister:!1,host:"",email_from:"",email_name:"",pending:!0,error:{}},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"host",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.url"})})},{name:"host",passPattern:/^http(s)?:\/\/[^/]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.url"})})},{name:"email_name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.name"})})},{name:"email_from",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email_from",passPattern:/^[^@]+@[^@]+\.[^@]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.email"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"getData",value:function(){var e=this;this.setState({pending:!0}),at.getConfig().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.setState({pending:!1,host:t.data.host,allowRegister:t.data.allowRegister,email_from:t.data.email.from,email_name:t.data.email.name})}))}},{key:"updateConfig",value:function(){var e=this;if(!this.checkInput())return!1;var t={host:this.state.host,allowRegister:this.state.allowRegister,email:{name:this.state.email_name,from:this.state.email_from}},a={data:JSON.stringify(t)};this.setState({pending:!0}),at.setConfig(a).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({pending:!1}),t.code||(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.getData())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.setting"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(M.a,{className:a.paper,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.host"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.url"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.host,error:!!this.state.error.host,helperText:this.state.error.host,placeholder:i.formatMessage({id:"label.url"}),onChange:function(t){return e.setState({host:t.target.value})}})})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:" SMTP "})}),Object(se.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.senderName"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email_name,error:!!this.state.error.email_name,helperText:this.state.error.email_name,placeholder:i.formatMessage({id:"label.name"}),onChange:function(t){return e.setState({email_name:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.senderAddress"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.email_from,error:!!this.state.error.email_from,helperText:this.state.error.email_from,placeholder:i.formatMessage({id:"label.email"}),onChange:function(t){return e.setState({email_from:t.target.value})}})})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.register"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,mg:9,lg:8,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:[" ",i.formatMessage({id:"label.allowRegister"})," "]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)($e.a,{checked:this.state.allowRegister,onChange:function(){e.setState({allowRegister:!e.state.allowRegister})},inputProps:{"aria-label":"secondary checkbox"}})})]})})]})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.updateConfig()},children:i.formatMessage({id:"label.save"})})})]})}}]),a}(r.a.Component),At=Object(N.b)(Object(S.a)((function(e){return{paper:{padding:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Tt)))),Dt=a(575),It=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.history,i=e.repositoryInfo,r=e.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:0,alignContent:"center",className:t.container,onClick:function(e){a.push(V(i.group.name,i.name))},children:[Object(se.jsx)(k.a,{item:!0,xs:6,md:4,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,children:i.icon?Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+i.icon}):Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,children:i.name.substr(0,1).toUpperCase()})}),Object(se.jsxs)(k.a,{item:!0,xs:8,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:"text-overflow",style:{lineHeight:"22px",height:"22px"},children:[i.group.displayName+"/",Object(se.jsxs)(w.a,{variant:"subtitle1",component:"span",children:[i.displayName,"\xa0\xa0\xa0\xa0",Object(se.jsx)(Ye,{color:i.role===L.Role.OWNER?"containedInfo":"info",text:r.formatMessage({id:"label.roleID_"+i.role})})]})]}),Object(se.jsx)(w.a,{variant:"caption",component:"div",className:"text-overflow",style:{lineHeight:"20px",height:"18px"},children:i.description})]})]})}),Object(se.jsxs)(k.a,{item:!0,xs:5,md:3,container:!0,alignItems:"center",justifyContent:"space-around",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(se.jsx)(fe.a,{icon:be.o}),"\xa0\xa0",i.forkCount]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(se.jsx)(fe.a,{icon:be.v}),"\xa0\xa0",i.mergeRequestCount.open]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(w.a,{variant:"body2",component:"span",style:{lineHeight:1},children:[Object(se.jsx)(fe.a,{icon:be.s}),"\xa0\xa0",i.members.length]})}),Object(se.jsx)(k.a,{item:!0})]}),Object(se.jsx)(Dt.a,{mdDown:!0,children:Object(se.jsx)(k.a,{item:!0,md:4,container:!0,alignItems:"center",children:i.members.map((function(e,a){return Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+e.icon,className:t.avatar,children:e.name&&e.name[0].toUpperCase()})},a)}))})}),Object(se.jsx)(k.a,{item:!0,xs:1,style:{alignSelf:"center"},children:Object(se.jsx)(Ae,{label:"label.setting",icon:be.A,onClick:function(e){e.stopPropagation(),a.push(V(i.group.name,i.name,"settings"))}})})]})}}]),a}(i.Component),Ft=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{container:{height:e.spacing(9),padding:e.spacing(2)+"px "+e.spacing(3)+"px",border:"1px solid "+e.palette.border,marginBottom:"-1px",borderLeft:"none",borderRight:"none",cursor:"pointer","&:hover":{backgroundColor:e.palette.background.dark}},item:{height:e.spacing(5)},icon:{width:e.spacing(5),height:e.spacing(5)},avatar:{width:e.spacing(4),height:e.spacing(4),marginRight:"-"+e.spacing(1)+"px",border:"1px solid "+e.palette.border}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{}}))(It))))),Pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.imageName,i=e.title,n=e.notice,s=e.children,o=e.pending;return Object(se.jsxs)(k.a,{container:!0,spacing:4,className:t.container,children:[o&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,className:t.loading,children:Object(se.jsx)(me.a,{})})}),!o&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)("img",{className:[t.img,t.alignBlock].join(" "),src:D.HOSTS.STATIC_HOST+"static/"+D.STATIC_VERSION+"/images/"+a})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsx)(w.a,{className:[t.text,t.alignBlock].join(" "),variant:"body2",children:i}),Object(se.jsx)("br",{}),Object(se.jsx)(w.a,{className:[t.text,t.alignBlock,t.lighter].join(" "),variant:"body2",children:n})]}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)("div",{className:t.alignBlock,children:s})})]})]})}}]),a}(i.Component),Lt=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{container:{marginTop:"10vh"},alignBlock:{textAlign:"center",margin:"0 auto",display:"block"},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},img:{width:e.spacing(20)},text:{maxWidth:e.spacing(60)},lighter:{color:e.palette.text.lighter}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Pt))))),Bt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={popoverAnchor:null,popoverTab:0},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.groupConfig,i=e.repositoryList,r=e.intl,n=e.history;return Object(se.jsx)(M.a,{elevation:1,className:t.content,children:a&&a.group&&a.group.id?Object(se.jsxs)(k.a,{container:!0,spacing:3,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:a.group.icon?Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+a.group.icon}):Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,children:a.group.name.substr(0,1).toUpperCase()})}),Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"h6",className:t.text,children:[a.group.displayName," \xa0\xa0"]}),Object(se.jsxs)(w.a,{variant:"caption",component:"div",className:t.subtext,children:[r.formatMessage({id:"label.groupID"}),": ",a.group.id]})]})]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(k.a,{container:!0,spacing:2,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return n.push(V("groups",a.group.name,"repositories","new"))},children:r.formatMessage({id:"label.newRepository"})})})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body2",className:t.iconBar,children:[Object(se.jsx)(fe.a,{icon:be.x}),"\xa0 ",r.formatMessage({id:"label._N_repository"},{n:i.filter(U.group(a.group.id)).length})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.v}),"\xa0",r.formatMessage({id:"label._N_mergeRequest"},{n:i.filter(U.group(a.group.id)).reduce((function(e,t){return e+t.mergeRequestCount.open}),0)})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.s}),"\xa0 ",r.formatMessage({id:"label._N_member"},{n:a.count.member})]})})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(se.jsx)(me.a,{})})})}}]),a}(i.Component),Ut=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{content:{height:e.spacing(15.5),boxSizing:"border-box",borderBottom:"1px solid "+e.palette.border,borderRadius:0},icon:{height:e.spacing(5),width:e.spacing(5)},text:{height:e.spacing(3),lineHeight:e.spacing(3)+"px",overflow:"hidden"},subtext:{paddingTop:e.spacing(.5),height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},iconBar:{height:e.spacing(3),lineHeight:e.spacing(3)+"px"},clonePopvoer:{width:e.spacing(50)+"px"},cloneContent:{padding:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{}}))(Bt))))),Gt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={currentTab:0},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.currentGroupKey,r=t.currentGroupConfig,n=t.repositoryList,s=t.repositoryListPending,o=t.match,c=t.intl,l=n.filter(U.withPermission(L.PermissionCode.REPO_READ)),p=[c.formatMessage({id:"label.all"}),c.formatMessage({id:"label.IJoined"}),c.formatMessage({id:"label.ICreated"})],d=[function(){return!0},U.not(U.creator(a.id)),U.creator(a.id)];if(i)p[0]=c.formatMessage({id:"label.repository"}),l=l.filter(U.group(i));else if(o.params.repositoryID){var u=n.filter(U.id(o.params.repositoryID))[0];l=l.filter(U.fork(o.params.repositoryID)),p[0]=u?c.formatMessage({id:"label.forkFrom_S"},{s:[u.group.displayName,u.displayName].join("/")}):c.formatMessage({id:"label.forkFrom_S"},{s:c.formatMessage({id:"label.unknownRepository"})})}return l=l.filter(d[this.state.currentTab]),Object(se.jsxs)(k.a,{container:!0,spacing:r.group?0:3,children:[r.group&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Ut,{groupConfig:r})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(vt,{tabs:p,currentTab:this.state.currentTab,onChange:function(t,a){e.setState({currentTab:a})},children:!r.group&&!o.params.repositoryID&&Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(r.group?V("groups",r.group.name,"repositories","new"):V("repositories","new"))},children:c.formatMessage({id:"label.newRepository"})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[l.map((function(e,t){return Object(se.jsx)(Ft,{repositoryInfo:e},t)})),0===l.length&&Object(se.jsx)(Lt,{imageName:"repositories-empty.png",title:c.formatMessage({id:"message._S_listEmpty"},{s:c.formatMessage({id:"label.repository"})}),pending:s,notice:c.formatMessage({id:"message.repositoryListEmptyNotice"}),children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(r.group?V("groups",r.group.name,"repositories","new"):V("repositories","new"))},children:c.formatMessage({id:"label.newRepository"})})})]})]})}}]),a}(r.a.Component),Ht=Object(N.b)(Object(S.a)((function(e){return{}}))(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentGroupKey:e.DataStore.currentGroupKey,currentGroupConfig:e.DataStore.currentGroupConfig,repositoryList:e.DataStore.repositoryList,repositoryListPending:e.DataStore.repositoryListPending}}),(function(e,t){return{}}))(Gt))),qt=a(555);var zt={list:function(){return Q.GET("/api/repository/list")},create:function(e){return Q.POST("/api/repository/create",e)},fork:function(e){return Q.POST("/api/repository/fork",e)},config:function(e){return Q.GET("/api/repository/config",null,e)},uploadAvatar:function(e){return Q.POST("/api/repository/uploadAvatar",e)},update:function(e){return Q.POST("/api/repository/update",e)},updateName:function(e){return Q.POST("/api/repository/updateName",e)},defaultBranch:function(e){return Q.POST("/api/repository/defaultBranch",e)},protectedBranchRules:function(e){return Q.GET("/api/repository/protectedBranchRules",null,e)},createProtectedBranchRule:function(e){return Q.POST("/api/repository/createProtectedBranchRule",e)},updateProtectedBranchRule:function(e){return Q.POST("/api/repository/updateProtectedBranchRule",e)},deleteProtectedBranchRule:function(e){return Q.POST("/api/repository/deleteProtectedBranchRule",e)},addMember:function(e){return Q.POST("/api/repository/addMember",e)},changeMemberRole:function(e){return Q.POST("/api/repository/changeMemberRole",e)},removeMember:function(e){return Q.POST("/api/repository/removeMember",e)},changeOwner:function(e){return Q.POST("/api/repository/changeOwner",e)},deleteRepository:function(e){return Q.POST("/api/repository/deleteRepository",e)},activities:function(e){return Q.GET("/api/repository/activities",null,e)},mergeRequests:function(e){return Q.GET("/api/repository/mergeRequests",null,e)},mergeRequestClose:function(e){return Q.POST("/api/repository/mergeRequestClose",e)},mergeRequestCommits:function(e){return Q.GET("/api/repository/mergeRequestCommits",null,e)},mergeRequestReview:function(e){return Q.POST("/api/repository/mergeRequestReview",e)},assignReviewer:function(e){return Q.POST("/api/repository/assignReviewer",e)},deleteReviewer:function(e){return Q.POST("/api/repository/deleteReviewer",e)},object:function(e){return Q.GET("/api/repository/object",null,e)},pathStack:function(e){return Q.GET("/api/repository/pathStack",null,e)},fileContent:function(e){return Q.GET("/api/repository/fileContent",null,e)},commitList:function(e){return Q.GET("/api/repository/commitList",null,e)},commitDetail:function(e){return Q.GET("/api/repository/commitDetail",null,e)},fileChanges:function(e){return Q.GET("/api/repository/fileChanges",null,e)},refListContainSHA:function(e){return Q.GET("/api/repository/refListContainSHA",null,e)},branchList:function(e){return Q.GET("/api/repository/branchList",null,e)},createBranch:function(e){return Q.POST("/api/repository/createBranch",e)},deleteBranch:function(e){return Q.POST("/api/repository/deleteBranch",e)},tagList:function(e){return Q.GET("/api/repository/tagList",null,e)},createTag:function(e){return Q.POST("/api/repository/createTag",e)},deleteTag:function(e){return Q.POST("/api/repository/deleteTag",e)},targetRepository:function(e){return Q.GET("/api/repository/targetRepository",null,e)},lastCommitLog:function(e){return Q.GET("/api/repository/lastCommitLog",null,e)},getBlameInfo:function(e){return Q.GET("/api/repository/blameInfo",null,e)},createMergeRequest:function(e){return Q.POST("/api/repository/createMergeRequest",e)},mergeRequestDetail:function(e){return Q.GET("/api/repository/mergeRequestDetail",null,e)},checkMergeType:function(e){return Q.POST("/api/repository/checkMergeType",e)},mergeBranch:function(e){return Q.POST("/api/repository/mergeBranch",e)},mergeRequestVersionList:function(e){return Q.GET("/api/repository/mergeRequestVersionList",null,e)},relatedMergeRequests:function(e){return Q.GET("/api/repository/relatedMergeRequests",null,e)}},Vt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,name:"",group:"",slug:"",description:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"group",passPattern:/^[0-9a-f]{32}$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:i.props.intl.formatMessage({id:"label.group"})})},{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"slug",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"slug",exceptionCode:1025,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"name",exceptionCode:1026,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(!e.groupListPending&&e.currentUserInfo.id&&(!e.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length&&!e.history.location.pathname.match(/^\/groups\/new/i)))return e.dispatchEvent(te.cancelComformation()),e.dispatchEvent(te.addComformation("default_group_create_confirm",{title:this.props.intl.formatMessage({id:"message.defaultGroupReqiured"}),description:this.props.intl.formatMessage({id:"message.defaultGroupReqiuredDescription"}),reject:function(){e.history.push("/repositories")},accept:function(){e.history.push("/groups/new"),a.props.dispatchEvent(te.cancelComformation())}})),!0;if(!t.group&&e.currentGroupKey)this.setState({group:e.currentGroupKey,pending:!1});else if(!t.group){var i=e.groupList.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO)).filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup());i[0]&&this.setState({group:i[0].id,pending:!1})}return!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"createRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.state.group,name:this.state.slug,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),zt.create(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.createRepositoryFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;zt.list().then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.props.history.push(V(a.group.name,a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=t.groupList,n=t.currentGroupKey,s=t.currentUserInfo,o=r.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO));return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.newRepository"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(M.a,{className:a.paper,children:Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message.error.input_S_placeholder"},{s:i.formatMessage({id:"label.repositoryName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,i=re.makeSlug(a);e.setState({name:a,slug:i,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryURL"})})}),Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsx)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.group,error:!!this.state.error.group,helperText:this.state.error.group,onChange:function(t){return e.setState({group:t.target.value})},disabled:!!n.length,InputProps:{startAdornment:Object(se.jsxs)(qt.a,{position:"start",children:[re.getHost(s),"/"]}),endAdornment:Object(se.jsx)(qt.a,{position:"end",children:"/"})},className:a.svg,children:o.map((function(e){return Object(se.jsx)(ut.a,{value:e.id,children:e.name},e.id)}))})}),Object(se.jsx)(k.a,{item:!0,xs:4,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"label.repositorySlug"}),value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,onChange:function(t){var a=re.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,error:!!this.state.error.description,helperText:this.state.error.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,xs:3,className:a.textRight,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?a.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/repositories")},children:i.formatMessage({id:"label.cancel"})}),Object(se.jsx)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.createRepository()},children:i.formatMessage({id:"label.ok"})})]})]})})})})})]})}}]),a}(r.a.Component),Wt=Object(N.b)(Object(S.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},svg:{"& svg":{right:e.spacing(3)}},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentGroupKey:e.DataStore.currentGroupKey,groupListPending:e.DataStore.groupListPending,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Vt)))),Kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,forkID:"",name:"",group:"",slug:"",description:"",error:{}},i.observed={forkRepositoryInfo:""},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"group",passPattern:/^[0-9a-f]{32}$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:i.props.intl.formatMessage({id:"label.group"})})},{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"slug",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"slug",exceptionCode:1025,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"name",exceptionCode:1026,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){if(!e.groupListPending&&e.currentUserInfo.id&&(!e.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length&&!e.history.location.pathname.match(/^\/groups\/new/i)))return e.dispatchEvent(te.cancelComformation()),e.dispatchEvent(te.addComformation("default_group_create_confirm",{title:this.props.intl.formatMessage({id:"message.defaultGroupReqiured"}),description:this.props.intl.formatMessage({id:"message.defaultGroupReqiuredDescription"}),reject:function(){e.history.push("/repositories")},accept:function(){e.history.push("/groups/new")}})),!0;var a=e.match.params.repositoryID,i=(e.repositoryList||[]).filter(U.id(a))[0];this.observed.forkRepositoryInfo!==JSON.stringify(i)&&(this.observed.forkRepositoryInfo=JSON.stringify(i),i&&this.setState({forkID:a,name:i.displayName,slug:i.name,description:i.description}));var r=e.groupList.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO));if(!t.group){var n=r.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup());n&&n[0]&&n[0].id&&this.setState({group:n[0].id,pending:!1})}return!0}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"forkRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={forkID:this.state.forkID,group:this.state.group,name:this.state.slug,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),zt.fork(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.forkRepositoryFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;zt.list().then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.props.history.push(V(a.group.name,a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=t.match,n=t.repositoryList,s=t.groupList,o=t.currentUserInfo,c=s.filter(U.withPermission(L.PermissionCode.GROUP_CREATE_REPO)),l=r.params.repositoryID,p=n.filter(U.id(l))[0];return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.forkRepository"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(M.a,{className:a.paper,children:Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:7,children:p?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"body1",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.forkFrom_S"},{s:re.getHost(o)+V(p.group.name,p.name)+" ("+p.group.displayName+"/"+p.displayName+")"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,i=re.makeSlug(a);e.setState({name:a,slug:i})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryURL"})})}),Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:this.state.group,error:!!this.state.error.group,helperText:this.state.error.group,onChange:function(t){return e.setState({group:t.target.value})},InputProps:{startAdornment:Object(se.jsxs)(qt.a,{position:"start",children:[re.getHost(o),"/"]}),endAdornment:Object(se.jsx)(qt.a,{position:"end",children:"/"})},className:a.svg,children:c.map((function(e){return Object(se.jsx)(ut.a,{value:e.id,children:e.name},e.id)}))})}),Object(se.jsx)(k.a,{item:!0,xs:4,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,onChange:function(t){var a=re.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.repositoryDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/repositories")},children:[Object(se.jsx)(fe.a,{icon:Be.l}),"\xa0 ",i.formatMessage({id:"label.cancel"})," \xa0"]}),Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.forkRepository()},children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:Be.h}),"\xa0 ",i.formatMessage({id:"label.fork"})," \xa0"]})]})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})})})})})]})}}]),a}(r.a.Component),Jt=Object(N.b)(Object(S.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},svg:{"& svg":{right:e.spacing(3)}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,repositoryList:e.DataStore.repositoryList,groupListPending:e.DataStore.groupListPending,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Kt)))),$t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,name:"",description:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:i.props.intl.formatMessage({id:"label.groupName"})})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"name",exceptionCode:1026,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositoryName"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.props.currentRepositoryConfig.repository&&this.setState({name:this.props.currentRepositoryConfig.repository.displayName,description:this.props.currentRepositoryConfig.repository.description})}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentRepositoryConfig)!==JSON.stringify(this.props.currentRepositoryConfig)&&e.currentRepositoryConfig.repository?(this.setState({name:e.currentRepositoryConfig.repository.displayName,description:e.currentRepositoryConfig.repository.description}),!1):!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"updateRepository",value:function(){var e=this;if(!this.checkInput())return!0;var t={repository:this.props.currentRepositoryConfig.repository.id,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),zt.update(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1}),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadRepositoryData())})),!0}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(te.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.reloadRepositoryData())}},{key:"reloadRepositoryData",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),zt.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:i.header,children:n.formatMessage({id:"menu.general"})})}),a.repository?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.repositoryAvatar"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsx)(Ge,{name:"avatar",variant:"rounded",appendData:{repository:a.repository.id},src:D.HOSTS.STATIC_AVATAR_PREFIX+a.repository.icon,onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:zt.uploadAvatar})}),Object(se.jsx)(k.a,{item:!0,xs:3}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.repositoryName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.repositoryName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,i=re.makeSlug(a);e.setState({name:a,slug:i,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.repositoryDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,xs:3,className:i.textRight,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?i.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,style:{textAlign:"right"},children:[Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/"+a.group.name+"/"+a.repository.name+"/files")},children:["\xa0 ",n.formatMessage({id:"label.cancel"})," \xa0"]}),Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:i.btn,disabled:this.state.pending,onClick:function(t){return e.updateRepository()},children:[this.state.pending&&Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}),"\xa0 ",n.formatMessage({id:"label.update"})," \xa0"]})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:4})]}):Object(se.jsx)(r.a.Fragment,{children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})]})}}]),a}(r.a.Component),Zt=Object(N.b)(Object(S.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))($t)))),Yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,branch:e.currentRepositoryConfig.repository?e.currentRepositoryConfig.repository.defaultBranch:"",rules:null,updateRuleId:null,rule:"",rolePush:L.Role.OWNER,roleMerge:L.Role.OWNER,error:{}},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"rule",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.rule"})})},{name:"rule",passPattern:/^([0-9a-zA-Z/]{1,30}|\/\^?.{1,30}\$?\/[igm]*)$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.rule"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){return!(JSON.stringify(e.currentRepositoryConfig)!==JSON.stringify(this.props.currentRepositoryConfig)&&!this.props.currentRepositoryConfig.repository)||(this.setState({branch:e.currentRepositoryConfig.repository.defaultBranch}),this.getData(e),!1)}},{key:"getData",value:function(e){var t=this,a=e.currentRepositoryConfig;if(!a.repository)return!1;this.setState({pending:!0}),zt.protectedBranchRules({repository:a.repository.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.cancelForm(),e.code||t.setState({pending:!1,rules:e.data})}))}},{key:"getTableData",value:function(){var e=this,t=this.props.classes,a=this.state,i=a.rules,n=a.updateRuleId,s=[];return!!i&&(i.map((function(a,i){return"create"===a||a.id===n?s.push(e.createForm()):s.push([Object(se.jsx)(w.a,{variant:"body1",component:"div",children:a.rule}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:e.getAllowRoler(a.rolePush)}),Object(se.jsx)(w.a,{variant:"body1",component:"div",children:e.getAllowRoler(a.roleMerge)}),Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.modification",icon:be.k,className:t.icon,onClick:function(t){return e.editRule(a)}}),Object(se.jsx)(Ae,{label:"label.delete",className:[t.btn,t.icon].join(" "),onClick:function(t){return e.deleteConfirm(a.id,a.rule)},icon:be.D})]})]),!0})),[["30%","200px","200px","auto"],["label.branchRule","label.allowPush","label.allowMerge","label.operating"]].concat(s))}},{key:"getAllowRoler",value:function(e){var t=this.props.intl;return[t.formatMessage({id:"message.noBodyAllow"}),t.formatMessage({id:"label.owner"}),t.formatMessage({id:"label.maintianer"}),t.formatMessage({id:"label.developer"})].slice(e===L.Role.NOBODY?0:1,L.Role.NOBODY-e+1).join(" + ")}},{key:"createForm",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl;return[Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.rule,placeholder:i.formatMessage({id:"message.inputBranchOrRegexp"}),error:!!this.state.error.rule,helperText:this.state.error.rule,onChange:function(t){return e.setState({rule:t.target.value})}}),Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.rolePush,error:!!this.state.error.rolePush,helperText:this.state.error.rolePush,onChange:function(t){return e.setState({rolePush:t.target.value})},children:[Object(se.jsx)(ut.a,{value:L.Role.OWNER,children:this.getAllowRoler(L.Role.OWNER)}),Object(se.jsx)(ut.a,{value:L.Role.MAINTAINER,children:this.getAllowRoler(L.Role.MAINTAINER)}),Object(se.jsx)(ut.a,{value:L.Role.DEVELOPER,children:this.getAllowRoler(L.Role.DEVELOPER)}),Object(se.jsx)(ut.a,{value:L.Role.NOBODY,children:this.getAllowRoler(L.Role.NOBODY)})]}),Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.roleMerge,error:!!this.state.error.roleMerge,helperText:this.state.error.roleMerge,onChange:function(t){return e.setState({roleMerge:t.target.value})},children:[Object(se.jsx)(ut.a,{value:L.Role.OWNER,children:this.getAllowRoler(L.Role.OWNER)}),Object(se.jsx)(ut.a,{value:L.Role.MAINTAINER,children:this.getAllowRoler(L.Role.MAINTAINER)}),Object(se.jsx)(ut.a,{value:L.Role.NOBODY,children:this.getAllowRoler(L.Role.NOBODY)})]}),Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.ok",icon:be.e,onClick:function(t){return e.createProtectedBranchRule()},className:a.ok}),Object(se.jsx)(Ae,{label:"label.cancel",icon:be.f,onClick:function(t){return e.cancelForm()},className:a.cancel})]})]}},{key:"settingDefaultBranch",value:function(){var e=this,t=this.props.currentRepositoryConfig,a=this.state.branch;if(!t.repository||a===t.repository.defaultBranch)return!1;this.setState({pending:!0}),zt.defaultBranch({repository:t.repository.id,old:t.repository.defaultBranch,branch:a}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadRepositoryData()),e.setState({pending:!1})}))}},{key:"reloadRepositoryData",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),zt.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"cancelForm",value:function(){var e=this.state.rules;e&&e.length&&"create"===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.setState({rules:e,updateRuleId:null,rule:"",rolePush:L.Role.OWNER,roleMerge:L.Role.OWNER,error:{}})}},{key:"createRule",value:function(){var e=this.state.rules;e.length&&"create"===e[e.length-1]||(this.cancelForm(),this.setState({rules:[].concat(Object(T.a)(e),["create"])}))}},{key:"editRule",value:function(e){this.cancelForm(),this.setState({updateRuleId:e.id,rule:e.rule,rolePush:e.rolePush,roleMerge:e.roleMerge})}},{key:"deleteConfirm",value:function(e,t){var a=this,i=this.props.intl;this.cancelForm(),this.props.dispatchEvent(te.addComformation("delete_protected_branch_rule",{title:i.formatMessage({id:"message.confirmDelete"},{s:i.formatMessage({id:"label.rule"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){a.deleteRule(e,t)}}))}},{key:"createProtectedBranchRule",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.intl,r=this.state,n=r.rules,s=r.rule,o=r.rolePush,c=r.roleMerge,l=r.updateRuleId;if(!a.repository||!this.checkInput())return!1;var p=n.filter(U.rule(s));if(p.length>0&&(!l||l&&l!==p[0].id))return this.setState({error:{rule:i.formatMessage({id:"message.error._S_duplicate"},{s:i.formatMessage({id:"label.rule"})})}}),!1;var d={repository:a.repository.id,rule:s,rolePush:o,roleMerge:c};this.setState({pending:!0}),l?zt.updateProtectedBranchRule(Object(y.a)(Object(y.a)({},d),{},{id:l})).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.getData(e.props)),e.setState({pending:!1})})):zt.createProtectedBranchRule(Object(y.a)({},d)).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.createProtectedBrancheRuleFail"}),2)):(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.created"}),0)),e.getData(e.props)),e.setState({pending:!1})}))}},{key:"deleteRule",value:function(e,t){var a=this,i=this.props.currentRepositoryConfig;if(!i.repository||!e||!t)return!1;this.setState({pending:!0}),zt.deleteProtectedBranchRule({repository:i.repository.id,id:e,rule:t}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.error.deleteFail"}),2)):(a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.deleted"}),0)),a.getData(a.props)),a.props.dispatchEvent(te.cancelComformation()),a.setState({pending:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.classes,r=t.intl,n=this.state,s=n.pending,o=n.branch,c=n.rules;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:i.header,children:r.formatMessage({id:"label.branchSetting"})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,className:i.border,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.title,children:r.formatMessage({id:"label.defaultBranch"})}),Object(se.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"message.defaultBranchDescription"})}),Object(se.jsx)(k.a,{className:i.content,children:a.repository&&Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:3,children:Object(se.jsxs)(E.a,{select:!0,fullWidth:!0,variant:"outlined",value:null!==o?o:"0",onChange:function(t){return e.setState({branch:t.target.value})},children:[!a.repository.defaultBranch&&null===o&&Object(se.jsx)(ut.a,{value:0,children:r.formatMessage({id:"message.settingDefaultBranch"})}),a.branches.map((function(e,t){return Object(se.jsx)(ut.a,{value:e.name,children:e.name},t)}))]})}),Object(se.jsx)(k.a,{item:!0,xs:9,children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.settingDefaultBranch()},className:i.btn,disabled:s,children:r.formatMessage({id:"message.settingToDefaultBranch"})})})]})})]}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsxs)(k.a,{item:!0,xs:8,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.title,children:r.formatMessage({id:"label.protectedBranch"})}),Object(se.jsx)(w.a,{variant:"body2",component:"div",children:r.formatMessage({id:"message.protectedBranchDescription"})})]}),Object(se.jsx)(k.a,{item:!0,xs:4,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.createRule()},disabled:s,className:i.create,children:r.formatMessage({id:"message.createProtectedBranchRule"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:i.table,children:null!==c?0!==c.length?Object(se.jsx)(Ne,{data:this.getTableData()}):Object(se.jsx)(Lt,{imageName:"branch-rules-empty.png",title:r.formatMessage({id:"message.protectedBranchRuleEmpty"}),notice:""}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.loading,children:Object(se.jsx)(me.a,{})})})]})})]})}}]),a}(r.a.Component),Xt=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},title:{lineHeight:e.spacing(3)+"px",paddingBottom:e.spacing(2)},content:{paddingTop:e.spacing(3),paddingBottom:e.spacing(5)},create:{marginTop:e.spacing(1)},size:{fontSize:"12px"},btn:{marginLeft:e.spacing(3)},border:{borderBottom:"1px solid "+e.palette.border,marginBottom:e.spacing(3)},icon:{color:e.palette.text.light},ok:{"& svg":{color:e.palette.success.main+" !important"}},cancel:{marginLeft:e.spacing(3),"& svg":{width:"14px !important",height:"14px !important",padding:"2px",color:e.palette.error.main+" !important"}},table:{marginTop:e.spacing(3),"& tbody tr":{"&:hover":{background:e.palette.background.light+" !important"}},"& td":{lineHeight:e.spacing(6)+"px","& > div":{verticalAlign:"middle"}}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Yt)))),Qt=a(558),ea=a(556),ta=a(557),aa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentUserInfo,a=e.item,i=e.classes,r=e.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,className:i.avatar})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:i.userName,children:[a.name," \xa0",t.id===a.id&&Object(se.jsx)(Ye,{text:r.formatMessage({id:"label.yourself"})})]})})]})}}]),a}(r.a.Component),ia=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{avatar:{width:e.spacing(4),height:e.spacing(4)},userName:{lineHeight:e.spacing(4)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(aa))))),ra=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"update",value:function(e){"number"===typeof e?this.props.onUpdate(e):this.props.onRemove(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,i=t.intl,n=t.disabled,s=t.classes;return n=n||a.creatorFlag||a.deleteFlag,Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(xe.a,{children:Object(se.jsx)(ia,{item:a})}),Object(se.jsx)(xe.a,{children:a.email}),Object(se.jsx)(xe.a,{className:s.padding,align:"right",children:Object(se.jsxs)(E.a,{select:!0,disabled:n,className:n?s.disabled:"",value:a.role,onChange:function(t){return t.target.value&&e.update(t.target.value)},align:"right",InputProps:{classes:{underline:s.underline}},children:[Object(se.jsx)(ea.a,{disableSticky:!0,children:i.formatMessage({id:"label.role"})}),Object(se.jsx)(ut.a,{value:L.Role.GUEST,children:i.formatMessage({id:"label.guest"})},L.Role.GUEST),Object(se.jsx)(ut.a,{value:L.Role.REPORTER,children:i.formatMessage({id:"label.reporter"})},L.Role.REPORTER),Object(se.jsx)(ut.a,{value:L.Role.DEVELOPER,children:i.formatMessage({id:"label.developer"})},L.Role.DEVELOPER),Object(se.jsx)(ut.a,{value:L.Role.MAINTAINER,children:i.formatMessage({id:"label.maintianer"})},L.Role.MAINTAINER),Object(se.jsx)(ut.a,{value:L.Role.OWNER,children:i.formatMessage({id:"label.owner"})},L.Role.OWNER),Object(se.jsx)(ta.a,{className:s.split}),Object(se.jsxs)(ut.a,{value:a.id,className:s.deleteMember,children:[Object(se.jsx)(fe.a,{icon:be.D}),"\xa0\xa0",i.formatMessage({id:"label.removeMember"})]},a.id)]})})]})}}]),a}(r.a.Component),na=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{padding:{paddingRight:e.spacing(1)},underline:{"&&&:before":{borderBottom:"none"},"&&:after":{borderBottom:"none"}},backgroundColor:{"&&&:focus":{backgroundColor:"none"}},deleteMember:{color:e.palette.error.main},split:{margin:e.spacing(1)+"px 0px"},disabled:{"& svg":{opacity:0}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(ra))))),sa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"deleteConfirm",value:function(e,t){var a=this,i=this.props,r=i.intl,n=i.removeMember,s=i.isRepository,o=i.currentConfig;this.props.dispatchEvent(te.addComformation("branch_remove",{title:r.formatMessage({id:"message.confirmDelete"},{s:r.formatMessage({id:"label.member"})+" '"+t+"' "}),description:"",reject:function(){return!0},accept:function(){n(s?o.repository.id:o.group.id,e),a.props.dispatchEvent(te.cancelComformation())}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,i=t.classes,n=t.currentConfig,s=t.changeMemberRole,o=t.isRepository,c=t.groupMember,l=t.currentUserInfo,p=c?n.members.filter(U.notDeleted()).filter(U.groupMember()):n.members.filter(U.notDeleted()).filter(U.notGroupMember()),d=n.members.filter(U.id(l.id))[0];return Object(se.jsx)(r.a.Fragment,{children:n?Object(se.jsx)(Qt.a,{component:M.a,children:Object(se.jsxs)(ve.a,{children:[Object(se.jsx)(Ce.a,{children:Object(se.jsxs)(Se.a,{className:i.textMain,children:[Object(se.jsx)(xe.a,{width:"40%",children:c?a.formatMessage({id:"label.groupMember"}):a.formatMessage({id:"label.repositoryMember"})}),Object(se.jsx)(xe.a,{width:"40%",children:a.formatMessage({id:"label.email"})}),Object(se.jsxs)(xe.a,{width:"20%",align:"right",children:[a.formatMessage({id:"label.role"})," ",Object(se.jsx)(he.a,{docID:"2a0c1647fd8b3304ffdc5021462b289b",type:"icon"})]})]})}),Object(se.jsx)(ye.a,{children:p.map((function(t,a){return Object(se.jsx)(Se.a,{className:i.tableRow,children:Object(se.jsx)(na,{item:t,disabled:d.role<L.Role.MAINTAINER,onUpdate:function(e){return s(o?n.repository.id:n.group.id,t.id,e)},onRemove:function(a){return e.deleteConfirm(a,t.name)}},a)},a)}))})]})}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.empty,children:a.formatMessage({id:"message.repositoryEmpty"})})})}}]),a}(r.a.Component),oa=Object(N.b)(Object(S.a)((function(e){return{textMain:{"& a":{color:e.palette.text.main+" !important"}},textLight:{"& a":{color:e.palette.text.light+" !important"}},empty:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},tableRow:{height:e.spacing(7)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(sa)))),ca=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,groupConfig:{},email:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"email",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^.+@[^.]+\..+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.email"})})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1031,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.email===t.email||0!==t.email.length||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addMembers",value:function(){var e=this;if(!this.checkInput())return!0;var t={repository:this.props.currentRepositoryConfig.repository.id,email:this.state.email};return this.setState({pending:!0}),zt.addMember(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.AddFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1,email:""}),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.Added"}),0)),e.reloadRepositoryData())})),!0}},{key:"changeMemberRole",value:function(e,t,a){var i=this,r={repository:e,userID:t,roleID:a};zt.changeMemberRole(r).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?e.code>1024&&i.props.dispatchEvent(te.NewNotification(i.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(i.props.dispatchEvent(te.NewNotification(i.props.intl.formatMessage({id:"message.updated"}),0)),i.reloadRepositoryData())}))}},{key:"removeMember",value:function(e,t){var a=this,i={repository:e,userID:t};zt.removeMember(i).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?e.code>1024&&a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.error.removeFail"}),2)):(a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.removed"}),0)),a.reloadRepositoryData())}))}},{key:"reloadRepositoryData",value:function(){var e=this;zt.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.classes,r=t.intl;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsxs)(k.a,{container:!0,justifyContent:"flex-end",className:i.marginBottom,children:[Object(se.jsx)(k.a,{item:!0,xs:3,children:Object(se.jsx)(E.a,{fullWidth:!0,value:this.state.email,error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.addMembers()},variant:"outlined",placeholder:r.formatMessage({id:"message.plsInputInvitedEmail"})})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.addMembers()},disabled:this.state.pending,children:[this.state.pending?[Object(se.jsx)(me.a,{size:"1rem",color:"inherit"})," "]:"",r.formatMessage({id:"label.inviteMember"})]})})]}),Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.marginBottom,children:a.repository?Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(oa,{currentConfig:a,changeMemberRole:function(t,a,i){return e.changeMemberRole(t,a,i)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!0),groupMember:Boolean(!1)})}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.loading,children:Object(se.jsx)(me.a,{})})}),Object(se.jsx)(k.a,{container:!0,spacing:2,children:a.members?a.members.filter(U.notDeleted()).filter(U.groupMember()).length>0&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(oa,{currentConfig:a,changeMemberRole:function(t,a,i){return e.changeMemberRole(t,a,i)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!0),groupMember:Boolean(!0)})}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.loading,children:Object(se.jsx)(me.a,{})})})]})}}]),a}(r.a.Component),la=Object(N.b)(Object(S.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},marginBottom:{marginBottom:e.spacing(4)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ca))));var pa={list:function(){return Q.GET("/api/group/list")},create:function(e){return Q.POST("/api/group/create",e)},config:function(e){return Q.GET("/api/group/config",null,e)},mergeRequests:function(e){return Q.GET("/api/group/mergeRequests",null,e)},activities:function(e){return Q.GET("/api/group/activities",null,e)},uploadAvatar:function(e){return Q.POST("/api/group/uploadAvatar",e)},update:function(e){return Q.POST("/api/group/update",e)},addMember:function(e){return Q.POST("/api/group/addMember",e)},changeMemberRole:function(e){return Q.POST("/api/group/changeMemberRole",e)},removeMember:function(e){return Q.POST("/api/group/removeMember",e)},changeOwner:function(e){return Q.POST("/api/group/changeOwner",e)},updateName:function(e){return Q.POST("/api/group/updateName",e)},deleteGroup:function(e){return Q.POST("/api/group/deleteGroup",e)}},da=Object(S.a)((function(e){return{root:{minHeight:e.spacing(6)}}}))(ut.a),ua=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,groupConfig:{},slug:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"slug",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"slug",exceptionCode:1025,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.repositorySlug"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return""!==t.slug||!e.currentRepositoryConfig.repository||(this.setState({slug:e.currentRepositoryConfig.repository.name}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1,this.setState({slug:""})}},{key:"deleteRepository",value:function(){var e=this;this.props.dispatchEvent(te.addComformation("repository_delete_repository",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryDeleteRepositoryNotice"}),reject:function(){return!0},accept:function(){e.deleteRepositoryConfirmed(),e.props.dispatchEvent(te.cancelComformation())}}))}},{key:"deleteRepositoryConfirmed",value:function(){var e=this;this.props.dispatchEvent(te.addComformation("repository_delete_repository_confirm",{title:this.props.intl.formatMessage({id:"label.dangerOperationConfirm"}),description:this.props.intl.formatMessage({id:"message.repositoryDeleteRepositoryConfirmNotice"}),reject:function(){return!0},accept:function(){var t={repository:e.props.currentRepositoryConfig.repository.id};e.setState({pending:!0}),zt.deleteRepository(t).then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.deleteFail"}),0)):(e.reloadRepositoryGroupList(),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.deleted"}),0)),e.props.history.push(V("repositories"))),e.props.dispatchEvent(te.cancelComformation()),e.setState({pending:!1})}))}}))}},{key:"changeSlug",value:function(){var e=this;if(!this.checkInput())return!1;this.props.dispatchEvent(te.addComformation("repository_change_slug",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryChangeURLNotice"}),reject:function(){return!0},accept:function(){var t={repository:e.props.currentRepositoryConfig.repository.id,name:e.state.slug};e.setState({pending:!0}),zt.updateName(t).then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.reloadRepositoryData(),e.reloadRepositoryGroupList(),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.props.history.push(V("repositories"))),e.setState({pending:!1}),e.props.dispatchEvent(te.cancelComformation())}))}}))}},{key:"changeOwner",value:function(e){var t=this;this.props.dispatchEvent(te.addComformation("repository_change_creator",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.repositoryChangeCreatorNotice"}),reject:function(){return!0},accept:function(){var a={repository:t.props.currentRepositoryConfig.repository.id,userID:e};t.setState({pending:!0}),zt.changeOwner(a).then(re.withEventdispatcher(t.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?e.code>1024&&t.props.dispatchEvent(te.NewNotification(t.props.intl.formatMessage({id:"message.updateFail"}),2)):(t.reloadRepositoryData(),t.props.dispatchEvent(te.NewNotification(t.props.intl.formatMessage({id:"message.updated"}),0))),t.props.dispatchEvent(te.cancelComformation()),t.setState({pending:!1})}))}}))}},{key:"reloadRepositoryData",value:function(){var e=this;zt.config({rKey:this.props.currentRepositoryConfig.repository.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:t.data})}))}},{key:"reloadRepositoryGroupList",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),pa.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.currentUserInfo,r=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:n.formatMessage({id:"label.repositoryAdvancedSetting"})})}),a.repository?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateCreator"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:a.repository.owner,onChange:function(t){return e.changeOwner(t.target.value)},children:a.members.map((function(e,t){return Object(se.jsx)(da,{value:e.id,children:Object(se.jsx)(ia,{item:e})},t)}))})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:r.section,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateRepositoryURL"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(se.jsxs)(qt.a,{position:"start",children:[re.getHost(i),"/",a.group.name,"/"]})},onChange:function(t){var a=re.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.changeSlug()},disabled:this.state.pending,children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:Be.d}),"\xa0 ",n.formatMessage({id:"label.save"})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:r.section,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.deleteRepository"})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsx)(w.a,{variant:"body2",children:n.formatMessage({id:"message.repositoryDeleteTipFirst"})}),Object(se.jsx)(w.a,{variant:"body2",children:n.formatMessage({id:"message.repositoryDeleteTipSecond"})})]}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(_.a,{variant:"contained",disableElevation:!0,onClick:function(t){return e.deleteRepository()},className:r.warning,disabled:this.state.pending,children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:be.D}),"\xa0 ",n.formatMessage({id:"label.deleteRepository"})]})})]})})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:r.loading,children:Object(se.jsx)(me.a,{})})]})}}]),a}(r.a.Component),ma=Object(N.b)(Object(S.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(4),borderBottom:"1px solid "+e.palette.border},section:{marginTop:e.spacing(3)},paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},warning:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ua)))),ha=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,i=e.history,r=e.groupInfo,n=e.repositoryList,s=e.intl;return Object(se.jsx)(rt.a,{className:t.card,onClick:function(){i.push(V("groups",r.name))},children:Object(se.jsx)(nt.a,{className:t.content,style:{paddingBottom:a.spacing(2)},component:"div",children:Object(se.jsxs)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:r.icon?Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+r.icon}):Object(se.jsx)(Fe.a,{variant:"square",className:t.icon,children:r.name.substr(0,1).toUpperCase()})}),Object(se.jsxs)(k.a,{item:!0,className:t.title,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:"text-overflow",children:r.displayName}),Object(se.jsx)(w.a,{variant:"body1",className:t.ownerMarker,children:Object(se.jsx)(Ye,{color:r.role===L.Role.OWNER?"containedInfo":"info",text:s.formatMessage({id:"label.roleID_"+r.role})})})]})]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Ae,{label:"label.setting",icon:be.A,onClick:function(e){e.stopPropagation(),i.push(V("groups",r.name,"settings"))}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"caption",component:"div",className:[t.description,"text-overflow"].join(" "),children:r.description||"..."})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body2",component:"span",children:[Object(se.jsx)(fe.a,{icon:be.x,className:t.listIcon})," \xa0",n.filter(U.group(r.id)).length," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.s,className:t.listIcon})," \xa0",r.members.length]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(ta.a,{})}),Object(se.jsx)(k.a,{container:!0,item:!0,xs:12,children:r.members.map((function(e,a){return e.icon?Object(se.jsx)(Fe.a,{className:t.avatar,src:D.HOSTS.PGYER_AVATAR_HOST+e.icon},a):Object(se.jsx)(Fe.a,{className:t.avatar,children:e.name.substr(0,1).toUpperCase()},a)}))})]})})})}}]),a}(i.Component),ga=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{card:{cursor:"pointer",transition:e.transitions.create("box-shadow"),boxShadow:e.boxShadow.card,"&:hover":{boxShadow:e.boxShadow.cardHover}},content:{padding:e.spacing(3),paddingBottom:e.spacing(2)},icon:{width:e.spacing(6),height:e.spacing(6)},title:{maxWidth:e.spacing(16),overflow:"hidden"},ownerMarker:{lineHeight:e.spacing(3)+"px"},description:{height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},avatar:{marginRight:e.spacing(1),width:e.spacing(3),height:e.spacing(3)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{}}))(ha))))),fa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={currentTab:0},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.groupList,i=t.currentUserInfo,r=t.classes,n=t.intl,s=[n.formatMessage({id:"label.all"}),n.formatMessage({id:"label.IJoined"}),n.formatMessage({id:"label.ICreated"})],o=[function(){return!0},U.not(U.creator(i.id)),U.creator(i.id)],c=a.filter(U.withPermission(L.PermissionCode.REPO_READ)).filter(o[this.state.currentTab]);return Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(vt,{tabs:s,currentTab:this.state.currentTab,onChange:function(t,a){e.setState({currentTab:a})},children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(V("groups","new"))},children:n.formatMessage({id:"label.newGroup"})})})}),c.map((function(e,t){return Object(se.jsx)(k.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:r.container,children:Object(se.jsx)(ga,{groupInfo:e},t)},t)})),0===c.length&&Object(se.jsx)(Lt,{imageName:"repositories-empty.png",title:n.formatMessage({id:"message._S_listEmpty"},{s:n.formatMessage({id:"label.group"})}),notice:n.formatMessage({id:"message.groupListEmptyNotice"}),children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){e.props.history.push(V("groups","new"))},children:n.formatMessage({id:"label.newGroup"})})})]})}}]),a}(r.a.Component),ba=Object(N.b)(Object(S.a)((function(e){return{container:{minWidth:e.spacing(40)}}}))(Object(l.b)((function(e,t){return{groupList:e.DataStore.groupList,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(fa))),ja=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,personalGroupCreateFlag:!1,groupList:null,groupListChecked:!1,name:"",slug:"",description:"",error:{}},i.observed={forkRepositoryInfo:""},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.groupName"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:i.props.intl.formatMessage({id:"label.groupName"})})},{name:"slug",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.groupURL"})})},{name:"slug",passPattern:/^.{5,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"slug",exceptionCode:1027,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.groupURL"})})},{name:"name",exceptionCode:1028,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.groupName"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.mountedFlag=!0,pa.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.setState({groupList:t.data}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(e.currentUserInfo&&e.currentUserInfo.id&&null!==t.groupList&&!t.groupListChecked)if(t.groupList.filter(U.creator(e.currentUserInfo.id)).filter(U.userGroup()).length)this.setState({groupListChecked:!0,personalGroupCreateFlag:!1,pending:!1});else{var a=e.currentUserInfo.email.split("@");this.setState({groupListChecked:!0,personalGroupCreateFlag:!0,pending:!1,name:a[0],slug:re.makeSlug(a[0])})}return!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"createGroup",value:function(){var e=this;if(!this.checkInput())return!0;var t={name:this.state.slug,type:this.state.personalGroupCreateFlag?B.USER:B.NORMAL,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),pa.create(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code)e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.createGroupFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1});else{var a=t.data;pa.list().then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.setState({pending:!1}),e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.props.history.push(V("groups",a.name)))}))}})),!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=t.currentUserInfo;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:i.formatMessage({id:"label.newGroup"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(M.a,{className:a.paper,children:null!==this.state.groupList?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[this.state.personalGroupCreateFlag&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"body1",component:"div",gutterBottom:!0,children:i.formatMessage({id:"message.createPersonalGroupNotice"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.groupName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message.error.input_S_placeholder"},{s:i.formatMessage({id:"label.groupName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,i=re.makeSlug(a);e.setState({name:a,slug:i,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.groupURL"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:i.formatMessage({id:"message._S_empty"},{s:i.formatMessage({id:"label.path"})}),value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(se.jsxs)(qt.a,{position:"start",children:[re.getHost(r),"/"]})},onChange:function(t){var a=re.makeSlug(t.target.value);e.setState({slug:a})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:i.formatMessage({id:"label.groupDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,xs:3,className:a.textRight,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?a.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/groups")},children:[Object(se.jsx)(fe.a,{icon:Be.l}),"\xa0 ",i.formatMessage({id:"label.cancel"})," \xa0"]}),Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:a.btn,disabled:this.state.pending,onClick:function(t){return e.createGroup()},children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:Be.h}),"\xa0 ",i.formatMessage({id:"label.ok"})," \xa0"]})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:3})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})})})]})}}]),a}(r.a.Component),Oa=Object(N.b)(Object(S.a)((function(e){return{paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ja)))),va=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,name:"",description:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.groupName"})})},{name:"name",passPattern:/^.{5,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.within_N1_to_N2_characters"},{n1:5,n2:30})},{name:"name",passPattern:/^[0-9a-zA-Z\\._-]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_has_illegal_character"},{s:i.props.intl.formatMessage({id:"label.groupName"})})},{name:"description",passPattern:/^.{0,200}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:200})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"name",exceptionCode:1028,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.groupName"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.props.currentGroupConfig.group&&this.setState({name:this.props.currentGroupConfig.group.displayName,description:this.props.currentGroupConfig.group.description})}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.currentGroupConfig)!==JSON.stringify(this.props.currentGroupConfig)&&e.currentGroupConfig.group?(this.setState({name:e.currentGroupConfig.group.displayName,description:e.currentGroupConfig.group.description}),!1):!(this.state.description!==t.description&&t.description.length<201)||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"updateGroup",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.props.currentGroupConfig.group.id,displayName:this.state.name,description:this.state.description};return this.setState({pending:!0}),pa.update(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1}),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.reloadGroupData())})),!0}},{key:"avatarUploaded",value:function(e){e.code||(this.props.dispatchEvent(te.NewNotification(this.props.intl.formatMessage({id:"message.updated"}),0)),this.reloadGroupData())}},{key:"reloadGroupData",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),pa.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})})),pa.config({gKey:this.props.currentGroupConfig.group.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,i=t.classes,r=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:i.header,children:r.formatMessage({id:"menu.general"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:a.group?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:r.formatMessage({id:"label.groupAvatar"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsx)(Ge,{name:"avatar",variant:"rounded",appendData:{group:a.group.id},src:D.HOSTS.STATIC_AVATAR_PREFIX+a.group.icon,onUpdate:function(t){return e.avatarUploaded(t)},dataProvider:pa.uploadAvatar})}),Object(se.jsx)(k.a,{item:!0,xs:3}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.groupName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:r.formatMessage({id:"message.error._S_empty"},{s:r.formatMessage({id:"label.groupName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){var a=t.target.value,i=re.makeSlug(a);e.setState({name:a,slug:i,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:r.formatMessage({id:"label.groupDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,error:!!this.state.error.description,helperText:this.state.error.description,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,xs:3,className:i.textRight,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>200?i.outRange:"",children:[this.state.description.length,"/200"]})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,style:{textAlign:"right"},children:[Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,className:i.btn,disabled:this.state.pending,onClick:function(t){return e.updateGroup()},children:[this.state.pending&&Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}),"\xa0 ",r.formatMessage({id:"label.update"})," \xa0"]}),Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:i.btn,disabled:this.state.pending,onClick:function(t){return e.props.history.push("/groups")},children:["\xa0 ",r.formatMessage({id:"label.cancel"})," \xa0"]})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:3})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})})]})}}]),a}(r.a.Component),ya=Object(N.b)(Object(S.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(1),borderBottom:"1px solid "+e.palette.border},paper:{padding:e.spacing(2)},btn:{marginLeft:e.spacing(2)},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(va)))),xa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,groupConfig:{},email:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"email",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",passPattern:/^.+@[^.]+\..+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.email"})})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"email",exceptionCode:1031,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.email"})})},{name:"email",exceptionCode:1032,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotAddCreatorAsMember"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.email===t.email||0!==t.email.length||(this.setState({error:{}}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"addMembers",value:function(){var e=this;if(!this.checkInput())return!0;var t={group:this.props.currentGroupConfig.group.id,email:this.state.email};return this.setState({pending:!0}),pa.addMember(t).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?t.code>1024&&(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.AddFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(e.setState({pending:!1,email:""}),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.Added"}),0)),e.reloadGroupData())})),!0}},{key:"changeMemberRole",value:function(e,t,a){var i=this,r={group:e,userID:t,roleID:a};pa.changeMemberRole(r).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?e.code>1024&&i.props.dispatchEvent(te.NewNotification(i.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(i.props.dispatchEvent(te.NewNotification(i.props.intl.formatMessage({id:"message.updated"}),0)),i.reloadGroupData())}))}},{key:"removeMember",value:function(e,t){var a=this,i={group:e,userID:t};pa.removeMember(i).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?e.code>1024&&a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.error.removeFail"}),2)):(a.props.dispatchEvent(te.NewNotification(a.props.intl.formatMessage({id:"message.removed"}),0)),a.reloadGroupData())}))}},{key:"reloadGroupData",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),pa.config({gKey:this.props.currentGroupConfig.group.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,i=t.classes,r=t.intl;return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsxs)(k.a,{container:!0,justifyContent:"flex-end",className:i.marginBottom,children:[Object(se.jsx)(k.a,{item:!0,xs:3,children:Object(se.jsx)(E.a,{fullWidth:!0,value:this.state.email,error:!!this.state.error.email,helperText:this.state.error.email,onChange:function(t){return e.setState({email:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.addMembers()},variant:"outlined",placeholder:r.formatMessage({id:"message.plsInputInvitedEmail"})})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.addMembers()},disabled:this.state.pending,children:[this.state.pending?[Object(se.jsx)(me.a,{size:"1rem",color:"inherit"})," "]:"",r.formatMessage({id:"label.inviteMember"})]})})]}),Object(se.jsx)(k.a,{container:!0,spacing:2,children:a.group?Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(oa,{currentConfig:a,changeMemberRole:function(t,a,i){return e.changeMemberRole(t,a,i)},removeMember:function(t,a){return e.removeMember(t,a)},isRepository:Boolean(!1),groupMember:Boolean(!0)})}):Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})]})}}]),a}(r.a.Component),Ca=Object(N.b)(Object(S.a)((function(e){return{btn:{marginRight:e.spacing(2)},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},marginBottom:{marginBottom:e.spacing(4)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(xa)))),Sa=Object(S.a)((function(e){return{root:{minHeight:e.spacing(6)}}}))(ut.a),Ra=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,slug:"",error:{}},i.mountedFlag=!1,i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"slug",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.groupSlug"})})},{name:"slug",passPattern:/^[0-9a-zA-z_]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error.requireCombinationOfCharactersNumbersAndUnderscore"})},{name:"slug",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"slug",exceptionCode:1027,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.groupURL"})})},{exceptionCode:1033,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotDeleteUserGroup"})},{exceptionCode:1034,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotDeleteNonEmptyGroup"})},{exceptionCode:1035,errorMessage:i.props.intl.formatMessage({id:"message.error.canNotChangeOwnerOfUserGroup"})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0}},{key:"shouldComponentUpdate",value:function(e,t){return""!==t.slug||!e.currentGroupConfig.group||(this.setState({slug:e.currentGroupConfig.group.name}),!1)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1,this.setState({slug:""})}},{key:"deleteGroup",value:function(){var e=this;this.props.dispatchEvent(te.addComformation("group_delete_group",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupDeleteRepositoryNotice"}),reject:function(){return!0},accept:function(){e.deleteGroupConfirmed(),e.props.dispatchEvent(te.cancelComformation())}}))}},{key:"deleteGroupConfirmed",value:function(){var e=this;this.props.dispatchEvent(te.addComformation("group_delete_group_confirm",{title:this.props.intl.formatMessage({id:"label.dangerOperationConfirm"}),description:this.props.intl.formatMessage({id:"message.groupDeleteRepositoryConfirmNotice"}),reject:function(){return!0},accept:function(){var t={group:e.props.currentGroupConfig.group.id};e.setState({pending:!0}),pa.deleteGroup(t).then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.deleteFail"}),2)):(e.reloadRepositoryGroupList(),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.deleted"}),0)),e.props.history.push(V("groups"))),e.setState({pending:!1}),e.props.dispatchEvent(te.cancelComformation())}))}}))}},{key:"changeSlug",value:function(){var e=this;if(!this.checkInput())return!1;this.props.dispatchEvent(te.addComformation("group_change_slug",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupChangeURLNotice"}),reject:function(){return!0},accept:function(){var t={group:e.props.currentGroupConfig.group.id,name:e.state.slug};e.setState({pending:!0}),pa.updateName(t).then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)&&t.code>1024&&e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(e.reloadGroupData(),e.reloadRepositoryGroupList(),e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.updated"}),0)),e.props.history.push(V("groups"))),e.setState({pending:!1}),e.props.dispatchEvent(te.cancelComformation())}))}}))}},{key:"changeOwner",value:function(e){var t=this;this.props.dispatchEvent(te.addComformation("group_change_creator",{title:this.props.intl.formatMessage({id:"label.dangerOperation"}),description:this.props.intl.formatMessage({id:"message.groupChangeCreatorNotice"}),reject:function(){return!0},accept:function(){var a={group:t.props.currentGroupConfig.group.id,userID:e};t.setState({pending:!0}),pa.changeOwner(a).then(re.withEventdispatcher(t.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?t.checkResponse(e.code)&&e.code>1024&&t.props.dispatchEvent(te.NewNotification(t.props.intl.formatMessage({id:"message.error.updateFail"}),2)):(t.reloadGroupData(),t.props.dispatchEvent(te.NewNotification(t.props.intl.formatMessage({id:"message.updated"}),0))),t.props.dispatchEvent(te.cancelComformation()),t.setState({pending:!1})}))}}))}},{key:"reloadGroupData",value:function(){var e=this;pa.config({gKey:this.props.currentGroupConfig.group.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentGroupConfig.update",data:t.data})}))}},{key:"reloadRepositoryGroupList",value:function(){var e=this;zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data})})),pa.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.groupList.update",data:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentGroupConfig,i=t.currentUserInfo,r=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,className:r.header,children:n.formatMessage({id:"label.groupAdvancedSetting"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:a.group?Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateCreator"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:a.group.owner,onChange:function(t){return e.changeOwner(t.target.value)},children:a.members.map((function(e,t){return Object(se.jsx)(Sa,{value:e.id,children:Object(se.jsx)(ia,{item:e})},t)}))})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:r.section,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.updateGroupURL"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.slug,error:!!this.state.error.slug,helperText:this.state.error.slug,InputProps:{startAdornment:Object(se.jsxs)(qt.a,{position:"start",children:[re.getHost(i),"/"]})},onChange:function(t){var a=re.makeSlug(t.target.value);e.setState({slug:a,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(_.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:function(t){return e.changeSlug()},disabled:this.state.pending,children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:Be.d}),"\xa0 ",n.formatMessage({id:"label.save"})]})})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:r.section,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:n.formatMessage({id:"label.deleteGroup"})})}),Object(se.jsx)(k.a,{item:!0,xs:7,children:Object(se.jsxs)(_.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:function(t){return e.deleteGroup()},className:r.warning,disabled:this.state.pending,children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}):Object(se.jsx)(fe.a,{icon:Be.k}),"\xa0 ",n.formatMessage({id:"label.deleteGroup"})]})})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(me.a,{})})})})]})}}]),a}(r.a.Component),Na=Object(N.b)(Object(S.a)((function(e){return{header:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(1),borderBottom:"1px solid "+e.palette.border},section:{marginTop:e.spacing(3)},paper:{padding:e.spacing(2)},btn:{marginRight:e.spacing(2)},warning:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentGroupConfig:e.DataStore.currentGroupConfig,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ra))));var Ma,wa={parser:function(e){var t=e.item.type,a=[],i={};if(e.currentGroupConfig.group?a=e.currentGroupConfig.members:e.currentRepositoryConfig.repository&&(a=e.currentRepositoryConfig.members),i=a.filter(U.id(e.item.creator))[0],e.relatedGroup=e.groupList.filter(U.id(e.item.group))[0],e.relatedRepository=e.repositoryList.filter(U.id(e.item.repository))[0],i||(i={icon:null,id:e.item.creator,name:"userID_"+e.item.creator.slice(0,8)}),e.relatedGroup||(e.relatedGroup={id:e.item.group,displayName:"groupID_"+e.item.group.slice(0,8),name:null}),e.relatedRepository||(e.relatedRepository={id:e.item.repository,displayName:"repositoryID_"+e.item.repository.slice(0,8),name:null,group:e.relatedGroup}),513===t){var n=e.relatedGroup.name?Object(se.jsx)(o.b,{to:V("groups",e.relatedGroup.name),children:e.relatedGroup.displayName}):e.item.content.name;return{user:i,action:e.formatter({id:"message.activity.createdGroup"}),detail:n}}if(514===t)return{user:i,action:e.formatter({id:"message.activity.updateGroup_S_Avator"},{s:e.relatedGroup.displayName}),detail:""};if(515===t){var s=Object(se.jsx)(r.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:e.item.content.from,s2:e.item.content.to})});return{user:i,action:e.formatter({id:"message.activity.updateGroup_S_Name"},{s:e.relatedGroup.displayName}),detail:s}}if(516===t)return{user:i,action:e.formatter({id:"message.activity.updateGroup_S_Description"},{s:e.relatedGroup.displayName}),detail:""};if(517===t){var c=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.addGroup_S_Memeber"},{s:e.relatedGroup.displayName}),detail:c?c.name+" <"+c.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(518===t){var l=a.filter(U.id(e.item.content.uid))[0],p=e.formatter({id:"label.roleID_"+e.item.content.to});return{user:i,action:e.formatter({id:"message.activity.changeGroup_S_MemebrRole"},{s:e.relatedGroup.displayName}),detail:(l?l.name+" <"+l.email+">":e.item.content.name+" <"+e.item.content.email+">")+": "+p}}if(519===t){var d=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.removeGroup_S_Memebr"},{s:e.relatedGroup.displayName}),detail:d?d.name+" <"+d.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(520===t){var u=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.setGroup_S_Creator"},{s:e.relatedGroup.displayName}),detail:u?u.name+" <"+u.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(521===t){var m=Object(se.jsx)(r.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:V("groups",e.item.content.from),s2:V("groups",e.item.content.to)})});return{user:i,action:e.formatter({id:"message.activity.setGroup_S_URL"},{s:e.relatedGroup.displayName}),detail:m}}if(769===t){var h=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name),children:[e.relatedGroup.displayName,"/",e.relatedRepository.displayName]}):e.item.content.name;return{user:i,action:e.formatter({id:"message.activity.createdRepository"}),detail:h}}if(770===t){var g=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name),children:[e.relatedGroup.displayName,"/",e.relatedRepository.displayName]}):e.item.content.name,f=Object(se.jsxs)(r.a.Fragment,{children:[g," ",e.formatter({id:"label.forkFrom_S"},{s:e.item.content.sourceName})]});return{user:i,action:e.formatter({id:"message.activity.forkRepository"}),detail:f}}if(771===t)return{user:i,action:e.formatter({id:"message.activity.updateRepository_S_Avator"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:""};if(772===t){var b=Object(se.jsx)(r.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:e.item.content.from,s2:e.item.content.to})});return{user:i,action:e.formatter({id:"message.activity.updateRepository_S_Name"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:b}}if(773===t)return{user:i,action:e.formatter({id:"message.activity.updateRepository_S_Description"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:""};if(774===t){var j=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.addRepository_S_Memeber"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:j?j.name+" <"+j.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(775===t){var O=a.filter(U.id(e.item.content.uid))[0],v=e.formatter({id:"label.roleID_"+e.item.content.to});return{user:i,action:e.formatter({id:"message.activity.changeRepository_S_MemebrRole"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:(O?O.name+" <"+O.email+">":e.item.content.name+" <"+e.item.content.email+">")+": "+v}}if(776===t){var y=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.removeRepository_S_Memebr"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:y?y.name+" <"+y.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(777===t){var x=a.filter(U.id(e.item.content.uid))[0];return{user:i,action:e.formatter({id:"message.activity.setRepository_S_Creator"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:x?x.name+" <"+x.email+">":e.item.content.name+" <"+e.item.content.email+">"}}if(778===t){var C=Object(se.jsx)(r.a.Fragment,{children:e.formatter({id:"label.updateFrom_S1_To_S2"},{s1:V(e.relatedGroup.name,e.item.content.from),s2:V(e.relatedGroup.name,e.item.content.to)})});return{user:i,action:e.formatter({id:"message.activity.setRepository_S_URL"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:C}}if(779===t)return{user:i,action:e.formatter({id:"message.activity.deleteRepository"}),detail:e.item.content.name};if(1025===t){var S=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,R=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.from.slice(0,8)),children:e.item.content.from.slice(0,8)}):e.item.content.from.slice(0,8),N=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),M=Object(se.jsxs)(r.a.Fragment,{children:[R," .. ",N," -> ",S]});return{user:i,action:e.formatter({id:"message.activity.pushTo_S_Branch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:M}}if(1026===t){var w=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,k=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),_=Object(se.jsxs)(r.a.Fragment,{children:[k," -> ",w]});return{user:i,action:e.formatter({id:"message.activity.pushTo_S_NewBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:_}}if(1027===t){var E=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.name),""),children:e.item.content.name}):e.item.content.name,T=Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"label.newBranch"})," ",E]});return{user:i,action:e.formatter({id:"message.activity.created_S_NewBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:T}}if(1028===t)return{user:i,action:e.formatter({id:"message.activity.delete_S_Branch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"label.deleteBranch"})+" "+e.item.content.name};if(1029===t)return{user:i,action:e.formatter({id:"message.activity.update_S_DefaultBranch"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"message.updateDefaultBranch"}),"\xa0",e.item.content.from&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.from)),children:e.item.content.from})," ->\xa0"]}),Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",encodeURIComponent(e.item.content.to)),children:e.item.content.to})]})};if(1030===t)return{user:i,action:e.formatter({id:"message.activity.created_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"message.createProtectedBranchRule"}),"\xa0",Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"settings/branch"),children:e.item.content.name})]})};if(1031===t)return{user:i,action:e.formatter({id:"message.activity.update_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"message.updateProtectedBranchRule"}),"\xa0",Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"settings/branch"),children:e.item.content.name})]})};if(1032===t)return{user:i,action:e.formatter({id:"message.activity.delete_S_ProtectedBranchRule"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"message.deleteProtectedBranchRule"}),"\xa0",e.item.content.name]})};if(1281===t){var A=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,D=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.from.slice(0,8)),children:e.item.content.from.slice(0,8)}):e.item.content.from.slice(0,8),I=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),F=Object(se.jsxs)(r.a.Fragment,{children:[D," .. ",I," -> ",A]});return{user:i,action:e.formatter({id:"message.activity.pushTo_S_Tag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:F}}if(1282===t){var P=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name),children:e.item.content.name}):e.item.content.name,L=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"commit",e.item.content.to.slice(0,8)),children:e.item.content.to.slice(0,8)}):e.item.content.to.slice(0,8),B=Object(se.jsxs)(r.a.Fragment,{children:[L," -> ",P]});return{user:i,action:e.formatter({id:"message.activity.pushTo_S_NewTag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:B}}if(1283===t){var G=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsx)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"files",e.item.content.name,""),children:e.item.content.name}):e.item.content.name,H=Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"label.newTag"})," ",G]});return{user:i,action:e.formatter({id:"message.activity.created_S_NewTag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:H}}if(1284===t)return{user:i,action:e.formatter({id:"message.activity.delete_S_Tag"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"label.deleteTag"})+" "+e.item.content.name};if(1793===t){var q=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,z=Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"label.openMergeRequest"})," ",q]});return{user:i,action:e.formatter({id:"message.activity.open_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:z}}if(1794===t){var W=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,K=Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"label.closeMergeRequest"})," ",W]});return{user:i,action:e.formatter({id:"message.activity.close_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:K}}if(1795===t){var J=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id,$=Object(se.jsxs)(r.a.Fragment,{children:[e.formatter({id:"label.mergeRequest"})," ",J]});return{user:i,action:e.formatter({id:"message.activity.merge_S_MergeRquest"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:$}}if(1796===t){var Z=a.filter(U.id(e.item.content.reviewer))[0],Y=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:i,action:e.formatter({id:"message.activity.assign_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.assign_N_M_Reviewer"},{n:Z.name,m:Y})}}if(1797===t){var X=a.filter(U.id(e.item.content.reviewer))[0],Q=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:i,action:e.formatter({id:"message.activity.delete_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.delete_M_N_Reviewer"},{n:X.name,m:Q})}}if(1798===t){var ee=e.relatedRepository.name&&e.relatedGroup.name?Object(se.jsxs)(o.b,{to:V(e.relatedGroup.name,e.relatedRepository.name,"mergerequests",e.item.content.id),children:["!",e.item.content.id]}):e.item.content.id;return{user:i,action:e.formatter({id:"message.activity.review_S_Reviewer"},{s:e.relatedGroup.displayName+"/"+e.relatedRepository.displayName}),detail:e.formatter({id:"message.review_M_Reviewer"},{m:ee})}}return{user:i,action:"",detail:""}}},ka=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.groupList,i=e.currentGroupConfig,r=e.repositoryList,n=e.currentRepositoryConfig,s=e.intl,o=e.classes,c={item:t,groupList:a,repositoryList:r,currentGroupConfig:i,currentRepositoryConfig:n,formatter:s.formatMessage},l=wa.parser(c);return Object(se.jsx)(k.a,{item:!0,xs:12,className:o.item,children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+l.user.icon,className:o.avatar})}),Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"body1",className:o.action,children:[" ",l.user.name," ",l.action]}),Object(se.jsxs)(w.a,{variant:"body2",className:o.paddingRight2,children:[" ",l.detail," "]})]})]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(w.a,{variant:"body2",children:[s.formatMessage({id:"label.editIn"}),":\xa0",Object(se.jsx)(Mt,{timestamp:t.time})]})})]})})}}]),a}(r.a.Component),_a=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{avatar:{width:e.spacing(3),height:e.spacing(3)},item:{border:"1px solid "+e.palette.border,marginBottom:"-1px",padding:e.spacing(2)+"px "+e.spacing(3)+"px","&:first-child":{borderRadius:"4px 4px 0px 0px"},"&:last-child":{borderRadius:"0px 0px 4px 4px"}},action:{lineHeight:e.spacing(3)+"px"},paddingRight2:{paddingRight:e.spacing(2),lineHeight:e.spacing(3)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentRepositoryConfig:e.DataStore.currentRepositoryConfig,groupList:e.DataStore.groupList,currentGroupConfig:e.DataStore.currentGroupConfig}}),(function(e,t){return{}}))(ka))))),Ea=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={activityList:[],page:1,listFinshed:!1,pending:!0,category:0,keyword:""},i.observed={keyword:""},i.mountedFlag=!1,i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({page:1,listFinshed:!1,pending:!0,activityList:[]}),this.getData(this.props,this.state),this.mountedFlag=!0}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentGroupConfig)!==JSON.stringify(e.currentGroupConfig)||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.setState({page:1,listFinshed:!1,pending:!0,activityList:[]}),this.getData(e,t),!1):this.state.page===t.page||t.pending?this.state.category===t.category||(this.setState({pending:!0,page:1,activityList:[]}),this.getData(e,t),!1):(this.setState({pending:!0}),this.getData(e,t),!1)}},{key:"getData",value:function(e,t){var a=this;this.observed.keyword=t.keyword,e.currentRepositoryConfig.repository?zt.activities({repository:e.currentRepositoryKey,category:t.category,keyword:t.keyword,page:t.page,pagesize:20}).then(re.withEventdispatcher(e.dispatchEvent)(re.getJSONData)).then((function(e){if(!e.code){var t=e.data.length<20;a.setState({pending:!1,activityList:[].concat(Object(T.a)(a.state.activityList),Object(T.a)(e.data)),listFinshed:t})}})):e.currentGroupConfig.group&&pa.activities({group:e.currentGroupKey,category:t.category,keyword:t.keyword,page:t.page,pagesize:20}).then(re.withEventdispatcher(e.dispatchEvent)(re.getJSONData)).then((function(e){if(!e.code){var t=e.data.length<20;a.setState({pending:!1,activityList:[].concat(Object(T.a)(a.state.activityList),Object(T.a)(e.data)),listFinshed:t})}}))}},{key:"searchActivity",value:function(){this.observed.keyword!==this.state.keyword&&(this.setState({activityList:[]}),this.getData(this.props,this.state))}},{key:"render",value:function(){var e=this,t=this.props,a=t.intl,i=t.classes,r=D.activityCategory,n=[];return n[r.all]=a.formatMessage({id:"label.all"}),n[r.commit]=a.formatMessage({id:"label.commitActivity"}),n[r.mergeRequest]=a.formatMessage({id:"label.mergeRequestActivity"}),n[r.member]=a.formatMessage({id:"label.memberActivity"}),Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(vt,{tabs:n,currentTab:this.state.category,onChange:function(t,a){return e.setState({category:a})},children:Object(se.jsx)(E.a,{variant:"outlined",className:i.input,placeholder:"",defaultValue:this.state.keyword,onChange:function(t){return e.setState({keyword:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.searchActivity()},InputProps:{startAdornment:Object(se.jsx)(qt.a,{position:"start",children:Object(se.jsx)(fe.a,{icon:be.z})})}})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsx)(k.a,{container:!0,children:this.state.activityList.length>0&&this.state.activityList.map((function(e,t){return Object(se.jsx)(_a,{item:e},t)}))}),Object(se.jsx)(k.a,{container:!0,justifyContent:"center",className:i.marginTop3,children:Object(se.jsx)(k.a,{item:!0,children:this.state.pending?Object(se.jsx)(me.a,{}):this.state.listFinshed?Object(se.jsx)(_.a,{size:"small",disabled:!0,children:a.formatMessage({id:"label.noMore"})}):Object(se.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:e.state.page+1})},children:[a.formatMessage({id:"label.more"})," \xa0\xa0",Object(se.jsx)(fe.a,{icon:Be.a})]})})})]})]})}}]),a}(r.a.Component),Ta=Object(N.b)(Object(S.a)((function(e){return{input:{width:e.spacing(30),maxWidth:"100%"},icon:{color:e.palette.text.light},marginTop3:{marginTop:e.spacing(3)}}}))(Object(l.b)((function(e,t){return{currentGroupKey:e.DataStore.currentGroupKey,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ea))),Aa=a(559),Da=a(537),Ia=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={popoverAnchor:null,popoverTab:0},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.repositoryConfig,r=t.intl,n=t.history,s=t.repositoryList,c=t.currentUserInfo,l=s.filter(U.id(i&&i.repository&&i.repository.forkFrom||""))[0];return Object(se.jsx)(M.a,{elevation:1,className:a.content,children:i&&i.repository&&i.repository.id?Object(se.jsxs)(k.a,{container:!0,spacing:3,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:3,className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:i.repository.icon?Object(se.jsx)(Fe.a,{variant:"square",className:a.icon,src:D.HOSTS.STATIC_AVATAR_PREFIX+i.repository.icon}):Object(se.jsx)(Fe.a,{variant:"square",className:a.icon,children:i.repository.name.substr(0,1).toUpperCase()})}),Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"h6",className:a.text,children:[i.group.displayName,"/",i.repository.displayName," \xa0\xa0",l?Object(se.jsx)(w.a,{variant:"body2",component:"span",className:a.text,children:Object(se.jsx)(o.b,{to:V(l.group.name,l.name),children:r.formatMessage({id:"label.forkFrom_S"},{s:l.group.displayName+"/"+l.displayName})})}):""]}),Object(se.jsxs)(w.a,{variant:"caption",component:"div",className:a.subtext,children:[r.formatMessage({id:"label.repositoryID"}),": ",i.repository.id]})]})]})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,justifyContent:"flex-end",className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(Aa.a,{variant:"outlined",className:a.border,children:[Object(se.jsxs)(_.a,{onClick:function(e){return n.push(V("repositories/fork",i.repository.id))},children:[Object(se.jsx)(fe.a,{icon:be.o}),"\xa0 ",r.formatMessage({id:"label.fork"})]}),Object(se.jsx)(_.a,{disabled:!i.repository.forkCount,onClick:function(e){return n.push(V("repositories/forklist",i.repository.id))},children:i.repository.forkCount})]})}),Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){e.state.popoverAnchor?e.setState({popoverAnchor:null}):e.setState({popoverAnchor:t.currentTarget})},children:r.formatMessage({id:"label.clone"})}),Object(se.jsx)(Da.a,{elevation:2,open:!!this.state.popoverAnchor,anchorEl:this.state.popoverAnchor,TransitionProps:{timeout:0},onClose:function(t){e.state.popoverAnchor?e.setState({popoverAnchor:null}):e.setState({popoverAnchor:t.currentTarget})},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(se.jsxs)(M.a,{className:a.clonePopvoer,children:[Object(se.jsx)(M.a,{className:a.cloneHeader,children:Object(se.jsx)(vt,{tabs:["HTTPS","SSH"],currentTab:this.state.popoverTab,onChange:function(t,a){e.setState({popoverTab:a})}})}),0===this.state.popoverTab&&Object(se.jsxs)(M.a,{className:a.cloneContent,children:[Object(se.jsxs)(w.a,{variant:"body2",gutterBottom:!0,children:[r.formatMessage({id:"message.differenceBetweenHTTPSAndSSH"})," \xa0",Object(se.jsx)(he.a,{docID:"a5dda647043d0cb1c4047dd1de84ca57"})]}),Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:re.getHost(c)+V(i.group.name,i.repository.name)+".git",InputProps:{id:"repsoditory-http-url-text",readOnly:!0,endAdornment:Object(se.jsx)(qt.a,{position:"end",className:a.copy,children:Object(se.jsx)(Ae,{label:"label.copy",icon:be.i,onClick:function(e){var t=document.getElementById("repsoditory-http-url-text");t.select(),document.execCommand("Copy"),t.blur()}})})}})]}),1===this.state.popoverTab&&Object(se.jsxs)(M.a,{className:a.cloneContent,children:[Object(se.jsxs)(w.a,{variant:"body2",gutterBottom:!0,children:[r.formatMessage({id:"message.generateAndSetSSHKey"})," \xa0",Object(se.jsx)(he.a,{docID:"211cfb16bc8460bc44068f3b34ee2a63"})]}),Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:re.getSSHHost(c)+":"+[i.group.name,i.repository.name].join("/")+".git",InputProps:{id:"repsoditory-ssh-url-text",readOnly:!0,endAdornment:Object(se.jsx)(qt.a,{position:"end",className:a.copy,children:Object(se.jsx)(Ae,{label:"label.copy",icon:be.i,onClick:function(e){var t=document.getElementById("repsoditory-ssh-url-text");t.select(),document.execCommand("Copy"),t.blur()}})})}})]})]})})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(w.a,{variant:"body2",className:a.iconBar,children:[Object(se.jsx)(fe.a,{icon:be.h}),"\xa0 ",r.formatMessage({id:"label._N_commit"},{n:i.count.commit})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.d}),"\xa0 ",r.formatMessage({id:"label._N_branch"},{n:i.count.branch})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.C}),"\xa0 ",r.formatMessage({id:"label._N_tag"},{n:i.count.tag})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.n}),"\xa0 ",r.formatMessage({id:"label._N_byte"},{n:z(i.count.file)})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.v}),"\xa0 ",r.formatMessage({id:"label._N_mergeRequest"},{n:i.repository.mergeRequestCount.open})," \xa0\xa0\xa0\xa0",Object(se.jsx)(fe.a,{icon:be.s}),"\xa0 ",r.formatMessage({id:"label._N_member"},{n:i.members.length})]})})]}):Object(se.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(se.jsx)(me.a,{})})})}}]),a}(i.Component),Fa=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{content:{height:e.spacing(15.5),boxSizing:"border-box",borderBottom:"1px solid "+e.palette.border,borderRadius:0},icon:{height:e.spacing(5),width:e.spacing(5)},text:{height:e.spacing(3),lineHeight:e.spacing(3)+"px",overflow:"hidden"},subtext:{paddingTop:e.spacing(.5),height:e.spacing(1.5),lineHeight:e.spacing(1.5)+"px"},iconBar:{height:e.spacing(3),lineHeight:e.spacing(3)+"px"},clonePopvoer:{width:e.spacing(50)+"px"},cloneContent:{padding:e.spacing(2)},cloneHeader:{padding:"0px "+e.spacing(2)+"px"},border:{"& button":{borderColor:e.palette.border,padding:"2px "+e.spacing(2)+"px"}},copy:{marginLeft:"2px","& button":{position:"relative",right:"-14px",borderLeft:"1px solid "+e.palette.border,borderRadius:"0px 4px 4px 0px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{}}))(Ia))))),Pa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"composeOptions",value:function(e,t){var a=this,i=[];return e&&(e.branches||e.tags)&&(e.branches&&e.branches.length&&(i.push(Object(se.jsx)(ea.a,{disableSticky:!0,children:this.props.intl.formatMessage({id:"label.branch"})},"b")),i=i.concat(e.branches.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.id,children:[Object(se.jsx)(fe.a,{icon:be.d,className:a.props.classes.icon}),"\xa0\xa0",e.name]},"b"+t)})))),e.tags&&e.tags.length&&(i.push(Object(se.jsx)(ea.a,{disableSticky:!0,disabled:!0,children:this.props.intl.formatMessage({id:"label.tag"})},"t")),i=i.concat(e.tags.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.id,children:[Object(se.jsx)(fe.a,{icon:be.C,className:a.props.classes.icon}),"\xa0\xa0",e.name]},"t"+t)})))),e.branches.filter(U.id(t)).length||e.tags.filter(U.id(t)).length||(i.push(Object(se.jsx)(ea.a,{disableSticky:!0,disabled:!0,children:this.props.intl.formatMessage({id:"label.commit"})},"c")),i.push(Object(se.jsxs)(ut.a,{value:t,children:[Object(se.jsx)(fe.a,{icon:be.h,className:this.props.classes.icon}),"\xa0\xa0",t]},"c0")))),i}},{key:"render",value:function(){var e=this.props,t=e.currentRevision,a=e.revisionList,i=e.onChange,r=e.classes;return Object(se.jsx)(E.a,{select:!0,value:t,variant:"outlined",onChange:function(e){return e.target.value&&i(e.target.value)},className:r.select,children:this.composeOptions(a,t)})}}]),a}(r.a.Component),La=Object(N.b)(Object(S.a)((function(e){return{select:{"& > div > svg":{width:e.spacing(3),height:e.spacing(3)}},icon:{color:e.palette.text.light}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(Pa)))),Ba=a(296),Ua=a.n(Ba),Ga=a(99),Ha=a.n(Ga),qa=(a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(182)),za=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).code=r.a.createRef(),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.refreshCodeLine()}},{key:"componentDidUpdate",value:function(){this.refreshCodeLine()}},{key:"refreshCodeLine",value:function(){if("string"===typeof this.props.htmlCode){var e=document.createElement("span");if(e.innerHTML=this.props.htmlCode,"string"===typeof this.props.original){for(var t=Object(qa.a)(this.props.original,this.props.code),a=0,i=[],r=0;r<t.length;r++)if(t[r].added||t[r].removed){if(t[r].added)for(var n=0;n<t[r].count;n++)i.push(a),a++}else a+=t[r].count;this.highlightWord(e,this.props.classes.addition,i)}else if("string"===typeof this.props.modified){for(var s=Object(qa.a)(this.props.code,this.props.modified),o=0,c=[],l=0;l<s.length;l++)if(s[l].added||s[l].removed){if(s[l].removed)for(var p=0;p<s[l].count;p++)c.push(o),o++}else o+=s[l].count;this.highlightWord(e,this.props.classes.deletion,c)}this.code.current.innerHTML=e.innerHTML}}},{key:"highlightWord",value:function(e,t,a){for(var i=null,r=null,n=null,s=0;s<a.length;s++){var o=this.findOffset(e,a[s]);i||(i=o[0],r=o[1],n=o[1]-1),i===o[0]?o[1]===n+1?n=o[1]:(this.highlight(i,t,r,n),i=null,s--):(this.highlight(i,t,r,n),i=null,s--)}return i&&this.highlight(i,t,r,n),!0}},{key:"highlight",value:function(e,t,a,i){var r=document.createRange(),n=document.createElement("span");n.className=t,r.setStart(e,a),r.setEnd(e,i+1),r.surroundContents(n)}},{key:"findOffset",value:function(e,t){for(var a=0,i=0;i<e.childNodes.length;i++){var r=e.childNodes.item(i);if("#text"===r.nodeName){var n=r.length;if(t-a>=n){a+=n;continue}return[r,t-a]}var s=r.innerText.length;if(!(t-a>=s))return this.findOffset(r,t-a);a+=s}}},{key:"render",value:function(){return Object(se.jsx)("pre",{children:Object(se.jsx)("code",{ref:this.code,children:this.props.code})})}}]),a}(r.a.Component),Va=Object(N.b)(Object(S.a)((function(e){return{addition:{backgroundColor:e.palette.background.additionDarker},deletion:{backgroundColor:e.palette.background.deletionDarker}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(za)))),Wa=a(486),Ka=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.to,a=e.children;return Object(i.createElement)(o.b,Object(y.a)(Object(y.a)({},this.props),{},{key:"origin_child",to:t}),a)}}]),a}(r.a.Component),Ja=Ka,$a=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={copyHash:"label.copyHash"},i}return Object(d.a)(a,[{key:"copyHash",value:function(){var e=window.document.createElement("input");e.setAttribute("value",this.props.hash),e.setAttribute("type","text"),window.document.body.appendChild(e),e.select(),document.execCommand("Copy"),window.document.body.removeChild(e),this.setState({copyHash:"label.copied"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.hash,i=t.classes,r=this.state.copyHash;return Object(se.jsxs)(Aa.a,{"aria-label":"outlined button group",children:[Object(se.jsx)(_.a,{disabled:!0,id:"hashValue",className:i.disabledBtn,children:a}),Object(se.jsx)(Ae,{label:r,icon:be.i,className:i.icon,onClick:function(t){return e.copyHash(t)},onMouseLeave:function(){window.setTimeout((function(){return e.setState({copyHash:"label.copyHash"})}),150)}})]})}}]),a}(i.Component),Za=Object(N.b)(Object(S.a)((function(e){return{disabledBtn:{"&:disabled":{color:e.palette.text.main,border:"1px solid "+e.palette.border}},icon:{color:e.palette.primary.main,border:"1px solid "+e.palette.border,borderLeft:"0px",borderRadius:"0px 4px 4px 0px"}}}))($a)),Ya=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.intl,a=e.classes,i=e.data,n=e.linkPathBase,s=e.currentRepositoryConfig,o=e.showBorder,c=e.blameMode,l=e.path,p=i||{},d={};if(s){var u=Z(s.members,p.email);u&&((d=u).hash=p.sha,d.commitContent=p.commit,d.commitTime=p.time)}return Object(se.jsxs)(Wa.a,{className:o?a.listItem:"",children:[Object(se.jsx)(gt.a,{primary:Object(se.jsx)(r.a.Fragment,{children:Object(se.jsxs)(w.a,{component:"span",variant:"body2",color:"textPrimary",children:[Object(se.jsx)(Ja,{to:n+"/"+d.hash.substr(0,8)+(l||""),children:d.commitContent?d.commitContent:""}),c&&Object(se.jsx)(Ja,{style:{display:"inline-block",float:"right"},to:n+"/"+d.hash.substr(0,8),children:d.hash.substr(0,8)})]})}),secondary:Object(se.jsx)(r.a.Fragment,{children:Object(se.jsxs)(k.a,{container:!0,spacing:1,className:a.secondaryWrap,component:"span",children:[Object(se.jsx)(k.a,{item:!0,component:"span",children:Object(se.jsx)(Fe.a,{src:d.icon?D.HOSTS.PGYER_AVATAR_HOST+d.icon:"/static/images/default_avatar.png",className:a.avatar,component:"span"})}),Object(se.jsx)(k.a,{item:!0,component:"span",children:Object(se.jsxs)(w.a,{component:"span",variant:"body2",children:[d.name?d.name:"",d.temporary&&Object(se.jsxs)(r.a.Fragment,{children:["\xa0",Object(se.jsx)(he.a,{type:"icon",docID:"2411cf176aa198cf701a5d422d70a58c",tooltip:t.formatMessage({id:"message.itsMyEmail"})})]})]})}),Object(se.jsx)(k.a,{item:!0,component:"span",children:Object(se.jsxs)(w.a,{component:"span",variant:"body2",children:[t.formatMessage({id:"label.editIn"}),":",Object(se.jsx)(Mt,{timestamp:Number(d.commitTime)})]})})]})})}),!c&&Object(se.jsx)(Za,{hash:d.hash.substr(0,8)})]},d.hash)}}]),a}(i.Component),Xa=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{listItem:{borderTop:"1px solid "+e.palette.border,paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},avatar:{width:e.spacing(3),height:e.spacing(3)},secondaryWrap:{padding:e.spacing(1),paddingLeft:0,paddingBottom:0}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Ya))))),Qa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a),i=t.call(this,e);var n=window.location.href.match(/^.*#(\d+)$/);return i.state={lineNumber:n?parseInt(n[1]):-1},i.ref=r.a.createRef(),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(this.ref.current){for(var e=this.ref.current,t=0;e;)t+=e.offsetTop,e=e.offsetParent;document.querySelector(".app-content").scrollTop=t-64-105}return!0}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.object,i=t.blame,r=t.currentRepositoryConfig,n=t.match,s=t.classes,o=t.fragment,c=this.state.lineNumber,l=$(a.path),p=o?a.object:a.object.raw.split("\n"),d=Ha.a.highlight(p.join("\n"),Ha.a.languages[l]||Ha.a.languages.markdown,l).split("\n"),u=[];return u=i&&i.length?p.map((function(e,t){var a=null,o=i.filter((function(e){return e.start===t+1}));return o&&o[0]&&(a=Object(se.jsx)("td",{className:s.blame,rowSpan:o[0].length,children:Object(se.jsx)(Xa,{data:o[0].commit,linkPathBase:V(n.params.groupName,n.params.repositoryName,"commit"),currentRepositoryConfig:r,blameMode:!0},t)})),Object(se.jsxs)("tr",{className:a&&s.topBorder,children:[t===p.length-1&&0===p[t].length?Object(se.jsx)("td",{className:s.blame}):a,Object(se.jsx)("td",{className:s.lineNumber,children:Object(se.jsx)("code",{children:t+1})}),Object(se.jsx)("td",{className:s.code,children:Object(se.jsx)(Va,{code:e,htmlCode:d[t]})})]},t)})):"blame"===n.params.type?p.map((function(e,t){return Object(se.jsxs)("tr",{children:[0===t&&Object(se.jsx)("td",{className:s.blameLoading,rowSpan:p.length,children:Object(se.jsx)(me.a,{size:24})}),Object(se.jsx)("td",{className:s.lineNumber,children:Object(se.jsx)("code",{children:t+1})}),Object(se.jsx)("td",{className:s.code,children:Object(se.jsx)(Va,{code:e,htmlCode:d[t]})})]},t)})):p.map((function(t,a){var i={};return o&&o[a]&&(i={color:"#fff",background:o[a]}),Object(se.jsxs)("tr",{ref:a+1===c?e.ref:null,children:[Object(se.jsx)("td",{className:s.lineNumber,style:i,children:Object(se.jsx)("code",{children:a+1})}),Object(se.jsx)("td",{className:s.code,children:Object(se.jsx)(Va,{code:t,htmlCode:d[a]})})]},a)})),Object(se.jsx)("table",{className:s.table,children:Object(se.jsx)("tbody",{children:u})})}}]),a}(r.a.Component),ei=Object(N.b)(Object(S.a)((function(e){return{table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","& tr:first-child":{border:"none"}},topBorder:{borderTop:"1px solid "+e.palette.border},blame:{width:e.spacing(40),verticalAlign:"middle"},blameLoading:{width:e.spacing(40),verticalAlign:"top",textAlign:"center",paddingTop:e.spacing(10)},lineNumber:{width:e.spacing(4),padding:"0 "+e.spacing(1)+"px",textAlign:"right",verticalAlign:"middle",userSelect:"none",color:e.palette.text.lighter,backgroundColor:e.palette.background.main},code:{verticalAlign:"middle",overflowWrap:"break-word"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Qa)))),ti=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={mdSourceShow:!1,copyAnchor:null},i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"copySomething",value:function(e){this.setState({copyAnchor:null}),window.setTimeout((function(){var t=window.document.createElement("textarea");t.innerHTML=e,window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}),0)}},{key:"getDisplayMode",value:function(e){return e.object.oversize?D.obejctDisplayType.oversize:e.object.size<=0?D.obejctDisplayType.empty:e.object.mime&&(e.object.mime.match(/^text/)||"application/xml"===e.object.mime)?e.path&&e.path.match(/.*\.md$/i)?D.obejctDisplayType.markdown:D.obejctDisplayType.text:e.object.mime&&e.object.mime.match(/^image/)?D.obejctDisplayType.image:"video/mp4"===e.object.mime?D.obejctDisplayType.video:D.obejctDisplayType.unknown}},{key:"getObjectIcon",value:function(e){return be.n}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.object,n=t.blame,s=t.classes,o=t.match,c=t.history,l=t.intl,p=this.state.mdSourceShow,d=this.getDisplayMode(i);return Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsxs)(k.a,{item:!0,xs:12,container:!0,className:s.fileInfo,children:[Object(se.jsxs)(k.a,{item:!0,xs:8,children:[Object(se.jsx)(fe.a,{icon:this.getObjectIcon(i.object.mime),className:s.icon}),"\xa0\xa0",Object(se.jsx)(w.a,{variant:"body1",component:"div",children:i.path}),"\xa0",Object(se.jsxs)(w.a,{variant:"body2",component:"div",children:[" \xa0|\xa0 ",z(i.object.size,"Bytes")]}),"\xa0\xa0",Object(se.jsx)(Ae,{label:"label.copy",icon:be.i,onClick:function(t){return e.setState({copyAnchor:t.target})},className:s.icon2}),Object(se.jsxs)(pt.a,{anchorEl:this.state.copyAnchor,open:!!this.state.copyAnchor,onClose:function(t){return e.setState({copyAnchor:null})},children:[Object(se.jsx)(ut.a,{value:"0",onClick:function(t){return e.copySomething(i.path)},children:l.formatMessage({id:"label.copyPath"})}),(d===D.obejctDisplayType.text||d===D.obejctDisplayType.markdown)&&Object(se.jsx)(ut.a,{value:"1",onClick:function(t){return e.copySomething(i.object.raw)},children:l.formatMessage({id:"label.copyCode"})})]}),d===D.obejctDisplayType.markdown&&Object(se.jsx)(r.a.Fragment,{children:p?Object(se.jsx)(Ae,{label:"message.displayRendereFile",icon:be.n,onClick:function(){return e.setState({mdSourceShow:!1})}}):Object(se.jsx)(Ae,{label:"message.displaySource",icon:be.g,onClick:function(){return e.setState({mdSourceShow:!0})}})})]}),o.params.path&&Object(se.jsx)(k.a,{item:!0,xs:4,className:s.blame,children:Object(se.jsxs)(Aa.a,{size:"small","aria-label":"small outlined button group",children:[Object(se.jsx)(_.a,{onClick:function(e){return c.push(V(a.group.name,a.repository.name,"commits",encodeURIComponent(o.params.rev)+o.params.path))},children:l.formatMessage({id:"label.history"})}),(d===D.obejctDisplayType.text||d===D.obejctDisplayType.markdown)&&Object(se.jsx)(_.a,{onClick:function(e){return c.push(V(a.group.name,a.repository.name,"blame"===o.params.type?"files":"blame",encodeURIComponent(o.params.rev)+o.params.path))},children:"blame"===o.params.type?"Normal":"Blame"})]})})]}),Object(se.jsxs)(k.a,{item:!0,xs:12,className:[s.detail,d===D.obejctDisplayType.text||p?s.editorBg:""].join(" "),children:[d===D.obejctDisplayType.text&&Object(se.jsx)(ei,{object:i,blame:n}),d===D.obejctDisplayType.markdown&&Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,className:p?"":s.height0,children:Object(se.jsx)(ei,{object:i,blame:n})}),Object(se.jsxs)(k.a,{item:!0,xs:12,className:[p?s.height0:s.markdown,"markdown-body"].join(" "),children:[Object(se.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"}),Object(se.jsx)(Ua.a,{children:i.object.raw})]})]}),d===D.obejctDisplayType.image&&Object(se.jsx)("img",{src:"data:"+i.object.mime+";base64,"+i.object.base64Encoded,className:s.mediaFile}),d===D.obejctDisplayType.video&&Object(se.jsx)("div",{className:s.mediaFile,children:Object(se.jsx)("video",{width:"100%",controls:!0,children:Object(se.jsx)("source",{src:"data:"+i.object.mime+";base64,"+i.object.base64Encoded,type:i.object.mime})})}),d===D.obejctDisplayType.unknown&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileTypeNotSupport"})}),d===D.obejctDisplayType.empty&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileContentEmpty"})}),d===D.obejctDisplayType.oversize&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:s.unknown,children:l.formatMessage({id:"message.fileContentOversize"})})]})]})}}]),a}(r.a.Component),ai=Object(N.b)(Object(S.a)((function(e){return{icon:{color:e.palette.text.lighter},icon2:{color:e.palette.primary.main},fileInfo:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0 0","& > div":{display:"flex",alignItems:"center"}},blame:{justifyContent:"flex-end","& button":{background:e.palette.background.light,borderColor:e.palette.border}},editorBg:{background:e.palette.background.light},detail:{overflowX:"hidden",border:"1px solid "+e.palette.border,borderRadius:"0 0 "+e.spacing(.5)+"px "+e.spacing(.5)+"px",borderTop:"0px"},mediaFile:{display:"block",margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5),maxWidth:"80%"},oldImage:{display:"block",marginTop:e.spacing(5),marginBottom:e.spacing(3),border:"1px solid "+e.palette.error.main,padding:e.spacing(2),marginLeft:"auto",marginRight:"auto",maxWidth:"80%"},newImage:{display:"block",marginTop:e.spacing(5),marginBottom:e.spacing(3),border:"1px solid "+e.palette.success.dark,marginLeft:"auto",padding:e.spacing(2),marginRight:"auto",maxWidth:"80%"},height0:{height:"0px",paddingTop:"0px !important",paddingBottom:"0px !important",overflow:"hidden"},unknown:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(32)},markdown:{boxSizing:"border-box",minWidth:"200px",maxWidth:"980px",margin:"0 auto",padding:"45px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(ti)))),ii=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,pathStack:[],search:"",objectData:{},blameData:null,readmeFile:{}},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getPathStack(this.props,this.state)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.match.params)!==JSON.stringify(e.match.params)?this.props.match.params.type!==e.match.params.type&&this.props.match.params.rev===e.match.params.rev&&this.props.match.params.path===e.match.params.path?(this.getObject(e,t),!1):(this.getPathStack(e,t),!1):JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getPathStack(e,t),!1):JSON.stringify(this.state.pathStack)===JSON.stringify(t.pathStack)||(this.getObject(e,t),!1)}},{key:"getPathStack",value:function(e,t){var a=this;return!e.currentRepositoryKey||!e.currentRepositoryConfig.repository||(e.match.params.path&&"/"!==e.match.params.path||0!==t.pathStack.length?(this.setState({objectData:{},pending:!0}),zt.pathStack({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:e.match.params.path||"/"}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||a.setState({pending:!1,pathStack:e.data})})),!0):(this.getObject(e,t),!0))}},{key:"getObject",value:function(e,t){var a=this;if(!e.currentRepositoryConfig.branches||!e.currentRepositoryConfig.branches.length)return this.setState({blameData:null,objectData:{},pending:!1}),!0;t.pathStack.length>0&&"blob"===t.pathStack[t.pathStack.length-1].type&&"blame"===e.match.params.type&&this.getBlame(e,t);var i=t.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),"");this.setState({blameData:null,objectData:{},pending:!0}),zt.object({repository:e.currentRepositoryKey,parent:t.pathStack.length&&t.pathStack[t.pathStack.length-1].object||e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:i||"/"}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?a.setState({pending:!1}):(a.setState({pending:!1,search:"",objectData:e.data}),a.getReadmeFile(e.data))}))}},{key:"getBlame",value:function(e,t){var a=this;this.setState({blameData:null});var i=t.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),"");zt.getBlameInfo({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:i||"/"}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||a.setState({search:"",blameData:e.data.blame})}))}},{key:"getReadmeFile",value:function(e){var t=this;if("blob"!==e.type){var a=e.object.filter((function(e){return"readme.md"===e.name.toLowerCase()}));a[0]&&zt.object({repository:this.props.currentRepositoryKey,parent:a[0].object,revision:this.props.match.params.rev&&decodeURIComponent(this.props.match.params.rev)||Y(this.props.currentRepositoryConfig),path:e.path+"/"+a[0].name}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||t.setState({readmeFile:e.data})}))}this.setState({readmeFile:{}})}},{key:"makeFileListData",value:function(e){var t=this,a=this.state.pathStack.reduce((function(e,t){return(e?e+"/":"")+t.name}),""),i=e.sort((function(e,t){return e.type===t.type?0:"blob"===e.type?1:-1})).map((function(e){return[Object(se.jsxs)(w.a,{variant:"body1",children:[Object(se.jsx)(fe.a,{icon:"blob"===e.type?be.n:be.O})," \xa0\xa0",Object(se.jsx)(o.b,{className:t.props.classes.linkObjectName,to:V(t.props.currentRepositoryConfig.group.name,t.props.currentRepositoryConfig.repository.name,"files",encodeURIComponent(t.props.match.params.rev||Y(t.props.currentRepositoryConfig)),a?a+"/"+e.name:e.name),children:e.name})]}),Object(se.jsx)(o.b,{className:t.props.classes.linkCommitMessage,to:V(t.props.currentRepositoryConfig.group.name,t.props.currentRepositoryConfig.repository.name,"commit",e.commit.sha.slice(0,8)),children:e.commit.commit}),Object(se.jsx)(Mt,{timestamp:e.commit.time})]}));return[["30%","auto","auto"],["label.name","label.lastCommit","label.lastUpdate"]].concat(Object(T.a)(i))}},{key:"composePathBreadCrumb",value:function(){for(var e=[this.props.currentRepositoryConfig.group.name,this.props.currentRepositoryConfig.repository.name,"files",encodeURIComponent(this.props.match.params.rev||Y(this.props.currentRepositoryConfig))],t=[Object(se.jsx)(w.a,{variant:"body2",component:"div",children:Object(se.jsx)(o.b,{to:V.apply(void 0,e),className:this.props.classes.linkCommitMessage,children:this.props.currentRepositoryConfig.repository.name})},"p")],a=0;a<this.state.pathStack.length;a++)e.push(this.state.pathStack[a].name),t.push(Object(se.jsxs)(w.a,{variant:"body2",component:"div",children:["\xa0\xa0/\xa0\xa0",Object(se.jsx)(o.b,{to:V.apply(void 0,e),className:a===this.state.pathStack.length-1?this.props.classes.linkObjectName:this.props.classes.linkCommitMessage,children:this.state.pathStack[a].name})]},"p"+a));return t}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryError,i=t.currentRepositoryConfig,r=t.history,n=t.match,s=t.intl,o=t.classes;return a?Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Lt,{imageName:"commits-empty.png",notice:s.formatMessage({id:"message.noRepositoryFind"})})})}):Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Fa,{repositoryConfig:i})}),Y(i)&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,alignItems:"center",className:"width-auto",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(La,{currentRevision:this.props.match.params.rev&&decodeURIComponent(this.props.match.params.rev)||Y(i),revisionList:{branches:i.branches,tags:i.tags},onChange:function(e){return r.push(V(i.group.name,i.repository.name,"files",encodeURIComponent(e)))}})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(k.a,{container:!0,children:this.composePathBreadCrumb()})})]})}),Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.search,onChange:function(t){return e.setState({search:t.target.value})},InputProps:{startAdornment:Object(se.jsx)(qt.a,{position:"start",children:Object(se.jsx)(fe.a,{icon:be.z})})}})})]})}),!this.state.pending&&Y(i)&&this.state.objectData.commit&&Object(se.jsx)(k.a,{item:!0,xs:12,className:o.commit,children:Object(se.jsx)(Xa,{showBorder:Boolean(!1),data:this.state.objectData.commit,linkPathBase:V(n.params.groupName,n.params.repositoryName,"commit"),currentRepositoryConfig:i})}),!this.state.pending&&Y(i)&&this.state.objectData.commit&&Object(se.jsx)(k.a,{item:!0,xs:12,children:"blob"===this.state.objectData.type?Object(se.jsx)(ai,{object:this.state.objectData,blame:this.state.blameData}):Object(se.jsx)(Ne,{data:this.makeFileListData(this.state.objectData.object.filter(U.search(this.state.search,["name"])))})}),!this.state.pending&&Y(i)&&"blob"!==this.state.objectData.type&&this.state.readmeFile.object&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(ai,{object:this.state.readmeFile})}),this.state.pending&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,className:o.loading,children:Object(se.jsx)(me.a,{})})}),!this.state.pending&&(!this.state.objectData.object||0===this.state.objectData.object.length)&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Lt,{imageName:"branches-empty.png",title:s.formatMessage({id:"message.repository_S_empty"},{s:s.formatMessage({id:"label.file"})}),pending:this.state.pending})})]})}}]),a}(r.a.Component),ri=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},linkObjectName:{color:e.palette.text.main},linkCommitMessage:{color:e.palette.text.light},commit:{"& > li":{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryError:e.DataStore.currentRepositoryError,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ii)))),ni=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,i=e.classes;return Object(se.jsxs)(k.a,{container:!0,className:i.list,children:[t&&Object(se.jsx)(k.a,{item:!0,xs:12,className:i.title,children:Object(se.jsx)(w.a,{variant:"body1",component:"div",children:t})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:t?"":i.list2,children:a})]})}}]),a}(r.a.Component),si=Object(S.a)((function(e){return{list:{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "},title:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0px 0px","& > div":{lineHeight:e.spacing(5)+"px"}},list2:{"& div:nth-child(1), & li:nth-child(1)":{border:"0px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(ni))),oi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={commitList:[],page:1,pending:!1,listFinshed:!1,searchInput:"",search:""},i.pageSize=20,i.mountedFlag=!1,i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.setState({page:1,listFinshed:!1,commitList:[],searchInput:"",search:""}),this.getData(this.props,this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||this.props.match.params.rev!==e.match.params.rev||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.setState({page:1,listFinshed:!1,commitList:[],searchInput:"",search:""}),1===t.page&&""===t.search&&this.getData(e,t),!1):this.state.search!==t.search?(this.setState({page:1,listFinshed:!1,commitList:[]}),1===t.page&&this.getData(e,t),!1):this.state.page===t.page||(this.getData(e,t),!1)}},{key:"getData",value:function(e,t){var a=this;if(!e.currentRepositoryConfig.repository||t.pending||!this.mountedFlag)return!1;if(!e.currentRepositoryConfig.branches||!e.currentRepositoryConfig.branches.length)return!1;var i=e.intl;this.setState({pending:!0}),zt.commitList({repository:e.currentRepositoryKey,revision:e.match.params.rev&&decodeURIComponent(e.match.params.rev)||Y(e.currentRepositoryConfig),path:e.match.params.path?decodeURIComponent(e.match.params.path):"",page:t.page,pagesize:this.pageSize,keyword:t.search}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(r){if(r.code)e.dispatchEvent(te.NewNotification(i.formatMessage({id:"message.error.showCommitListFailed"}),2));else{var n=r.data,s=[],o=0,c="";if(s[o]={date:"",list:[]},n.length){n.map((function(e,t){return c?(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd")===c?(s[o].date=c,s[o].list.push(e)):(s[o+=1]={date:"",list:[]},c=(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd"),s[o].date=c,s[o].list.push(e)):(c=(new j.a).format(1e3*Number(e.time),"yyyy-MM-dd"),s[o].date=c,s[o].list.push(e)),!0}));var l=n.length<a.pageSize;s.map((function(e,a){if(t.commitList.length>0){var i=!1;t.commitList.map((function(a,r){return a.date===e.date?(i=!0,a.list=[].concat(Object(T.a)(a.list),Object(T.a)(e.list)),a):(i||r!==t.commitList.length-1||t.commitList.push(e),!0)}))}return!0})),t.commitList.length&&1!==t.page?a.setState({pending:!1,commitList:Object(T.a)(a.state.commitList),listFinshed:l}):a.setState({pending:!1,commitList:[].concat(s),listFinshed:l})}else a.setState({pending:!1,listFinshed:!0,commitList:[]})}}))}},{key:"pageReload",value:function(e,t,a){t&&a||(t=this.state.refType,a=this.state.ref);var i=this.props,r=i.currentRepositoryConfig,n=i.history,s=V(r.repository.group.name,r.repository.name,"commits",t,encodeURIComponent(a));return e?n.push(s):s}},{key:"filterCommits",value:function(e){e?(this.observed.keyword=e,this.setState({page:1}),this.getData(this.props,this.state)):(this.observed.keyword="",this.setState({page:1}))}},{key:"render",value:function(){var e=this,t=this.state.commitList,a=this.props,i=a.currentRepositoryConfig,r=a.match,n=a.history,s=a.classes,o=a.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[i.branches&&0!==i.branches.length&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(La,{currentRevision:r.params.rev&&decodeURIComponent(r.params.rev)||Y(i),revisionList:{branches:i.branches,tags:i.tags},onChange:function(e){return n.push(V(i.group.name,i.repository.name,"commits",encodeURIComponent(e)))}}),"\xa0\xa0",Object(se.jsx)(w.a,{variant:"body1",component:"span",className:s.path,children:r.params.path?r.params.path.substr(1):""})]}),Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",disabled:this.state.pending,value:this.state.searchInput,onChange:function(t){return e.setState({searchInput:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.setState({search:t.target.value})},InputProps:{startAdornment:Object(se.jsx)(qt.a,{position:"start",children:Object(se.jsx)(fe.a,{icon:be.z})})}})})]})}),this.state.commitList.length>0&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,spacing:3,children:t.map((function(e,t){var a=e.date+" ["+o.formatMessage({id:"label._N_commit"},{n:e.list.length})+"]";return Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(si,{title:a,children:e.list.map((function(e,t){return Object(se.jsx)(Xa,{showBorder:!0,path:r.params.path,data:e,linkPathBase:V(r.params.groupName,r.params.repositoryName,r.params.path?"files":"commit"),currentRepositoryConfig:i},t)}))})},t)}))})}),!this.state.pending&&this.state.commitList.length>0&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,spacing:2,justifyContent:"center",children:this.state.pending?Object(se.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(se.jsx)(me.a,{size:"1rem",color:"inherit"})," \xa0\xa0",o.formatMessage({id:"label.processing"})]}):this.state.listFinshed?t.length>0?Object(se.jsx)(_.a,{size:"small",disabled:!0,children:o.formatMessage({id:"label.noMore"})}):"":Object(se.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:e.state.page+1})},children:[o.formatMessage({id:"label.more"})," \xa0\xa0",Object(se.jsx)(fe.a,{icon:Be.a})]})})}),0===this.state.commitList.length&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Lt,{imageName:"commits-empty.png",notice:o.formatMessage({id:"message.noCommitRecord"}),pending:this.state.pending})})]})}}]),a}(r.a.Component),ci=Object(N.b)(Object(h.f)(Object(ge.a)(Object(S.a)((function(e){return{path:{lineHeight:e.spacing(4)+"px"}}}))(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(oi))))),li=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={keyword:e.match.params.tag?e.match.params.tag:e.match.params.branch?e.match.params.branch:""},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.refType,a=e.pending,i=e.searchRef,r=e.sortDesc,n=e.sortSwitch,s=e.children,o=e.tabValue,c=e.tabChange,l=e.currentRepositoryConfig,p=e.history,d=e.classes,u=e.intl;return Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsxs)(vt,{currentTab:o,onChange:function(e,t){return c(t)},tabs:"branch"===t?[u.formatMessage({id:"label.all"}),u.formatMessage({id:"label.active"}),u.formatMessage({id:"label.inactive"})]:[],children:[Object(se.jsx)(E.a,{variant:"outlined",className:d.input,placeholder:u.formatMessage({id:"message.input_S_name"},{s:u.formatMessage({id:"label."+t})}),defaultValue:this.state.keyword,onChange:function(e){return i(e.target.value)},InputProps:{startAdornment:Object(se.jsx)(qt.a,{position:"start",children:Object(se.jsx)(fe.a,{icon:be.z})})}}),"\xa0",Object(se.jsx)(Ae,{label:"label.sort",onClick:n,className:[d.icon,r?"":d.transform].join(" "),icon:be.B}),l.branches&&l.branches.length>0&&Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:d.button,disabled:a,onClick:function(){return p.push(V(l.repository.group.name,l.repository.name,"tag"===t?"tags":"branches","new"))},children:u.formatMessage({id:"tag"===t?"label.newTag":"label.newBranch"})})]}),Object(se.jsx)(k.a,{container:!0,spacing:2,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:s})})]})}}]),a}(r.a.Component),pi=Object(N.b)(Object(S.a)((function(e){return{input:{width:e.spacing(30),maxWidth:"100%"},button:{marginLeft:e.spacing(4)},icon:{color:e.palette.text.light},transform:{transform:"rotateX(180deg)"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(li)))),di=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={page:1,perpage:10,anchor:[]},i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.repage!==e.repage&&this.setState({page:1}),!0}},{key:"refListsDeal",value:function(e){var t=this.props,a=t.currentRepositoryConfig,i=t.history;e.map((function(e){return e.map((function(e,t){var r=V(a.repository.group.name,a.repository.name,"files",encodeURIComponent(e.name),"");if(e.nameA=Object(se.jsx)(Ja,{to:r,onClick:function(){return i.push(r)},children:e.name}),e.commit.sha){var n=V(a.repository.group.name,a.repository.name,"commit",e.commit.sha.substring(0,8));e.shaA=Object(se.jsx)(Ja,{to:n,onClick:function(){return i.push(n)},children:e.commit.sha.substring(0,8)}),e.logA=Object(se.jsx)(Ja,{to:n,onClick:function(){return i.push(n)},children:e.commit.commit})}return e.commit.email&&(e.updater=Z(a.members,e.commit.email)),!0})),!0}))}},{key:"openRefItemMenu",value:function(e,t){var a=this.state.anchor;a[e]=t.target,this.setState({anchor:a})}},{key:"closeRefItemMenu",value:function(e){var t=this.state.anchor;t[e]=null,this.setState({anchor:t})}},{key:"refListItem",value:function(e,t,a){var i=this,n=this.props,s=n.currentRepositoryConfig,o=n.refType,c=n.deleteRef,l=n.tabValue,p=n.classes,d=n.intl,u=this.state,m=u.page,h=u.perpage,g=Y(s);return!(0===l&&!t.length)&&Object(se.jsxs)(k.a,{container:!0,className:p.refListItem,children:[t.length>0&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(si,{title:e?d.formatMessage({id:"label."+e}):"",children:t.slice(0,m*h).map((function(t,a){return Object(se.jsxs)(k.a,{container:!0,className:p.refItem,children:[Object(se.jsxs)(k.a,{item:!0,xs:11,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(se.jsx)(fe.a,{className:p.icon,icon:"tag"===o?be.C:be.d}),"\xa0\xa0\xa0",Object(se.jsx)(w.a,{component:"span",className:p.refName,children:t.nameA}),"\xa0\xa0",Object(se.jsx)(w.a,{component:"span",className:p.refLog,children:t.detail}),"\xa0\xa0","branch"===o&&t.protected&&Object(se.jsx)(fe.a,{className:p.icon2,icon:be.y}),"branch"===o&&t.name===g&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ye,{color:"secondary",text:d.formatMessage({id:"label.default"})})," \xa0\xa0\xa0"]}),"branch"===o&&t.name!==g&&!!t.isMerge&&Object(se.jsx)(Ye,{color:"success",icon:be.K,text:d.formatMessage({id:"message.merged"})})]}),Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(se.jsx)(fe.a,{className:p.icon,icon:be.h}),"\xa0\xb7\xa0",Object(se.jsx)(w.a,{component:"span",className:p.refSha,children:t.shaA}),"\xa0\xb7\xa0",Object(se.jsx)(w.a,{component:"span",className:p.refLog,children:t.logA}),"\xa0\xb7\xa0",Object(se.jsxs)(w.a,{variant:"body2",component:"span",className:p.refUpdate,children:[t.updater.name,"\xa0",d.formatMessage({id:"label.updatedIn"}),"\xa0"]}),Object(se.jsx)(Mt,{timestamp:1*t.commit.time})]})]}),Object(se.jsxs)(k.a,{item:!0,xs:1,className:p.delete,children:["branch"===o&&t.name!==g&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.more",onClick:function(t){return i.openRefItemMenu(e+a,t)},icon:be.V}),Object(se.jsx)(pt.a,{anchorEl:i.state.anchor[e+a],open:!!i.state.anchor[e+a],onClose:function(t){return i.closeRefItemMenu(e+a)},children:Object(se.jsxs)(ut.a,{onClick:function(){i.closeRefItemMenu(e+a),c(t.name)},children:[Object(se.jsx)(fe.a,{className:p.icon,icon:be.D}),"\xa0\xa0",d.formatMessage({id:"label.delete"})]})})]}),"tag"===o&&Object(se.jsx)(Ae,{label:"label.delete",className:p.icon,onClick:function(){return c(t.name)},icon:be.D})]})]},a)}))})}),0!==l&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,className:p.more,justifyContent:"center",children:Object(se.jsx)(k.a,{item:!0,children:m*h>=t.length?Object(se.jsx)(_.a,{size:"small",disabled:!0,children:d.formatMessage({id:"label.noMore"})}):Object(se.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(e){return i.setState({page:i.state.page+1})},children:[d.formatMessage({id:"label.more"})," \xa0\xa0",Object(se.jsx)(fe.a,{icon:Be.a})]})})})})]},a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.refType,i=t.count,n=t.refTitles,s=t.refLists,o=t.pending,c=t.currentRepositoryConfig,l=t.classes,p=t.history,d=t.intl;this.refListsDeal(s);var u=0;return s&&s.map((function(e,t){return u+=e.length,!0})),Object(se.jsx)(r.a.Fragment,{children:i?u?s.map((function(t,a){return e.refListItem(n[a],t,a)})):Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,className:l.more,justifyContent:"center",children:Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(_.a,{disabled:!0,children:d.formatMessage({id:"label.noMore"})})})})}):Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Lt,{imageName:"tag"===a?"branches-empty.png":"tags-empty.png",title:d.formatMessage({id:"message.repository_S_empty"},{s:d.formatMessage({id:"label."+a})}),notice:d.formatMessage({id:"tag"===a?"message.repositoryTagEmpty":"message.repositoryBranchEmpty"}),children:"tag"===a?c.branches&&c.branches.length>0&&Object(se.jsx)(_.a,{variant:"contained",color:"primary",disabled:o,onClick:function(){return p.push(V(c.repository.group.name,c.repository.name,"tags","new"))},children:d.formatMessage({id:"label.newTag"})}):Object(se.jsx)(he.a,{type:"button",docID:"b0f4a4af6bf1407537f0ae71e167c395",title:d.formatMessage({id:"label.newBranch"})})})})})}}]),a}(r.a.Component),ui=Object(N.b)(Object(S.a)((function(e){return{refListItem:{marginTop:e.spacing(3)},oneline:{display:"flex",height:e.spacing(3),alignItems:"center"},refItem:{padding:e.spacing(1.5)+"px "+e.spacing(3)+"px",borderTop:"1px solid "+e.palette.border},refName:{"& a":{color:e.palette.text.main+" !important",fontWeight:600}},refLog:{display:"flex",alignItems:"center",maxWidth:"35%","& a":{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:e.palette.text.main+" !important"}},refUpdate:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},refSha:{"& a":{color:e.palette.secondary.main+" !important"}},delete:{display:"flex",justifyContent:"flex-end",alignItems:"center"},more:{paddingTop:e.spacing(2)},icon:{color:e.palette.text.light},icon2:{color:e.palette.success.main,marginRight:e.spacing(2.5)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{}}))(di)))),mi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).observed={keyword:i.props.match.params.branch?i.props.match.params.branch:"",tabValue:0,data:null},i.state={refTitles:[],branchLists:null,pending:!0,repage:0,sortDesc:!0},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e),!1):this.state.sortDesc===t.sortDesc||(this.dataSort(t.sortDesc),!1)}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;zt.branchList({repository:e.currentRepositoryKey}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),e.code||(t.observed.data=e.data,t.dataSort(t.state.sortDesc))}))}},{key:"dataSort",value:function(e){this.observed.data&&(this.observed.data.sort((function(t,a){return e?a.commit.time-t.commit.time:t.commit.time-a.commit.time})),this.dataFilter(this.observed.tabValue))}},{key:"dataFilter",value:function(e){var t=this.observed,a=t.data,i=t.keyword;this.observed.tabValue=e;var r=null;r=null!==a&&a.length?i?a.filter(U.nameLikes(i)):a:[];var n=[],s=[],o=Math.floor((new Date).getTime()/1e3),c=7776e3;r.map((function(t,a){return o-t.commit.time<=c&&(0===e||1===e)?n.push(t):o-t.commit.time>c&&(0===e||2===e)&&s.push(t),!0}));var l=[],p=[];0===e?(l.push("active","inactive"),p.push(n,s)):1===e?(l.push("active"),p.push(n)):2===e&&(l.push("inactive"),p.push(s)),this.setState({refTitles:l,branchLists:p,repage:this.state.repage+1})}},{key:"filterBranch",value:function(e){this.observed.keyword=e,this.dataFilter(this.observed.tabValue)}},{key:"deleteBranch",value:function(e){var t=this,a=this.props,i=a.currentRepositoryKey,r=a.intl;if(!i||!e)return!1;zt.deleteBranch({repository:i,branch:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code?t.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.error.deleteFail"}),2)):(t.observed.data=t.observed.data.filter((function(t,a){return t.name!==e})),t.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.deleted"}),0)),t.dataFilter(t.observed.tabValue)),t.props.dispatchEvent(te.cancelComformation())}))}},{key:"deleteConfirm",value:function(e){var t=this,a=this.props.intl;this.props.dispatchEvent(te.addComformation("branch_remove",{title:a.formatMessage({id:"message.confirmDelete"},{s:a.formatMessage({id:"label.branch"})+" '"+e+"' "}),description:"",reject:function(){return!0},accept:function(){t.deleteBranch(e)}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.refTitles,i=t.branchLists,r=t.pending,n=t.repage,s=t.sortDesc;return Object(se.jsx)(k.a,{container:!0,spacing:3,children:Object(se.jsx)(pi,{refType:"branch",pending:r,tabValue:this.observed.tabValue,tabChange:function(t){return e.dataFilter(t)},searchRef:function(t){return e.filterBranch(t)},sortDesc:s,sortSwitch:function(){return e.setState({sortDesc:!s})},children:i?Object(se.jsx)(ui,{refType:"branch",count:this.observed.data?this.observed.data.length:0,refTitles:a,refLists:i,deleteRef:function(t){return e.deleteConfirm(t)},repage:n,pending:r,tabValue:this.observed.tabValue}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:this.props.classes.loading,children:Object(se.jsx)(me.a,{})})})})}}]),a}(i.Component),hi=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(mi)))),gi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).observed={keyword:i.props.match.params.tag?i.props.match.params.tag:"",data:null},i.state={tagList:null,pending:!0,repage:0,sortDesc:!0},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;zt.tagList({repository:e.currentRepositoryKey}).then(re.withEventdispatcher(e.dispatchEvent)(re.getJSONData)).then((function(e){t.setState({pending:!1}),e.code||(t.observed.data=e.data,t.dataSort(t.state.sortDesc))}))}},{key:"dataSort",value:function(e){this.observed.data&&(this.observed.data.sort((function(t,a){return e?a.commit.time-t.commit.time:t.commit.time-a.commit.time})),this.dataFilter())}},{key:"dataFilter",value:function(){var e=this.observed,t=e.data,a=e.keyword,i=null;i=null!==t&&t.length?a?t.filter(U.nameLikes(a)):t:[],this.setState({tagList:[i],repage:this.state.repage+1})}},{key:"filterTag",value:function(e){this.observed.keyword=e,this.dataFilter()}},{key:"deleteTag",value:function(e){var t=this,a=this.props,i=a.currentRepositoryKey,r=a.intl;if(!i||!e)return!1;zt.deleteTag({repository:i,tag:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code?t.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.error.deleteFail"}),2)):(t.observed.data=t.observed.data.filter((function(t,a){return t.name!==e})),t.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.deleted"}),0)),t.dataFilter()),t.props.dispatchEvent(te.cancelComformation())}))}},{key:"deleteConfirm",value:function(e){var t=this,a=this.props.intl;this.props.dispatchEvent(te.addComformation("tag_remove",{title:a.formatMessage({id:"message.confirmDelete"},{s:a.formatMessage({id:"label.tag"})+" '"+e+"' "}),description:"",reject:function(){return!0},accept:function(){t.deleteTag(e)}}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e),!1):this.state.sortDesc===t.sortDesc||(this.dataSort(t.sortDesc),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.tagList,i=t.pending,r=t.repage,n=t.sortDesc;return Object(se.jsx)(k.a,{container:!0,spacing:3,children:Object(se.jsx)(pi,{refType:"tag",pending:i,searchRef:function(t){return e.filterTag(t)},sortDesc:n,sortSwitch:function(){return e.setState({sortDesc:!n})},children:null!==a?Object(se.jsx)(ui,{refType:"tag",count:this.observed.data?this.observed.data.length:0,refTitles:[""],refLists:a,deleteRef:function(t){return e.deleteConfirm(t)},repage:r,pending:i}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:this.props.classes.loading,children:Object(se.jsx)(me.a,{})})})})}}]),a}(r.a.Component),fi=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(gi)))),bi=a(122),ji=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,name:"",origin:"",description:"",error:{}},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.tagName"})})},{name:"name",passPattern:/^.{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^\w+(\.\w+)*$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.tagName"})})},{name:"origin",passPattern:/^.{0,40}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:40})},{name:"description",passPattern:/^[\S\n]{0,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"name",exceptionCode:1027,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.tagName"})})},{name:"name",exceptionCode:1030,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.tagName"})})},{name:"origin",exceptionCode:1036,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.createOrigin"})})}]),i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.pending&&this.props.currentRepositoryKey&&void 0!==this.props.currentRepositoryConfig.repository&&this.setState({pending:!1}),this.state.pending&&void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey&&this.setState({pending:!1}),this.state.pending&&this.props.currentRepositoryKey&&JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)&&this.setState({pending:!1}),!0}},{key:"createTag",value:function(){var e=this,t=this.props,a=t.currentRepositoryKey,i=t.currentRepositoryConfig,r=t.history,n=t.intl,s=this.state,o=s.name,c=s.origin,l=s.description;if(!a||!i.repository||!this.checkInput())return!1;if("new"===o||".git"===o.slice(o.length-4))return this.setState({error:{name:n.formatMessage({id:"message.error._S_invalid"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1;var p,d=Object(bi.a)(i.branches);try{for(d.s();!(p=d.n()).done;){var u=p.value;if(o===u.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1}}catch(f){d.e(f)}finally{d.f()}var m,h=Object(bi.a)(i.tags);try{for(h.s();!(m=h.n()).done;){var g=m.value;if(o===g.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.tagName"})})}}),!1}}catch(f){h.e(f)}finally{h.f()}this.setState({pending:!0}),zt.createTag({repository:a,name:o,origin:c,description:l}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.createTagFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(i.tags.push({id:o,name:o}),++i.count.tag,r.push(V(i.repository.group.name,i.repository.name,"tags")))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.history,r=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:r.title,children:n.formatMessage({id:"label.newTag"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.tagName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.tagName"})}),value:this.state.name,error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){e.setState({name:t.target.value,error:{}})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.choseCreateOrigin"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.origin,error:!!this.state.error.origin,helperText:this.state.error.origin,onChange:function(t){return e.setState({origin:t.target.value})},children:[Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:r.icon,icon:be.d}),"\xa0\xa0",e.name]},t)})),Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.tag"})}),a.tags&&a.tags.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:r.icon,icon:be.C}),"\xa0\xa0",e.name]},t)}))]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.tagDescription"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:this.state.description,error:!!this.state.error.description,helperText:this.state.error.description,onChange:function(t){e.setState({description:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(se.jsx)(k.a,{item:!0,xs:3,className:r.textRight,children:Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:this.state.description.length>30?r.outRange:"",children:[this.state.description.length,"/30"]})})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:r.mr16,disabled:this.state.pending,onClick:function(){return i.push(V(a.repository.group.name,a.repository.name,"tags"))},children:n.formatMessage({id:"label.cancel"})}),Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.createTag()},children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit",className:r.mr16}):"",n.formatMessage({id:"label.ok"})]})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:"\xa0"})]})})]})}}]),a}(r.a.Component),Oi=Object(N.b)(Object(S.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},textRight:{textAlign:"right"},outRange:{color:e.palette.error.main},mr16:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ji)))),vi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,name:"",origin:"",error:{}},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"name",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.branchName"})})},{name:"name",passPattern:/^.{1,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})},{name:"name",passPattern:/^\w[\w/-\\.]+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.branchName"})})},{name:"origin",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notChoose"},{s:i.props.intl.formatMessage({id:"label.createOrigin"})})},{name:"origin",passPattern:/^.{1,40}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:40})}]),i.checkResponse=ne.codeValidator(Object(R.a)(i),[{name:"name",exceptionCode:1027,errorMessage:i.props.intl.formatMessage({id:"message.error._S_invalid"},{s:i.props.intl.formatMessage({id:"label.branchName"})})},{name:"name",exceptionCode:1030,errorMessage:i.props.intl.formatMessage({id:"message.error._S_duplicate"},{s:i.props.intl.formatMessage({id:"label.branchName"})})},{name:"origin",exceptionCode:1036,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"label.createOrigin"})})}]),i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.pending&&this.props.currentRepositoryKey&&void 0!==this.props.currentRepositoryConfig.repository&&this.setState({pending:!1}),this.state.pending&&void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey&&this.setState({pending:!1}),this.state.pending&&this.props.currentRepositoryKey&&JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)&&this.setState({pending:!1}),!0}},{key:"createBranch",value:function(){var e=this,t=this.props,a=t.currentRepositoryKey,i=t.currentRepositoryConfig,r=t.history,n=t.intl,s=this.state,o=s.name,c=s.origin;if(!a||!i.repository||!this.checkInput())return!1;if("new"===o||".git"===o.slice(o.length-4))return this.setState({error:{name:n.formatMessage({id:"message.error._S_invalid"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1;var l,p=Object(bi.a)(i.branches);try{for(p.s();!(l=p.n()).done;){var d=l.value;if(o===d.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1}}catch(g){p.e(g)}finally{p.f()}var u,m=Object(bi.a)(i.tags);try{for(m.s();!(u=m.n()).done;){var h=u.value;if(o===h.name)return this.setState({error:{name:n.formatMessage({id:"message.error._S_duplicate"},{s:this.props.intl.formatMessage({id:"label.branchName"})})}}),!1}}catch(g){m.e(g)}finally{m.f()}this.setState({pending:!0}),zt.createBranch({repository:a,name:o,origin:c}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code?e.checkResponse(t.code)?(e.props.dispatchEvent(te.NewNotification(e.props.intl.formatMessage({id:"message.error.createBranchFail"}),2)),e.setState({pending:!1})):e.setState({pending:!1}):(i.branches.push({id:o,name:o}),++i.count.branch,r.push(V(i.repository.group.name,i.repository.name,"branches")))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.history,r=t.classes,n=t.intl;return Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:r.title,children:n.formatMessage({id:"label.newBranch"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.branchName"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:this.state.name,placeholder:n.formatMessage({id:"message.error.input_S_placeholder"},{s:n.formatMessage({id:"label.branchName"})}),error:!!this.state.error.name,helperText:this.state.error.name,onChange:function(t){return e.setState({name:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",gutterBottom:!0,children:n.formatMessage({id:"label.choseCreateOrigin"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:this.state.origin,error:!!this.state.error.origin,helperText:this.state.error.origin,onChange:function(t){return e.setState({origin:t.target.value})},children:[Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:r.icon,icon:be.d}),"\xa0\xa0",e.name]},t)})),Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.tag"})}),a.tags&&a.tags.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:r.icon,icon:be.C}),"\xa0\xa0",e.name]},t)}))]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:"\xa0"}),Object(se.jsxs)(k.a,{item:!0,xs:12,align:"right",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",className:r.mr16,disabled:this.state.pending,onClick:function(){return i.push(V(a.repository.group.name,a.repository.name,"branches"))},children:n.formatMessage({id:"label.cancel"})}),Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disabled:this.state.pending,onClick:function(){return e.createBranch()},children:[this.state.pending?Object(se.jsx)(me.a,{size:"1rem",color:"inherit",className:r.mr16}):"",n.formatMessage({id:"label.ok"})]})]})]})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:"\xa0"})]})})]})}}]),a}(r.a.Component),yi=Object(N.b)(Object(S.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},mr16:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(vi)))),xi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,refList:[],refTotal:0},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.getData(this.props)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey?(this.getData(e),!1):this.props.currentHash===e.currentHash||(this.getData(e),!1)}},{key:"getData",value:function(e){var t=this;if(!e.currentHash||!e.currentRepositoryKey)return!1;zt.refListContainSHA({repository:e.currentRepositoryKey,hash:e.currentHash}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){if(!e.code){var a=[];a.branch=e.data.branch,a.tag=e.data.tag,t.setState({pending:!1,refList:a,refTotal:e.data.branch.length+e.data.tag.length})}}))}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.classes,i=e.parentHash,r=e.currentGroup,n=e.currentRepository,s=e.history,c=e.intl,l=this.state,p=l.refList,d=l.refTotal;return Object(se.jsxs)(k.a,{container:!0,className:[a.content,t?a.contentShow:""].join(" "),children:[Object(se.jsxs)(k.a,{item:!0,xs:12,className:a.parent,children:[Object(se.jsx)(w.a,{variant:"body1",component:"div",children:c.formatMessage({id:"label.parentNode"})}),Object(se.jsx)(k.a,{children:i.length>0?i.map((function(e,t){return Object(se.jsx)(o.b,{className:a.parentA,to:V(r,n,"commit",e?e.substr(0,8):""),children:e?e.substr(0,8):""},t)})):""})]}),Object(se.jsxs)(k.a,{item:!0,xs:12,className:[a.parent,a.borderNone].join(" "),children:[Object(se.jsx)(w.a,{variant:"body1",component:"div",className:a.versions,children:c.formatMessage({id:"message.someVersion"})}),d>0?p.branch.map((function(e,t){var i=V(r,n,"files",encodeURIComponent(e));return Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",className:a.button,onClick:function(){return s.push(i)},children:[Object(se.jsx)(fe.a,{icon:be.d}),"\xa0",e]},t)})):Object(se.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(se.jsx)(me.a,{size:"1rem",color:"inherit"})," \xa0\xa0"]}),d>0?p.tag.map((function(e,t){var i=V(r,n,"files",encodeURIComponent(e));return Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",className:a.button,onClick:function(){return s.push(i)},children:[Object(se.jsx)(fe.a,{icon:be.C}),"\xa0",e]},t)})):Object(se.jsxs)(_.a,{color:"primary",size:"small",disabled:!0,disableElevation:!0,children:[Object(se.jsx)(me.a,{size:"1rem",color:"inherit"})," \xa0\xa0"]})]})]})}}]),a}(i.Component),Ci=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{content:{maxHeight:"0px",marginTop:e.spacing(3)+"px",overflow:"hidden",transition:"max-height .3s",border:"1px solid "+e.palette.border,borderBottom:"0px"},contentShow:{maxHeight:"1000px",border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px"},parent:{padding:e.spacing(2)+"px 0px",margin:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},parentA:{display:"inline-block",marginTop:e.spacing(2),marginRight:e.spacing(2)},borderNone:{border:"0px"},versions:{marginBottom:e.spacing(1)},button:{marginRight:e.spacing(1),marginTop:e.spacing(1)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(xi))))),Si=a(582),Ri=a(561),Ni=a(562),Mi=a(154),wi=a.n(Mi),ki=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={originalHTML:[],modifiedHTML:[],original:[],modified:[],fullfileContent:[],diffContent:[]},i.checkResponse=ne.codeValidator(Object(R.a)(i),[{exceptionCode:1038,errorMessage:i.props.intl.formatMessage({id:"message.error._S_notFound"},{s:i.props.intl.formatMessage({id:"phrase.file"})})}]),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.showFullFile?this.makeFullDiffContent():(this.makeDiffContent(),this.state.fullfileContent.length>0&&this.buildFullFileContent())}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.showFullFile===e.showFullFile||(e.showFullFile?this.makeFullDiffContent():(this.makeDiffContent(),this.state.fullfileContent.length>0&&this.buildFullFileContent()),!1)}},{key:"getFileContent",value:function(e){var t=this;zt.object({repository:this.props.repository,parent:this.props.fileDiffInfo.original.sha}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code?t.checkResponse(a.code)&&t.props.dispatchEvent(te.NewNotification(t.props.intl.formatMessage({id:"message.error.getFileFail"}),2)):(t.state.fullfileContent=a.data.object&&a.data.object.raw?a.data.object.raw.split("\n"):[],t.setState({fullfileContent:t.state.fullfileContent}),e(a))}))}},{key:"highlight",value:function(e){for(var t=$(this.props.fileDiffInfo.original.name||this.props.fileDiffInfo.modified.name||""),a=Ha.a.highlight(e.join("\n"),Ha.a.languages[t]||Ha.a.languages.markdown,t).split("\n"),i=[],r=0;r<e.length;r++)"string"===typeof e[r]&&(i[r]=a[r]);return i}},{key:"makeDiffContent",value:function(){if(this.props.fileDiffInfo&&this.props.fileDiffInfo.diff&&this.props.fileDiffInfo.diff.line.length){for(var e=this.props.fileDiffInfo.diff.line,t=[],a=[],i=[],r=[null,null],n=0;n<e.length;n++){var s=e[n],o=s.match(/^@@\s-+(\d+)(,\d+)?\s+\++(\d+)(,\d+)?\s+@@.*$/i);o?(r=[parseInt(o[1]),parseInt(o[3])],t.push([0,0,"",s])):"-"===s[0]?(t.push([r[0],null,"-"]),a[r[0]]=s.substring(1),r[0]++):"+"===s[0]?(t.push([null,r[1],"+"]),i[r[1]]=s.substring(1),r[1]++):(t.push([r[0],r[1],""]),a[r[0]]=s.substring(1),i[r[1]]=s.substring(1),r[0]++,r[1]++)}this.setState({diffContent:t,original:a,modified:i,originalHTML:this.highlight(a),modifiedHTML:this.highlight(i)})}}},{key:"makeFullDiffContent",value:function(){var e=this;if(this.state.fullfileContent.length>0){if(this.props.fileDiffInfo&&this.props.fileDiffInfo.diff&&this.props.fileDiffInfo.diff.line.length){for(var t=this.state.fullfileContent.length,a=this.props.fileDiffInfo.diff.line,i=[],r=[],n=[],s=[null,null],o=0;o<a.length;o++){var c=a[o],l=c.match(/^@@\s-+(\d+)(,\d+)?\s+\++(\d+)(,\d+)?\s+@@.*$/i);if(l){var p=[0,0];for(i.length&&(p=Object(T.a)(s)),s=[parseInt(l[1]),parseInt(l[3])];p[0]<Math.min(s[0],t)-1;)p[1]++,p[0]++,i.push([p[0],p[1],""]),r[p[0]]=this.state.fullfileContent[p[0]-1],n[p[1]]=this.state.fullfileContent[p[0]-1]}else"-"===c[0]?(i.push([s[0],null,"-"]),r[s[0]]=c.substring(1),s[0]++):"+"===c[0]?(i.push([null,s[1],"+"]),n[s[1]]=c.substring(1),s[1]++):(i.push([s[0],s[1],""]),r[s[0]]=c.substring(1),n[s[1]]=c.substring(1),s[0]++,s[1]++)}for(;s[0]<=this.state.fullfileContent.length;)i.push([s[0],s[1],""]),r[s[0]]=this.state.fullfileContent[s[0]-1],n[s[1]]=this.state.fullfileContent[s[0]-1],s[0]++,s[1]++;this.setState({diffContent:i,original:r,modified:n,originalHTML:this.highlight(r),modifiedHTML:this.highlight(n)})}}else this.getFileContent((function(t){e.makeFullDiffContent()}))}},{key:"expandCode",value:function(e,t){var a=this;if(this.state.fullfileContent.length>0){var i=this.state.diffContent,r=i[t];if("head"===e){var n=this.state.diffContent[t-1],s=this.state.diffContent[t+1];if(!n&&s[1]<=20){for(var o=[],c=s[0]-1,l=s[1]-1;l>0;l--)o.unshift([c,l,""]),c--;return i.splice.apply(i,[t,1].concat(o)),this.setState({diffContent:i}),!0}if(n&&n[1]&&n[1]+21>=s[1]){for(var p=[],d=n[0]+1,u=n[1]+1;u<s[1];u++)p.push([d,u,""]),d++;return i.splice.apply(i,[t,1].concat(p)),this.setState({diffContent:i}),!0}var m=r[3].match(/^@@\s-+(\d+)(,)?(\d+)?\s+\++(\d+)(,)?(\d+)?\s+@@.*$/i);m&&(r[3]="@@ -"+(parseInt(m[1])-20)+","+(parseInt(m[3])+20||"")+" +"+(parseInt(m[4])-20)+","+(parseInt(m[6])+20||"")+" @@");for(var h=[],g=s[0]-1,f=s[1]-1;f>=s[1]-20;f--)h.unshift([g,f,""]),g--;return i.splice.apply(i,[t+1,0].concat(h)),this.setState({diffContent:i}),!0}if("tail"===e){var b=this.state.diffContent[t-1],j=this.state.diffContent[t+1];if(!r&&b[0]+21>this.state.fullfileContent.length){for(var O=[],v=b[1]+1,y=b[0]+1;y<=this.state.fullfileContent.length;y++)O.push([y,v,""]),v++;return i.splice.apply(i,[t,1].concat(O)),this.setState({diffContent:i}),!0}if(r&&j&&j[1]&&b[1]+21>=j[1]){for(var x=[],C=b[0]+1,S=b[1]+1;S<j[1];S++)x.push([C,S,""]),C++;return i.splice.apply(i,[t,1].concat(x)),this.setState({diffContent:i}),!0}for(var R=[],N=b[0]+1,M=b[1]+1;M<b[1]+21;M++)R.push([N,M,""]),N++;return i.splice.apply(i,[t,0].concat(R)),this.setState({diffContent:i}),!0}}else this.getFileContent((function(i){a.buildFullFileContent(),a.expandCode(e,t)}))}},{key:"buildFullFileContent",value:function(){for(var e=this.state,t=e.original,a=e.modified,i=e.fullfileContent,r=1,n=0;n<i.length;n++)if("string"!==typeof t[n+1])t[n+1]=i[n],a[r]=i[n],r++;else for(;"string"===typeof a[r]&&r<a.length;)r++;this.setState({original:t,modified:a,originalHTML:this.highlight(t),modifiedHTML:this.highlight(a)})}},{key:"makeLines",value:function(){var e=this,t=[],a=this.props.classes;if(this.props.renderSideBySide)for(var i=null,r=null,n=function(n){var s=e.state.diffContent[n];"-"===s[2]&&null===i&&(i=t.length,r=n),"-"===s[2]&&t.push([Object(se.jsx)("td",{className:[a.lineNumber,a.lineNumberDeletion].join(" "),children:Object(se.jsx)("code",{children:s[0]})},0),Object(se.jsx)("td",{className:[a.diffMarker,a.deletion].join(" "),children:Object(se.jsx)("code",{children:"-"})},1),Object(se.jsx)("td",{className:[a.code,a.deletion].join(" "),children:Object(se.jsx)(Va,{code:e.state.original[s[0]],htmlCode:e.state.originalHTML[s[0]]})},2),Object(se.jsx)("td",{className:[a.lineNumber].join(" ")},3),Object(se.jsx)("td",{className:[a.diffMarker,a.disabled].join(" ")},4),Object(se.jsx)("td",{className:[a.code,a.disabled].join(" ")},5)]),"+"===s[2]&&"number"===typeof i&&(t[i]?(t[i][3]=Object(se.jsx)("td",{className:[a.lineNumber,a.lineNumberAddition].join(" "),children:Object(se.jsx)("code",{children:s[1]})},3),t[i][4]=Object(se.jsx)("td",{className:[a.diffMarker,a.addition].join(" "),children:Object(se.jsx)("code",{children:"+"})},4),t[i][5]=Object(se.jsx)("td",{className:[a.code,a.addition].join(" "),children:Object(se.jsx)(Va,{code:e.state.modified[s[1]],original:e.state.original[e.state.diffContent[r][0]],htmlCode:e.state.modifiedHTML[s[1]]})},5),t[i][2]=Object(se.jsx)("td",{className:[a.code,a.deletion].join(" "),children:Object(se.jsx)(Va,{code:e.state.original[e.state.diffContent[r][0]],modified:e.state.modified[s[1]],htmlCode:e.state.originalHTML[e.state.diffContent[r][0]]})},2),i++,r++):(i=null,r=null)),"+"===s[2]&&"number"!==typeof i&&(t.push([Object(se.jsx)("td",{className:[a.lineNumber].join(" ")},0),Object(se.jsx)("td",{className:[a.diffMarker,a.disabled].join(" ")},1),Object(se.jsx)("td",{className:[a.code,a.disabled].join(" ")},2),Object(se.jsx)("td",{className:[a.lineNumber,a.lineNumberAddition].join(" "),children:Object(se.jsx)("code",{children:s[1]})},3),Object(se.jsx)("td",{className:[a.diffMarker,a.addition].join(" "),children:Object(se.jsx)("code",{children:"+"})},4),Object(se.jsx)("td",{className:[a.code,a.addition].join(" "),children:Object(se.jsx)(Va,{code:e.state.modified[s[1]],htmlCode:e.state.modifiedHTML[s[1]]})},5)]),i=null,r=null),0===s[0]&&0===s[1]?(0===n?t.push([Object(se.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",n)}})},0),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),colSpan:4,children:Object(se.jsx)(Va,{code:s[3]})},2)]):t.push([Object(se.jsxs)("td",{className:[a.lineLabel,a.diffLabel,a.lineNumberMarker].join(" "),children:[Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",n)}}),Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",n)}})]},0),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabel,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.code,a.diffLabel,a.marker].join(" "),colSpan:4,children:Object(se.jsx)(Va,{code:s[3]})},2)]),i=null,r=null):""===s[2]&&(t.push([Object(se.jsx)("td",{className:a.lineNumber,children:Object(se.jsx)("code",{children:s[0]})},0),Object(se.jsx)("td",{className:a.diffMarker},1),Object(se.jsx)("td",{className:a.code,children:Object(se.jsx)(Va,{code:e.state.original[s[0]],htmlCode:e.state.originalHTML[s[0]]})},2),Object(se.jsx)("td",{className:a.lineNumber,children:Object(se.jsx)("code",{children:s[1]})},3),Object(se.jsx)("td",{className:a.diffMarker},4),Object(se.jsx)("td",{className:a.code,children:Object(se.jsx)(Va,{code:e.state.modified[s[1]],htmlCode:e.state.modifiedHTML[s[1]]})},5)]),i=null,r=null)},s=0;s<this.state.diffContent.length;s++)n(s);else for(var o=function(i){var r=e.state.diffContent[i],n={"+":a.addition,"-":a.deletion}[r[2]],s={"+":a.lineNumberAddition,"-":a.lineNumberDeletion}[r[2]];if(0===r[0]&&0===r[1])0===i?t.push([Object(se.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",i)}})},0),Object(se.jsx)("td",{className:[a.lineNumber,a.diffLabelTop,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},2),Object(se.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),children:Object(se.jsx)(Va,{code:r[3]})},3)]):t.push([Object(se.jsxs)("td",{className:[a.lineLabel,a.diffLabel,a.lineNumberMarker].join(" "),children:[Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",i)}}),Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("head",i)}})]},0),Object(se.jsx)("td",{className:[a.lineNumber,a.diffLabel,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabel,a.marker].join(" ")},2),Object(se.jsx)("td",{className:[a.code,a.diffLabel,a.marker].join(" "),children:Object(se.jsx)(Va,{code:r[3]})},3)]);else if("-"===r[2]){var o=e.state.diffContent[i-1],c=e.state.diffContent[i+1],l=e.state.diffContent[i+2];c&&"+"===c[2]&&(!l||l&&"+"!==l[2])&&(!o||o&&"+"!==o[2])?t.push([Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[0]})},0),Object(se.jsx)("td",{className:a.lineNumber},1),Object(se.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(se.jsx)("code",{children:"-"})},2),Object(se.jsx)("td",{className:[a.code,n].join(" "),children:Object(se.jsx)(Va,{code:e.state.original[r[0]],modified:e.state.modified[c[1]],htmlCode:e.state.originalHTML[r[0]]})},3)]):t.push([Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[0]})},0),Object(se.jsx)("td",{className:a.lineNumber},1),Object(se.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(se.jsx)("code",{children:"-"})},2),Object(se.jsx)("td",{className:[a.code,n].join(" "),children:Object(se.jsx)(Va,{code:e.state.original[r[0]],htmlCode:e.state.originalHTML[r[0]]})},3)])}else if("+"===r[2]){var p=e.state.diffContent[i-1],d=e.state.diffContent[i-2];p&&"-"===p[2]&&(!d||d&&"-"!==d[2])?t.push([Object(se.jsx)("td",{className:a.lineNumber},0),Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[1]})},1),Object(se.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(se.jsx)("code",{children:"+"})},2),Object(se.jsx)("td",{className:[a.code,n].join(" "),children:Object(se.jsx)(Va,{code:e.state.modified[r[1]],original:e.state.original[p[0]],htmlCode:e.state.modifiedHTML[r[1]]})},3)]):t.push([Object(se.jsx)("td",{className:a.lineNumber},0),Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[1]})},1),Object(se.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(se.jsx)("code",{children:"+"})},2),Object(se.jsx)("td",{className:[a.code,n].join(" "),children:Object(se.jsx)(Va,{code:e.state.modified[r[1]],htmlCode:e.state.modifiedHTML[r[1]]})},3)])}else t.push([Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[0]})},0),Object(se.jsx)("td",{className:[a.lineNumber,s].join(" "),children:Object(se.jsx)("code",{children:r[1]})},1),Object(se.jsx)("td",{className:[a.diffMarker,n].join(" "),children:Object(se.jsx)("code",{children:r[2]})},2),Object(se.jsx)("td",{className:[a.code,n].join(" "),children:Object(se.jsx)(Va,{code:e.state.modified[r[1]],htmlCode:e.state.modifiedHTML[r[1]]})},3)])},c=0;c<this.state.diffContent.length;c++)o(c);t.length>0&&(!this.state.fullfileContent.length||this.state.diffContent[this.state.diffContent.length-1][0]<this.state.fullfileContent.length-1)&&(""===this.state.diffContent[this.state.diffContent.length-1][2]&&(this.props.renderSideBySide?t.push([Object(se.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",e.state.diffContent.length)}})},0),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),colSpan:4,children:Object(se.jsx)(Va,{code:""})},2)]):t.push([Object(se.jsx)("td",{className:[a.lineLabel,a.diffLabelTop,a.lineNumberMarker].join(" "),children:Object(se.jsx)(Ae,{icon:be.V,className:a.lineLabelButton,onClick:function(){return e.expandCode("tail",e.state.diffContent.length)}})},0),Object(se.jsx)("td",{className:[a.lineNumber,a.diffLabelTop,a.marker].join(" ")},1),Object(se.jsx)("td",{className:[a.diffMarker,a.diffLabelTop,a.marker].join(" ")},2),Object(se.jsx)("td",{className:[a.code,a.diffLabelTop,a.marker].join(" "),children:Object(se.jsx)(Va,{code:""})},3)])));return t.map((function(e,t){return Object(se.jsx)("tr",{children:e},t)}))}},{key:"render",value:function(){var e=this.props,t=e.renderSideBySide,a=e.classes;return Object(se.jsxs)("table",{className:a.table,children:[t?Object(se.jsxs)("colgroup",{children:[Object(se.jsx)("col",{className:this.props.classes.lineNumber}),Object(se.jsx)("col",{className:this.props.classes.diffMarker}),Object(se.jsx)("col",{}),Object(se.jsx)("col",{className:this.props.classes.lineNumber}),Object(se.jsx)("col",{className:this.props.classes.diffMarker}),Object(se.jsx)("col",{})]}):Object(se.jsxs)("colgroup",{children:[Object(se.jsx)("col",{className:this.props.classes.lineNumber}),Object(se.jsx)("col",{className:this.props.classes.lineNumber}),Object(se.jsx)("col",{className:this.props.classes.diffMarker}),Object(se.jsx)("col",{})]}),Object(se.jsx)("tbody",{children:this.makeLines()})]})}}]),a}(r.a.Component),_i=Object(N.b)(Object(S.a)((function(e){return{table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"},diffLabelTop:{color:e.palette.text.light},diffLabel:{height:e.spacing(4),color:e.palette.text.light,"& code":{lineHeight:e.spacing(4)+"px"}},lineLabelButton:{width:e.spacing(6),height:e.spacing(2),padding:"0 !important",overflow:"hidden",marginTop:"-5px",borderRadius:0},lineLabel:{width:e.spacing(6),padding:0,verticalAlign:"top",userSelect:"none"},lineNumber:{width:e.spacing(6),padding:"0 "+e.spacing(1)+"px",textAlign:"right",verticalAlign:"top",userSelect:"none",color:e.palette.text.lighter},diffMarker:{width:e.spacing(2),textAlign:"center",padding:"0",verticalAlign:"top",userSelect:"none",color:e.palette.text.light},code:{verticalAlign:"top",overflowWrap:"break-word"},lineNumberAddition:{backgroundColor:e.palette.background.additionDark},lineNumberDeletion:{backgroundColor:e.palette.background.deletionDark},lineNumberMarker:{backgroundColor:e.palette.background.diffLabelDark},addition:{backgroundColor:e.palette.background.addition},deletion:{backgroundColor:e.palette.background.deletion},marker:{backgroundColor:e.palette.background.diffLabel},disabled:{backgroundColor:"#fcfdfe"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{expandStatus:e.DrawerStates.expandStatus}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(ki)))),Ei=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getDisplayMode",value:function(e){return e.original.object&&e.original.object.oversize||e.modified.object&&e.modified.object.oversize?D.obejctDiffDisplayType.oversize:e.original.name&&e.modified.name&&e.original.name!==e.modified.name||e.original.mode&&e.modified.mode&&e.original.mode!==e.modified.mode?D.obejctDiffDisplayType.infoChange:"text"===e.type?D.obejctDiffDisplayType.textChange:"binary"===e.type&&(e.original.object&&e.original.object.mime.match(/^image/)||e.modified.object&&e.modified.object.mime.match(/^image/))?D.obejctDiffDisplayType.imageChange:"oversize"===e.type?D.obejctDiffDisplayType.oversize:D.obejctDiffDisplayType.unknown}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.intl,i=e.fileDiffInfo,n=e.repository,s=e.renderSideBySide,o=e.layoutUpdateTimeStamp,c=e.showFullFile,l=this.getDisplayMode(i);return Object(se.jsx)(k.a,{container:!0,children:Object(se.jsxs)(k.a,{item:!0,xs:12,className:t.detail,children:[l===D.obejctDiffDisplayType.imageChange&&Object(se.jsxs)(k.a,{container:!0,spacing:0,className:t.file,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:i.original.object?Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)("img",{src:"data:"+i.original.object.mime+";base64,"+i.original.object.base64Encoded,className:t.oldImage}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.imagelegend,children:[z(i.original.object.size,"Bytes")," | W: ",i.original.object.width,"px | H: ",i.original.object.height,"px"]})]}):Object(se.jsx)(w.a,{variant:"body1",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:i.modified.object?Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)("img",{src:"data:"+i.modified.object.mime+";base64,"+i.modified.object.base64Encoded,className:t.newImage}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.imagelegend,children:[z(i.modified.object.size,"Bytes")," | W: ",i.modified.object.width,"px | H: ",i.modified.object.height,"px"]})]}):Object(se.jsx)(w.a,{variant:"body1",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})})})]}),l===D.obejctDiffDisplayType.infoChange&&Object(se.jsxs)(w.a,{variant:"body2",component:"div",align:"center",children:[i.original.name!==i.modified.name&&Object(se.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.unknown,children:["File name changed from ",i.original.name," to ",i.modified.name]}),i.original.mode!==i.modified.mode&&Object(se.jsxs)(w.a,{variant:"body2",component:"div",align:"center",className:t.unknown,children:["File mode changed from ",i.original.mode," to ",i.modified.mode]})]}),l===D.obejctDiffDisplayType.textChange&&Object(se.jsx)(_i,{fileDiffInfo:i,repository:n,renderSideBySide:s,layoutUpdateTimeStamp:o,showFullFile:c}),l===D.obejctDiffDisplayType.unknown&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileTypeNotSupport"})}),l===D.obejctDiffDisplayType.empty&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileContentEmpty"})}),l===D.obejctDiffDisplayType.oversize&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:t.unknown,children:a.formatMessage({id:"message.fileContentOversize"})})]})})}}]),a}(r.a.Component),Ti=Object(N.b)(Object(S.a)((function(e){return{icon:{color:e.palette.text.lighter},icon2:{color:e.palette.primary.main},fileInfo:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(3),background:e.palette.background.main,border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px "+e.spacing(.5)+"px 0 0",display:"flex",alignItems:"center"},editorBg:{background:"#1e1e1e"},detail:{overflow:"hidden",border:"1px solid "+e.palette.border,borderRadius:"0 0 "+e.spacing(.5)+"px "+e.spacing(.5)+"px",borderTop:"0px"},mediaFile:{display:"block",margin:"auto",marginTop:e.spacing(5),marginBottom:e.spacing(5),maxWidth:"80%"},oldImage:{display:"block",marginTop:e.spacing(5),border:"1px solid "+e.palette.error.main,padding:e.spacing(2),marginLeft:"auto",marginRight:"auto",maxWidth:"80%"},newImage:{display:"block",marginTop:e.spacing(5),border:"1px solid "+e.palette.success.dark,marginLeft:"auto",padding:e.spacing(2),marginRight:"auto",maxWidth:"80%"},imagelegend:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(8)},opacity1:{color:e.palette.text.lighter,cursor:"not-allowed"},height0:{height:"0px",paddingTop:"0px !important",paddingBottom:"0px !important",overflow:"hidden"},unknown:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(16)},markdown:{boxSizing:"border-box",minWidth:"200px",maxWidth:"980px",margin:"0 auto",padding:"45px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{expandStatus:e.DrawerStates.expandStatus}}),(function(e,t){return{}}))(Ei)))),Ai=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a),i=t.call(this,e);var r=e.intl;return i.state={panelIsOpen:!0,showFullFile:!1,copyPath:"label.copyPath",viewFile:r.formatMessage({id:"label.browserFile"}),showFullFileTitle:r.formatMessage({id:"label.expandFullFile"})},i.fileType={text:1,image:2,video:3},i}return Object(d.a)(a,[{key:"viewFileDetail",value:function(e){this.props.history.push(e)}},{key:"toggleFullFile",value:function(e){e.stopPropagation();var t=this.props.intl;this.setState({showFullFile:!this.state.showFullFile,showFullFileTitle:this.state.showFullFile?t.formatMessage({id:"label.expandFullFile"}):t.formatMessage({id:"label.showDiffOnly"})})}},{key:"copyPath",value:function(e,t){e.stopPropagation(),this.copySomething(t),this.setState({copyPath:"label.copied"})}},{key:"copySomething",value:function(e){var t=window.document.createElement("input");t.setAttribute("value",e),t.setAttribute("type","text"),window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}},{key:"fileTypeDeal",value:function(e){var t=this.fileType,a=t.unknow,i=t.text,r=t.image,n=t.video;return-1!==e.type.indexOf("text")||-1!==e.type.indexOf("application/xml")?i:-1!==e.type.indexOf("image")?r:-1!==e.type.indexOf("video/mp4")?n:a}},{key:"fileIconDeal",value:function(e){var t=this.fileType,a=t.image,i=t.video;switch(e){case a:return Be.g;case i:return Be.m;default:return be.n}}},{key:"togglePanel",value:function(){this.setState({panelIsOpen:!this.state.panelIsOpen})}},{key:"render",value:function(){var e=this,t=this.props,a=t.fileDiffInfo,i=t.renderSideBySide,r=t.currentRepositoryKey,n=t.modifiedRepositoryKey,s=t.classes,o=t.intl,c=t.match,l=t.layoutUpdateTimeStamp,p=t.fileTreeIsOpen,d=this.props,u=d.parentHash,m=d.hash,h=this.fileType,g=h.text,f=h.image,b=this.state,j=b.panelIsOpen,O=b.copyPath,v=b.viewFile,y=b.showFullFile,x=b.showFullFileTitle;u=u?u[0].substr(0,8):"",m=m?m.substr(0,8):"";var C=V(c.params.groupName,c.params.repositoryName,"files",u,a.original.name),S=V(c.params.groupName,c.params.repositoryName,"files",m,a.modified.name),R=this.fileTypeDeal(a);return Object(se.jsxs)(Si.a,{expanded:j,onChange:function(t){return e.togglePanel(t)},square:Boolean(!1),children:[Object(se.jsx)(Ri.a,{expandIcon:Object(se.jsx)(wi.a,{}),"aria-controls":"panel1a-content",className:s.panelSummary,children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsxs)(k.a,{item:!0,xs:p?8:7,children:[Object(se.jsxs)(w.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},className:s.fileName,component:"span",children:[Object(se.jsx)(fe.a,{icon:this.fileIconDeal(R)})," \xa0\xa0",a.original.name===a.modified.name?a.modified.name:a.original.name+" -> "+a.modified.name," \xa0\xa0",Object(se.jsxs)(w.a,{variant:"body2",component:"span",children:[a.original.mode===a.modified.mode?"":a.original.mode+" -> "+a.modified.mode," \xa0"]})]}),Object(se.jsx)(Ae,{label:O,icon:be.i,className:s.icon,onClick:function(t){e.copyPath(t,a.modified.name),t.stopPropagation()},onMouseLeave:function(){window.setTimeout((function(){return e.setState({copyPath:"label.copyPath"})}),100)}})]}),R===g&&Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"span",className:s.add,children:["+",a.diff.additions]}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:s.delete,children:a.diff.deletions}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:s.separator,children:"|"}),Object(se.jsx)(_e.a,{title:x,disableFocusListener:!0,placement:"top",children:Object(se.jsx)(_.a,{onClick:function(t){return e.toggleFullFile(t)},children:Object(se.jsx)(fe.a,{icon:y?Be.c:be.m})})}),r===n&&m&&Object(se.jsx)(_e.a,{title:v+"@"+m,disableFocusListener:!0,placement:"top",children:Object(se.jsx)(_.a,{onClick:function(t){return e.viewFileDetail(S)},children:Object(se.jsx)(fe.a,{icon:be.n})})})]}),R===f&&r===n&&u&&m&&Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(_e.a,{title:v+"@"+u,disableFocusListener:!0,placement:"top",children:Object(se.jsxs)(_.a,{className:s.viewOldFileBtn,onClick:function(t){return e.viewFileDetail(C)},children:[Object(se.jsx)(fe.a,{icon:be.n}),"\xa0\xa0",o.formatMessage({id:"label.browserUnchangedFIle"})," \xa0","@"+u]})}),Object(se.jsx)(_e.a,{title:v+"@"+m,disableFocusListener:!0,placement:"top",children:Object(se.jsxs)(_.a,{className:s.viewFileBtn,onClick:function(t){return e.viewFileDetail(S)},children:[Object(se.jsx)(fe.a,{icon:be.n}),"\xa0\xa0",o.formatMessage({id:"label.browserFile"}),"\xa0","@"+m]})})]})]})}),Object(se.jsx)(Ni.a,{className:s.panelDetail,children:Object(se.jsx)(Ti,{fileDiffInfo:a,repository:r,renderSideBySide:i,layoutUpdateTimeStamp:l,showFullFile:y})})]})}}]),a}(i.Component),Di=Object(N.b)(Object(S.a)((function(e){return{add:{color:e.palette.success.main,cursor:"default",marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,cursor:"default",marginLeft:e.spacing(1),marginRight:e.spacing(1)},viewFileBtn:{minWidth:e.spacing(24)},viewOldFileBtn:{minWidth:e.spacing(27)},fileName:{cursor:"default",marginTop:e.spacing(.5)},viewFile:{marginLeft:e.spacing(2)},panelSummary:{border:"1px solid "+e.palette.border,position:"sticky",top:e.spacing(16),zIndex:7},panelDetail:{zIndex:e.spacing(1),overflow:"hidden"},separator:{color:e.palette.border},icon:{color:e.palette.primary.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ai)))),Ii=0,Fi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).fileBrowser={changeFilesTmp:null,treeFiles:null,listFiles:null},i.state={count:0},i.initChangeFiles(),i.listFilesRef=r.a.createRef(),i}return Object(d.a)(a,[{key:"initChangeFiles",value:function(){var e=this.props.changeFiles;if(!e||!e.length)return!1;e.map((function(e,t){var a=e.name.lastIndexOf("/");return e.used=!1,e.dirname=-1!==a?e.name.slice(0,a):"",e.filename=-1!==a?e.name.slice(a+1):e.name,!0})),this.initTreeFiles(),this.initListFiles()}},{key:"initTreeFiles",value:function(){var e=this,t=this.props.changeFiles;return!(!t||!t.length)&&(this.fileBrowser.treeFiles={"/":!0,"/open":!0},this.fileBrowser.changeFilesTmp=Object(T.a)(t),this.fileBrowser.changeFilesTmp.sort((function(e,t){return e.dirname!==t.dirname&&e.dirname.indexOf(t.dirname)>-1?-1:0})),this.fileBrowser.changeFilesTmp.map((function(t,a){var i=e.fileBrowser.treeFiles;t.dirname&&t.dirname.split("/").map((function(e,t){return!!e&&(void 0===i[e]&&(i[e]={"/":!0,"/open":!0}),i=i[e],!0)}));return i[t.filename]=Object(y.a)({"/":!1},t),!0})),!0)}},{key:"initListFiles",value:function(){var e=this,t=this.props.changeFiles;return!(!t||!t.length)&&(this.fileBrowser.listFiles=[],t.map((function(a,i){if(a.used)return a;a.used=!0;var r={name:a.dirname,files:[a]};return t.map((function(e,t){return e.used?e:(e.dirname===r.name&&(e.used=!0,r.files.push(e)),!0)})),e.fileBrowser.listFiles.push(r),!0})),!0)}},{key:"treeFiles",value:function(e,t,a){var i=this,n=this.props,s=n.fileClick,o=n.classes,c=Object.keys(t),l=0;return!(c.length<3)&&(c.map((function(e,a){return l+="/"===e||"/open"===e||t[e]["/"]?0:1,!0})),Object(se.jsx)(r.a.Fragment,{children:l>0||c.length>3?Object(se.jsxs)(w.a,{component:"div",children:[Object(se.jsxs)(w.a,{component:"div",className:o.tree,style:this.calcPadding(a,!0),onClick:function(e){t["/open"]=!t["/open"],i.setState({count:i.state.count+1})},children:[Object(se.jsx)(fe.a,{icon:t["/open"]?Be.f:Be.e}),"\xa0\xa0",e]}),t["/open"]&&c.map((function(e,n){return"/"!==e&&"/open"!==e&&Object(se.jsx)(r.a.Fragment,{children:t[e]["/"]?i.treeFiles(e,t[e],a+1):Object(se.jsxs)(w.a,{component:"div",className:o.tree,onClick:function(a){return s(t[e].hash)},style:i.calcPadding(a,!1),children:[Object(se.jsx)(fe.a,{icon:Be.d}),"\xa0\xa0",t[e].filename,Object(se.jsxs)(w.a,{component:"span",className:o.delete,children:["-",t[e].delete]}),Object(se.jsxs)(w.a,{component:"span",className:o.add,children:["+",t[e].add,"\xa0"]})]})},n)}))]}):c.map((function(n,s){return"/"!==n&&"/open"!==n&&Object(se.jsx)(r.a.Fragment,{children:i.treeFiles(("/"!==e?e+"/":"")+n,t[n],a)},s)}))}))}},{key:"calcPadding",value:function(e,t){return{paddingLeft:(2*e+(t?1:3))*Ii+"px"}}},{key:"listFiles",value:function(){var e=this,t=this.props,a=t.fileClick,i=t.classes,r=this.fileBrowser.listFiles;return!(!r||!r.length)&&Object(se.jsx)(w.a,{component:"div",ref:this.listFilesRef,children:r.map((function(t,r){return Object(se.jsxs)(w.a,{component:"div",className:i.listSub,children:[Object(se.jsxs)(w.a,{component:"div",className:i.listDir2,children:[e.calcDir(t.name),"/"]}),Object(se.jsxs)(w.a,{component:"div",className:i.listDir,children:[t.name,"/"]}),t.files&&t.files.map((function(e,t){return Object(se.jsxs)(w.a,{component:"div",className:i.listFile,onClick:function(t){return a(e.hash)},children:[Object(se.jsx)(fe.a,{icon:Be.i}),"\xa0\xa0",e.filename,Object(se.jsxs)(w.a,{component:"span",className:i.delete,children:["-",e.delete]}),Object(se.jsxs)(w.a,{component:"span",className:i.add,children:["+",e.add,"\xa0"]})]},t)}))]},r)}))})}},{key:"calcDir",value:function(e){if(!e)return"";for(var t=e.split("/"),a=t.length-2;t.join("/").length>32&&a>0;)t[a--]="..";return t.join("/")}},{key:"listFilesScroll",value:function(e){if(this.props.treeView)return!1;for(var t=e.target.scrollTop,a=0,i=0,r=5*Ii,n=this.listFilesRef.current.children,s=0;s<n.length;s++)i+=n[s].clientHeight,t>=a&&t<i?t>i-r?(n[s].style="position: relative",n[s].children[0].style="top: "+(n[s].clientHeight-r)+"px"):(n[s].style="position: static",n[s].children[0].style="top: 0; width: "+n[s].clientWidth+"px"):(n[s].style="position: relative",n[s].children[0].style="top: 0"),a+=n[s].clientHeight}},{key:"render",value:function(){var e=this,t=this.props,a=t.treeView,i=t.classes;return this.initChangeFiles(),Object(se.jsx)(k.a,{container:!0,className:i.fileBrowserTop,children:Object(se.jsx)(k.a,{item:!0,xs:12,className:i.fileBrowser,onScroll:function(t){return e.listFilesScroll(t)},children:a?this.treeFiles("/",this.fileBrowser.treeFiles,0):this.listFiles()})})}}]),a}(r.a.Component),Pi=Object(N.b)(Object(S.a)((function(e){return Ii=parseInt(e.spacing(1)),{fileBrowserTop:{position:"relative",height:"100%"},fileBrowser:{maxHeight:"100%",overflow:"auto",overflowX:"hidden",background:e.palette.background.light},tree:{paddingRight:e.spacing(1),lineHeight:e.spacing(4.5)+"px",cursor:"pointer","& > *":{lineHeight:e.spacing(4.5)+"px"},"&:hover":{background:e.palette.background.dark}},listSub:{position:"relative"},listDir:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(1),background:e.palette.background.light},listDir2:{position:"absolute",width:"100%",left:"0",top:"0",paddingLeft:e.spacing(1),lineHeight:e.spacing(5)+"px",boxSizing:"border-box",background:e.palette.background.light,overflowX:"hidden"},listFile:{lineHeight:e.spacing(5)+"px",paddingLeft:e.spacing(3),paddingRight:e.spacing(1),cursor:"pointer","& > *":{lineHeight:e.spacing(5)+"px"},"&:hover":{background:e.palette.background.dark}},add:{float:"right",color:e.palette.success.main},delete:{float:"right",color:e.palette.error.main}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Fi)))),Li=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).mountedFlag=!1,i.observed={currentRepositoryKey:null},i.state={changedFilesInfo:[],diffViwerLayoutUpdateTimestamp:0,fileTreeIsOpen:!1,fileTreeGridNumber:3,effectFileCount:0,fileDiff:[],renderSideBySide:!0,addLine:0,deleteLine:0,pending:!0,large:!1},i}return Object(d.a)(a,[{key:"toggleDiffShow",value:function(){this.setState({renderSideBySide:!this.state.renderSideBySide,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"toggleFileTree",value:function(){this.setState({fileTreeIsOpen:!this.state.fileTreeIsOpen,renderSideBySide:this.state.fileTreeIsOpen,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"jumpToAnchor",value:function(e){window.location.href=window.location.href.split("#")[0]+"#"+e}},{key:"componentDidMount",value:function(){this.mountedFlag=!0,this.observed.currentRepositoryKey=this.props.currentRepositoryKey,this.setState({pending:!0}),this.getData(this.props)}},{key:"getFileTreeInfo",value:function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a];i.modified&&i.modified.name&&t.push({name:i.modified.name,add:i.diff.additions,delete:Math.abs(i.diff.deletions),hash:i.modified.sha})}return t}},{key:"getData",value:function(e){var t=this;if(!e.currentRepositoryKey||!e.childHash||!e.parentHash.length)return!1;zt.fileChanges({repository:e.currentRepositoryKey,original:e.parentHash[0],modified:e.parentHash.length>1?e.parentHash[1]:e.childHash}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){if(e.data.large)return t.setState({effectFileCount:e.data.count,large:!0,pending:!1}),!1;var a=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),i=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0),r=t.getFileTreeInfo(e.data.detail);t.setState({changedFilesInfo:r,effectFileCount:e.data.count,fileDiff:e.data.detail,addLine:a,deleteLine:i,pending:!1})}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.currentRepositoryKey!==e.currentRepositoryKey||this.props.childHash!==e.childHash?(this.setState({pending:!0}),this.getData(e),!1):this.props.parentHash[0]===e.parentHash[0]||(this.setState({pending:!0}),this.getData(e),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.effectFileCount,i=t.addLine,n=t.deleteLine,s=t.fileDiff,o=t.renderSideBySide,c=t.pending,l=t.fileTreeIsOpen,p=t.fileTreeGridNumber,d=t.changedFilesInfo,u=t.diffViwerLayoutUpdateTimestamp,m=t.large,h=this.props,g=h.classes,f=h.intl,b=h.childHash,j=h.parentHash,O=h.currentRepositoryKey;return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",className:g.stickyPosition,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(w.a,{variant:"body1",className:g.diffTitle,children:[f.formatMessage({id:"label.fileModification"})," \xa0",c?"":"("+a+")"]})}),Object(se.jsx)(k.a,{item:!0,xs:6,container:!0,justifyContent:"flex-end",alignItems:"center",children:Object(se.jsxs)(k.a,{item:!0,className:g.content,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"span",children:[f.formatMessage({id:"label.allFiles"})," : \xa0",c?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):a]}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:g.add,children:c?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):"+"+i}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:g.delete,children:c?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):n}),Object(se.jsxs)(Aa.a,{variant:"outlined",color:"primary",size:"small",children:[Object(se.jsx)(_.a,{onClick:function(t){return e.toggleDiffShow(t)},children:o?"inline":"side-by-side"}),Object(se.jsx)(_.a,{onClick:function(t){return e.toggleFileTree(t)},children:l?f.formatMessage({id:"label.closeFileTree"}):f.formatMessage({id:"label.openFileTree"})})]})]})})]}),Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:l?p:12,className:l?g.fileTreeSticky:g.fileTreeHide,children:Object(se.jsx)(Pi,{changeFiles:d,treeView:Boolean(!1),fileClick:function(t){return e.jumpToAnchor(t)}})}),Object(se.jsxs)(k.a,{item:!0,xs:l?12-p:12,children:[!c&&s&&s.length>0&&Object(se.jsx)(k.a,{container:!0,children:s.map((function(e,t){return Object(se.jsx)(k.a,{item:!0,xs:12,id:e.modified.sha,className:g.fileDiffPanel,children:Object(se.jsx)(Di,{modifiedRepositoryKey:O,fileDiffInfo:e,renderSideBySide:o,hash:b,parentHash:j,layoutUpdateTimeStamp:u,fileTreeIsOpen:l},t)},t)}))}),!m&&(c||!s||!s.length)&&Object(se.jsx)(k.a,{container:!0,children:Object(se.jsx)(Lt,{imageName:"branches-empty.png",title:f.formatMessage({id:"message._S_listEmpty"},{s:f.formatMessage({id:"label.file"})}),pending:c})}),m&&Object(se.jsx)(k.a,{container:!0,className:g.loading,children:Object(se.jsx)(w.a,{variant:"body1",component:"span",children:f.formatMessage({id:"message.diffFileToMany"})})})]})]})]})}}]),a}(i.Component),Bi=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{add:{color:e.palette.success.main,marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,marginLeft:e.spacing(1),marginRight:e.spacing(1)},changedFile:{color:e.palette.primary.main,paddingBottom:e.spacing(1),backgroundColor:"transparent",fontSize:"1.25rem","&:hover":{backgroundColor:"transparent",boxShadow:"none"}},typography:{padding:e.spacing(2)},changedFileList:{width:"100%",maxWidth:e.spacing(113),backgroundColor:e.palette.background.paper},paper:{minWidth:e.spacing(38),width:"100%"},expansionMargin0:{margin:0},loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},content:{zIndex:e.spacing(1),backgroundColor:e.palette.background.light},stickyPosition:{position:"sticky",top:e.spacing(8),zIndex:e.spacing(1),padding:e.spacing(2)+"px 0px",backgroundColor:e.palette.background.light},fileTreeHide:{display:"none"},fileTreeSticky:{position:"sticky",top:e.spacing(14.5),maxHeight:window.innerHeight-116+"px"},diffTitle:{lineHeight:e.spacing(4)+"px"},fileDiffPanel:{marginBottom:e.spacing(3)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Li))))),Ui=Object(S.a)((function(e){return{root:{width:e.spacing(3),height:e.spacing(3)}}}))(Fe.a),Gi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).mountedFlag=!1,i.state={currentGroup:e.match.params.groupName?e.match.params.groupName:"",currentRepository:e.match.params.repositoryName?e.match.params.repositoryName:"",commitDetail:{},commiterInfo:{name:""},optionAnchorEl:null,parentHash:[],parentHashShow:!1},i.mountedFlag=!1,i}return Object(d.a)(a,[{key:"openOptionPopover",value:function(e){this.setState({optionAnchorEl:e.currentTarget})}},{key:"closeOptionPopover",value:function(){this.setState({optionAnchorEl:null})}},{key:"componentDidMount",value:function(){this.mountedFlag=!0,(0,this.props.closeDrawer)(),this.getData(this.props,this.state)}},{key:"componentWillUnmount",value:function(){this.mountedFlag=!1}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.match.params.hash!==e.match.params.hash||this.props.currentRepositoryKey!==e.currentRepositoryKey?(this.getData(e,t),!1):JSON.stringify(this.props.currentRepositoryConfig)===JSON.stringify(e.currentRepositoryConfig)||(this.getData(e,t),!1)}},{key:"copyHash",value:function(e){var t=this.props.intl;this.copySomething(e),this.setState({copyHash:t.formatMessage({id:"label.copied"})})}},{key:"copySomething",value:function(e){var t=window.document.createElement("input");t.setAttribute("value",e),t.setAttribute("type","text"),window.document.body.appendChild(t),t.select(),document.execCommand("copy"),window.document.body.removeChild(t)}},{key:"getData",value:function(e,t){var a=this;if(!e.match.params.hash||!e.currentRepositoryKey||!e.currentRepositoryConfig.repository)return!1;zt.commitDetail({repository:e.currentRepositoryKey,commitSHA:e.match.params.hash}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){var i=t.data;if(!i)return!1;if(e.currentRepositoryConfig){var r=Z(e.currentRepositoryConfig.members,i.email),n=i.parent.split(" ");a.setState({commitDetail:i,commiterInfo:r,parentHash:n})}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.commitDetail,i=t.commiterInfo,n=t.currentRepository,s=t.currentGroup,o=t.parentHash,c=t.parentHashShow,l=this.props,p=l.classes,d=l.currentRepositoryKey,u=l.history,m=l.intl,h=l.match;return Object(se.jsx)(r.a.Fragment,{children:Object(se.jsx)(k.a,{container:!0,spacing:3,children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(M.a,{elevation:1,children:[Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:a.commit}),Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:p.oneline,children:[Object(se.jsx)(Ui,{src:i.icon?D.HOSTS.PGYER_AVATAR_HOST+i.icon:"/static/images/default_avatar.png"}),"\xa0\xa0",Object(se.jsxs)(w.a,{component:"span",variant:"body2",children:[i.name,"\xa0\xa0",m.formatMessage({id:"label.editIn"}),"\xa0"]}),a.time&&Object(se.jsx)(w.a,{component:"span",variant:"body2",children:Object(se.jsx)(Mt,{timestamp:a.time})})]})]}),Object(se.jsxs)(k.a,{item:!0,className:p.oneline,children:[Object(se.jsxs)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.setState({parentHashShow:!c})},children:[m.formatMessage({id:"label.detail"}),Object(se.jsx)(fe.a,{icon:be.G,className:[p.icon,c?p.transform:""].join(" ")})]}),a.sha&&Object(se.jsx)(k.a,{className:p.ml16,children:Object(se.jsx)(Za,{hash:a.sha.substr(0,8)})}),Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:p.ml16,onClick:function(){return u.push(V(s,n,"files",h.params.hash,""))},children:m.formatMessage({id:"label.browserFile"})})]})]}),Object(se.jsx)(Ci,{show:c,parentHash:o,currentHash:h.params.hash,currentGroup:s,currentRepository:n,currentRepositoryKey:d}),Object(se.jsx)(k.a,{container:!0,spacing:2,justifyContent:"space-between",children:Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(Bi,{id:"FileDiffDetail",parentHash:o,childHash:h.params.hash,rKey:d})})})]})})})})}}]),a}(r.a.Component),Hi=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{oneline:{display:"flex",alignItems:"center"},ml16:{marginLeft:e.spacing(2)},icon:{marginLeft:e.spacing(1),fontSize:e.spacing(1),color:e.palette.text.main},transform:{transform:"rotate(180deg)"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{closeDrawer:function(){e({type:"drawer.expandStatus.close"})},dispatchEvent:function(t){e(t)}}}))(Gi))))),qi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.repositoryInfo,a=e.reviewers,i=e.classes;return Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:a.length>0&&a.map((function(e,a){var r=t.members.filter(U.id(e.user))[0];return Object(se.jsxs)(k.a,{item:!0,className:i.reviewer,children:[Object(se.jsx)(Fe.a,{className:i.reviewerIcon,src:D.HOSTS.PGYER_AVATAR_HOST+r.icon}),Object(se.jsx)(fe.a,{icon:e.isReview?be.K:be.H,className:[i.isReview,e.isReview?i.reviewed:""].join(" ")})]},a)}))})}}]),a}(r.a.Component),zi=Object(S.a)((function(e){return{reviewer:{position:"relative"},reviewerIcon:{marginLeft:"-8px",borderRadius:"50%",boxSizing:"border-box",width:e.spacing(4),height:e.spacing(4),border:"2px solid "+e.palette.background.light+" !important"},isReview:{right:0,bottom:0,zIndex:"1",fontSize:"12px",borderRadius:"50%",position:"absolute",color:e.palette.text.light,background:e.palette.background.light,border:"2px solid "+e.palette.background.light},reviewed:{color:e.palette.success.main}}}))(Object(h.f)(qi)),Vi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).dataDeal(),i}return Object(d.a)(a,[{key:"dataDeal",value:function(){var e=this.props,t=e.data,a=e.repositoryList,i=e.history;if(!t&&!a.length)return!1;var r=a.filter(U.id(t.targetRepository));if(r.length){var n=r[0];t.targetRepository=n;var s=V(n.group.name,n.name,"commits",encodeURIComponent(t.targetBranch));t.targetLink=Object(se.jsx)(Ja,{to:s,onClick:function(e){return i.push(s)},children:t.targetBranch});var o=V(n.group.name,n.name,"mergerequests",t.number);t.titleLink=Object(se.jsx)(Ja,{to:o,onClick:function(e){return i.push(o)},children:t.title})}else t.targetLink=t.targetBranch,t.titleLink=t.targetBranch;var c=a.filter(U.id(t.sourceRepository));if(c.length){var l=c[0];t.sourceRepository=l;var p=V(l.group.name,l.name,"commits",encodeURIComponent(t.sourceBranch));t.sourceLink=Object(se.jsx)(Ja,{to:p,onClick:function(e){return i.push(p)},children:t.sourceBranch}),t.updater=Z(l.members,t.commit.email).name}else if(t.sourceLink=t.sourceBranch,r.length){var d=r[0];t.updater=Z(d.members,t.commit.email).name}else t.updater=t.commit.email}},{key:"render",value:function(){var e=this.props,t=e.isRepository,a=e.data,i=e.classes,r=e.intl,n=D.mergeRequestStatus;return Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:i.item,children:[Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"div",className:[i.oneline,i.title].join(" "),children:[a.titleLink,"\xa0\xa0\xa0\xa0",a.status===n.merged&&Object(se.jsx)(Ye,{color:"success",icon:be.K,text:r.formatMessage({id:"message.merged"})}),a.status===n.closed&&Object(se.jsx)(Ye,{color:"error",icon:Be.j,text:r.formatMessage({id:"message.closed"})})]}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",className:i.oneline,children:[Object(se.jsx)(w.a,{component:"span",children:!t&&a.targetRepository.name}),Object(se.jsxs)(w.a,{component:"span",children:["!",a.number]}),"\xa0\xb7\xa0",Object(se.jsxs)(w.a,{component:"span",className:i.textMain,children:[Object(se.jsx)(fe.a,{icon:be.v}),"\xa0",a.sourceLink,"\xa0",Object(se.jsx)(fe.a,{icon:Be.b}),"\xa0",a.targetLink]}),"\xa0\xb7\xa0",Object(se.jsxs)(w.a,{variant:"body2",component:"span",children:[a.updater,"\xa0\xa0",r.formatMessage({id:"label.editIn"}),":\xa0\xa0",Object(se.jsx)(Mt,{timestamp:1*a.commit.time})]})]})]}),Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(k.a,{item:!0,className:i.reviewers,children:a.reviewers.length>0?Object(se.jsx)(zi,{reviewers:a.reviewers,repositoryInfo:a.targetRepository}):Object(se.jsx)(k.a,{item:!0,children:"\xa0"})}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",children:[r.formatMessage({id:"label.updateTime"}),":\xa0\xa0",Object(se.jsx)(Mt,{timestamp:1*a.update})]})]})]})}}]),a}(r.a.Component),Wi=Object(N.b)(Object(S.a)((function(e){return{item:{padding:e.spacing(1.5)+"px "+e.spacing(3)+"px",borderTop:"1px solid "+e.palette.border},oneline:{lineHeight:e.spacing(3.5)+"px"},title:{"& a":{color:e.palette.text.main+" !important",fontWeight:600}},textMain:{"& a":{color:e.palette.text.main+" !important"}},reviewers:{marginBottom:e.spacing(.5)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{}}))(Vi)))),Ki=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!0,isGlobal:!e.match.params.groupName,isRepository:null,tabValue:0,keyword:"",sortDesc:!0,page:1,pagesize:10,noMore:!1,mrList:null,relatedRepository:[]},i.observed={keyword:""},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.props,this.state,!1)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props.currentGroupConfig)!==JSON.stringify(e.currentGroupConfig)||JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig)?(this.getData(e,t,!1),!1):this.state.page===t.page||t.pending?this.state.sortDesc!==t.sortDesc?(this.getData(e,t,!0),!1):this.state.tabValue===t.tabValue||(this.getData(e,t,!0),!1):(this.setState({pending:!0}),this.getData(e,t,!1),!1)}},{key:"getData",value:function(e,t,a){var i=this;a&&(this.observed.keyword=t.keyword,this.setState({pending:!0,page:1,mrList:null}));var r={status:t.tabValue,keyword:t.keyword,sort:t.sortDesc?"desc":"asc",page:a?1:t.page,pagesize:t.pagesize};e.currentRepositoryConfig.repository?(r.repository=e.currentRepositoryConfig.repository.id,zt.mergeRequests(r).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){i.getDataDeal(e,!0)}))):e.currentGroupConfig.group?(r.group=e.currentGroupConfig.group.id,pa.mergeRequests(r).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){i.getDataDeal(e,!1)}))):t.isGlobal&&zt.relatedMergeRequests(r).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){i.getDataDeal(e,!1)}))}},{key:"getDataDeal",value:function(e,t){e.code?this.setState({mrList:[]}):this.setState({pending:!1,isRepository:t,mrList:[].concat(Object(T.a)(this.state.mrList?this.state.mrList:[]),Object(T.a)(this.state.isGlobal?e.data.mergeRequests:e.data)),noMore:(this.state.isGlobal?e.data.mergeRequests.length:e.data.length)<this.state.pagesize,relatedRepository:e.data.relatedRepository})}},{key:"searchMergeRequests",value:function(){this.observed.keyword!==this.state.keyword&&this.getData(this.props,this.state,!0)}},{key:"getTabs",value:function(){var e=this.state,t=e.isRepository,a=e.isGlobal,i=e.relatedRepository,r=this.props,n=r.repositoryList,s=r.currentGroupConfig,o=r.currentRepositoryConfig,c=r.intl,l=D.mergeRequestStatus,p=[];if(p[0]=c.formatMessage({id:"label.all"}),p[l.open]=c.formatMessage({id:"message.opened"}),p[l.merged]=c.formatMessage({id:"message.merged"}),p[l.closed]=c.formatMessage({id:"message.closed"}),this.observed.keyword)return p;var d=[];return d[0]=0,d[l.open]=0,d[l.merged]=0,d[l.closed]=0,null!==t&&(t?(d[l.open]=o.repository.mergeRequestCount.open,d[l.merged]=o.repository.mergeRequestCount.merged,d[l.closed]=o.repository.mergeRequestCount.closed):a?n.map((function(e,t){return i.map((function(t){return e.id===t&&(d[l.open]+=e.mergeRequestCount.open,d[l.merged]+=e.mergeRequestCount.merged,d[l.closed]+=e.mergeRequestCount.closed),!0})),!0})):n.map((function(e,t){return e.group&&s.group&&e.group.id===s.group.id&&(d[l.open]+=e.mergeRequestCount.open,d[l.merged]+=e.mergeRequestCount.merged,d[l.closed]+=e.mergeRequestCount.closed),!0})),d[0]=d[l.open]+d[l.merged]+d[l.closed]),p[0]+="("+d[0]+")",p[l.open]+="("+d[l.open]+")",p[l.merged]+="("+d[l.merged]+")",p[l.closed]+="("+d[l.closed]+")",p}},{key:"render",value:function(){var e=this,t=this.props,a=t.repositoryList,i=t.classes,n=t.history,s=t.intl,o=this.state,c=o.pending,l=o.isRepository,p=o.tabValue,d=o.sortDesc,u=o.page,m=o.noMore,h=o.mrList;return Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsxs)(vt,{tabs:this.getTabs(),onChange:function(t,a){return!c&&e.setState({tabValue:a})},currentTab:p,children:[Object(se.jsx)(E.a,{variant:"outlined",className:i.input,placeholder:"",defaultValue:this.state.keyword,onChange:function(t){return e.setState({keyword:t.target.value})},onKeyDown:function(t){13===t.keyCode&&e.searchMergeRequests()},InputProps:{startAdornment:Object(se.jsx)(qt.a,{position:"start",children:Object(se.jsx)(fe.a,{icon:be.z})})}}),"\xa0",Object(se.jsx)(Ae,{label:"label.sort",onClick:function(t){return!c&&e.setState({sortDesc:!d})},className:[i.icon,d?"":i.transform].join(" "),icon:be.B}),Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:i.button,disabled:c,onClick:function(){return n.push(V(n.location.pathname.substr(1),"new"))},children:s.formatMessage({id:"label.createMergeRequest"})})]}),Object(se.jsx)(k.a,{container:!0,children:Object(se.jsx)(k.a,{item:!0,xs:12,className:i.list,children:h?h&&h.length?Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(si,{title:"",children:h.map((function(e,t){return Object(se.jsx)(Wi,{repositoryList:a,isRepository:l,data:e},t)}))}),Object(se.jsx)(k.a,{container:!0,className:i.more,justifyContent:"center",children:Object(se.jsx)(k.a,{item:!0,children:m?Object(se.jsx)(_.a,{size:"small",disabled:!0,children:s.formatMessage({id:"label.noMore"})}):c?Object(se.jsx)(k.a,{container:!0,children:Object(se.jsx)(me.a,{})}):Object(se.jsxs)(_.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(t){return e.setState({page:u+1})},children:[s.formatMessage({id:"label.more"})," \xa0\xa0",Object(se.jsx)(fe.a,{icon:Be.a})]})})})]}):Object(se.jsx)(Lt,{imageName:"mergerequests-empty.png",title:s.formatMessage({id:"message.mergeRequestEmpty"})}):Object(se.jsx)(k.a,{container:!0,spacing:2,className:i.loading,children:Object(se.jsx)(me.a,{})})})})]})}}]),a}(r.a.Component),Ji=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},list:{marginTop:e.spacing(3)},button:{marginLeft:e.spacing(4)},input:{width:e.spacing(30),maxWidth:"100%"},icon:{color:e.palette.text.light},transform:{transform:"rotateX(180deg)"},more:{paddingTop:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ki)))),$i=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={name:"",originRepository:"",targetRepository:"",originBranch:"",targetBranch:"",originLastCommit:{},targetLastCommit:{},targetRepositoryList:[],targetRepositoryBranches:[],originRepositoryBranches:[],originRepositoryInfo:null,targetRepositoryInfo:null,error:!1,groupName:e.match.params.groupName?e.match.params.groupName:"",repositoryName:e.match.params.repositoryName?e.match.params.repositoryName:""},i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(void 0!==this.props.currentRepositoryConfig.repository&&this.props.currentRepositoryKey!==e.currentRepositoryKey)return this.getTargetRepository(),!1;if(JSON.stringify(this.props.currentRepositoryConfig)!==JSON.stringify(e.currentRepositoryConfig))return this.getTargetRepository(),!1;if(this.props.repositoryList!==e.repositoryList){if(this.state.groupName&&!this.state.repositoryName){var i=e.repositoryList.filter(U.groupName(this.state.groupName));i.length>0&&this.getTargetRepository(i[0].id)}return this.state.groupName||this.state.repositoryName||e.repositoryList.length>0&&(this.getInitRepositoryBranches(e.repositoryList[0].id),this.getTargetRepository(e.repositoryList[0].id)),!1}if(this.props.history.listen((function(e){if("/mergerequests/new"===e.pathname)return a.setState({groupName:"",repositoryName:""}),!1})),this.state.originRepository!==t.originRepository&&e.repositoryList.length>0){if(this.state.groupName&&!this.state.repositoryName){var r=e.repositoryList.filter(U.groupName(t.groupName));this.getInitRepositoryBranches(t.originRepository),r.length>0&&this.getTargetRepository(t.originRepository)}else this.state.repositoryName||this.state.groupName||this.state.originRepository?(this.getInitRepositoryBranches(t.originRepository),this.getTargetRepository(t.originRepository)):(this.getInitRepositoryBranches(e.repositoryList[0].id),this.getTargetRepository(t.originRepository));return!1}if(!this.state.originRepository&&!this.state.repositoryName&&!this.state.groupName&&e.repositoryList.length>0)return this.setState({originRepository:e.repositoryList[0].id}),!0;if(!this.state.originRepository&&!this.state.repositoryName&&this.state.groupName&&e.repositoryList.length>0){var n=e.repositoryList.filter(U.groupName(t.groupName));return n.length&&this.getInitRepositoryBranches(n[0].id),!1}return!0}},{key:"componentDidMount",value:function(){this.getTargetRepository()}},{key:"getTargetRepository",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.props.currentRepositoryKey;if(!a&&!t)return!1;zt.targetRepository({repository:a||t}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(i){if(!i.code){var r="",n=i.data;n.map((function(e){return e.forkFlag&&(r=e.rKey),!0})),r||(r=a||t),zt.branchList({repository:r}).then(re.withEventdispatcher(e.props.dispatchEvent)(re.getJSONData)).then((function(i){i.code||e.setState({originRepository:a||t,targetRepository:r,targetRepositoryList:n,targetRepositoryBranches:i.data})}))}}))}},{key:"getInitRepositoryBranches",value:function(e){var t=this;zt.branchList({repository:e}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||t.setState({originRepository:e,originRepositoryBranches:a.data,error:!1})}))}},{key:"getOriginRepositoryBranches",value:function(e){var t=this;zt.branchList({repository:e.target.value}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||t.setState({originRepository:e.target.value,originRepositoryBranches:a.data,error:!1,originLastCommit:!1,targetLastCommit:!1})}))}},{key:"getTargetRepositoryBranches",value:function(e){var t=this;zt.branchList({repository:e.target.value}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||t.setState({targetRepository:e.target.value,targetRepositoryBranches:a.data,error:!1,targetLastCommit:!1})}))}},{key:"selectOriginBranch",value:function(e){var t=this,a=this.props,i=a.currentRepositoryKey,r=a.repositoryList,n=this.state.originRepository;zt.lastCommitLog({ref:e.target.value,repository:i||n}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){if(!a.code){var i=n?r.filter(U.id(n)):null;t.setState({originLastCommit:a.data,originBranch:e.target.value,originRepositoryInfo:i[0],error:!1})}}))}},{key:"selectTargetBranch",value:function(e){var t=this,a=this.props.repositoryList,i=this.state.targetRepository;zt.lastCommitLog({ref:e.target.value,repository:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(r){if(!r.code){var n=i?a.filter(U.id(i)):null;t.setState({targetLastCommit:r.data,targetBranch:e.target.value,targetRepositoryInfo:n[0],error:!1})}}))}},{key:"GoMergeRequestDetail",value:function(){var e=this.props.history,t=this.state,a=t.originRepository,i=t.targetRepository,r=t.originBranch,n=t.targetBranch,s=t.targetRepositoryInfo;a===i&&r===n?this.setState({error:!0}):e.push(V(s.group.name,s.name,"mergerequests","detail",a,encodeURIComponent(r),i,encodeURIComponent(n)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentRepositoryConfig,i=t.classes,n=t.intl,s=t.repositoryList,o=this.state,c=o.targetRepositoryList,l=o.targetRepositoryBranches,p=o.originLastCommit,d=o.targetLastCommit,u=o.originBranch,m=o.targetBranch,h=o.originRepository,g=o.targetRepository,f=o.error,b=o.repositoryName,j=o.groupName,O=o.originRepositoryBranches,v=o.originRepositoryInfo,y=o.targetRepositoryInfo,x=[];return!b&&j&&(x=s.filter(U.groupName(j))),Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:i.title,children:n.formatMessage({id:"label.createMergeRequest"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(k.a,{className:i.repositorySelect,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.branchTitle,children:n.formatMessage({id:"label.sourceBranch"})}),Object(se.jsxs)(k.a,{container:!0,spacing:2,className:i.branchSelect,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:h.length?h:"empty",onChange:function(t){return e.getOriginRepositoryBranches(t)},onClick:function(t){return!h&&e.props.history.push(V("repositories/new"))},children:[b&&a.repository&&Object(se.jsxs)(ut.a,{value:a.repository.id,children:[a.repository.group.name,"/",a.repository.name]},a.repository.id),!!x.length&&j&&x.map((function(e,t){return e.group.name!==j?null:Object(se.jsx)(ut.a,{value:e.id,children:e.group.displayName+"/"+e.displayName},e.id)})),0===x.length&&0===h.length&&j&&Object(se.jsx)(ut.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})}),!j&&!b&&!!h.length&&!!s.length&&s.map((function(e,t){return Object(se.jsx)(ut.a,{value:e.id,children:e.group.displayName+"/"+e.displayName},e.id)})),(!h.length||!s.length)&&Object(se.jsx)(ut.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})})]})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:u,onChange:function(t){return e.selectOriginBranch(t)},children:[Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),a.branches&&a.branches.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:i.icon,icon:be.d}),"\xa0\xa0",e.name]},t)})),!a.branches&&O&&O.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:i.icon,icon:be.d}),"\xa0\xa0",e.name]},t)}))]})})]}),(v||a.repository)&&p&&u&&Object(se.jsx)(k.a,{item:!0,xs:12,className:i.commit,children:Object(se.jsx)(Xa,{showBorder:Boolean(!1),data:p,current:u,currentRefType:"branch",currentGroup:v.group.name||a.repository.group.name,currentRepositoryConfig:a.repository?a:v,currentRepository:a.repository?a.repository.name:v.name,linkPathBase:V(v.group.name||a.repository.group.name,a.repository?a.repository.name:v.name,"commit")})})]})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(k.a,{className:i.repositorySelect,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",className:i.branchTitle,children:n.formatMessage({id:"label.targetBranch"})}),Object(se.jsxs)(k.a,{container:!0,spacing:2,className:i.branchSelect,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(E.a,{fullWidth:!0,variant:"outlined",select:!0,value:g.length?g:"empty",onChange:function(t){return e.getTargetRepositoryBranches(t)},children:[c&&c.map((function(e,t){return Object(se.jsx)(ut.a,{value:e.rKey,children:e.name},e.rKey)})),0===c.length&&Object(se.jsx)(ut.a,{value:"empty",children:n.formatMessage({id:"label.createRepository"})})]})}),Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(E.a,{fullWidth:!0,select:!0,variant:"outlined",value:m,onChange:function(t){return e.selectTargetBranch(t)},children:[Object(se.jsx)(ut.a,{disabled:!0,children:n.formatMessage({id:"label.branch"})}),l&&l.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.name,children:[Object(se.jsx)(fe.a,{className:i.icon,icon:be.d}),"\xa0\xa0",e.name]},t)}))]})})]}),(y||a.repository)&&d&&m&&Object(se.jsx)(k.a,{item:!0,xs:12,className:i.commit,children:Object(se.jsx)(Xa,{showBorder:Boolean(!1),data:d,current:m,currentRefType:"branch",currentGroup:y.group.name||a.repository.group.name,currentRepositoryConfig:a.repository?a:y,currentRepository:a.repository?a.repository.name:y.name,linkPathBase:V(y.group.name||a.repository.group.name,a.repository?a.repository.name:y.name,"commit")})})]})}),f&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(k.a,{item:!0,xs:6}),Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",align:"center",className:f?i.errorInfo:i.hideError,children:n.formatMessage({id:"message.selectDifferentBranch"})})})]}),Object(se.jsx)(k.a,{item:!0,xs:12,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",disabled:!h||!g||!u||!m||f,onClick:function(){return e.GoMergeRequestDetail()},children:n.formatMessage({id:"label.compareBranch"})})})]})})]})}}]),a}(r.a.Component),Zi=Object(N.b)(Object(S.a)((function(e){return{title:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(3),borderBottom:"1px solid "+e.palette.border},repositorySelect:{border:"1px solid "+e.palette.border,borderRadius:e.spacing(.5)+"px",overflow:"hidden"},branchTitle:{lineHeight:e.spacing(5)+"px",background:e.palette.background.main,padding:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},branchSelect:{padding:e.spacing(2)},commit:{borderTop:"1px solid "+e.palette.border},icon:{color:e.palette.text.light},errorInfo:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},hideError:{display:"none"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))($i)))),Yi=a(577),Xi=a(563),Qi=a(536),er=a(574),tr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a);var r=(i=t.call(this,e)).props,n=r.latestVersion,s=r.baseVersion;return i.state={diffViwerLayoutUpdateTimestamp:0,renderSideBySide:!0,fileTreeIsOpen:!1,fileTreeGridNumber:3,startHash:n,endHash:s},i}return Object(d.a)(a,[{key:"toggleDiffShow",value:function(){this.setState({renderSideBySide:!this.state.renderSideBySide,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.latestVersion,a=e.baseVersion;this.setState({startHash:t,endHash:a})}},{key:"toggleFileTree",value:function(){this.setState({fileTreeIsOpen:!this.state.fileTreeIsOpen,renderSideBySide:this.state.fileTreeIsOpen,diffViwerLayoutUpdateTimestamp:(new Date).getTime()})}},{key:"jumpToAnchor",value:function(e){window.location.href=window.location.href.split("#")[0]+"#"+e}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.startHash!==t.startHash?(this.props.getVersionDiff(e.sourceRepository,e.targetRepository,t.startHash,this.state.endHash,e),!1):this.state.endHash===t.endHash||(this.props.getVersionDiff(e.sourceRepository,e.targetRepository,this.state.startHash,t.endHash,e),!1)}},{key:"changeHash",value:function(e,t){var a=e.target.value;"start"===t?this.setState({startHash:a}):this.setState({endHash:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,n=t.changedFilesInfo,s=t.fileDiff,o=t.pending,c=t.effectFileCount,l=t.addLine,p=t.deleteLine,d=t.showVersionCompare,u=t.versionList,m=t.baseVersionList,h=t.baseVersion,g=t.sourceRepository,f=t.latestVersion,b=this.state,j=b.renderSideBySide,O=b.fileTreeIsOpen,v=b.fileTreeGridNumber,y=b.diffViwerLayoutUpdateTimestamp,x=b.startHash,C=b.endHash;return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)(k.a,{container:!0,justifyContent:d?"space-between":"flex-end",alignItems:"center",className:a.diffInfoSticky,children:[d&&Object(se.jsx)(k.a,{item:!0,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Qi.a,{className:a.margin,children:Object(se.jsx)(er.a,{variant:"outlined",value:x||f,onChange:function(t){return e.changeHash(t,"start")},children:u&&u.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.sha,children:[Object(se.jsx)(w.a,{variant:"body2",component:"span",children:0===t?i.formatMessage({id:"label.lastModified"}):i.formatMessage({id:"label.lastModified_N"},{n:u.length-t})}),Object(se.jsx)(w.a,{variant:"body2",component:"span",children:"-"+e.sha.substr(0,8)})]},t)}))})})}),Object(se.jsx)(k.a,{item:!0,className:a.and,children:i.formatMessage({id:"label.and"})}),Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(Qi.a,{className:a.margin,children:Object(se.jsx)(er.a,{variant:"outlined",value:C||h,onChange:function(t){return e.changeHash(t,"end")},children:m&&m.map((function(e,t){return Object(se.jsxs)(ut.a,{value:e.sha,children:[Object(se.jsx)(w.a,{variant:"body2",component:"span",children:0===t?"Base Line":i.formatMessage({id:"label.lastModified_N"},{n:m.length-t})}),Object(se.jsx)(w.a,{variant:"body2",component:"span",children:"-"+e.sha.substr(0,8)})]},t)}))})})})]})}),Object(se.jsxs)(k.a,{item:!0,className:a.content,children:[Object(se.jsxs)(w.a,{variant:"body1",component:"span",children:[i.formatMessage({id:"label.allFiles"})," : \xa0",o?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):c]}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:a.add,children:o?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):"+"+l}),Object(se.jsx)(w.a,{variant:"body1",component:"span",className:a.delete,children:o?Object(se.jsx)(me.a,{size:"12px",color:"inherit"}):p}),Object(se.jsxs)(Aa.a,{variant:"outlined",color:"primary",size:"small",children:[Object(se.jsx)(_.a,{onClick:function(t){return e.toggleDiffShow(t)},children:j?"inline":"side-by-side"}),Object(se.jsx)(_.a,{onClick:function(t){return e.toggleFileTree(t)},children:O?i.formatMessage({id:"label.closeFileTree"}):i.formatMessage({id:"label.openFileTree"})})]})]})]}),Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsx)(k.a,{item:!0,xs:O?v:12,className:O?a.fileTreeSticky:a.fileTreeHide,children:Object(se.jsx)(Pi,{changeFiles:n,treeView:Boolean(!1),fileClick:function(t){return e.jumpToAnchor(t)}})}),Object(se.jsx)(k.a,{item:!0,xs:O?12-v:12,children:Object(se.jsx)(k.a,{container:!0,children:!o&&s?s.map((function(e,t){return Object(se.jsx)(k.a,{item:!0,xs:12,id:e.modified.sha,className:a.fileDiffPanel,children:Object(se.jsx)(Di,{modifiedRepositoryKey:g,fileDiffInfo:e,renderSideBySide:j,layoutUpdateTimeStamp:y,fileTreeIsOpen:O},t)},t)})):Object(se.jsx)(k.a,{container:!0,spacing:2,className:a.loading,children:Object(se.jsx)(me.a,{})})})})]})]})}}]),a}(r.a.Component),ar=Object(N.b)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},copyHash:{minWidth:e.spacing(1),height:e.spacing(4),width:e.spacing(4),padding:e.spacing(0),marginBottom:e.spacing(.5)},commitLog:{paddingRight:0},changedFileList:{width:"100%",backgroundColor:e.palette.background.paper},commitAvatar:{marginLeft:e.spacing(1),marginTop:e.spacing(.5),marginRight:e.spacing(1)},commiterName:{paddingTop:e.spacing(.5)},add:{color:e.palette.success.main,marginLeft:e.spacing(3),marginRight:e.spacing(2)},delete:{color:e.palette.error.main,marginLeft:e.spacing(1),marginRight:e.spacing(1)},changedFile:{color:e.palette.primary.main,paddingBottom:e.spacing(1),backgroundColor:"transparent",fontSize:"1.25rem","&:hover":{backgroundColor:"transparent",boxShadow:"none"}},typography:{padding:e.spacing(2)},paper:{minWidth:e.spacing(38),width:"100%"},expansionMargin0:{margin:0},content:{zIndex:e.spacing(1),backgroundColor:e.palette.background.light},stickyPosition:{position:"sticky",top:e.spacing(8),zIndex:e.spacing(1),backgroundColor:e.palette.background.light},diffInfoSticky:{top:"105px",position:"sticky",marginTop:"-24px",paddingTop:e.spacing(3),paddingBottom:e.spacing(3),height:e.spacing(10)+1+"px",zIndex:e.spacing(1),backgroundColor:e.palette.background.light},and:{lineHeight:e.spacing(4)+"px"},fileTreeHide:{display:"none"},fileTreeSticky:{position:"sticky",top:"174px",maxHeight:window.innerHeight-174+"px"},fileDiffPanel:{marginBottom:e.spacing(3),"& > div > div:first-child":{top:"186px"}}}}))(Object(h.f)(Object(l.b)((function(e,t){return{}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(tr)))),ir=Object(S.a)((function(e){return{root:{width:e.spacing(3),height:e.spacing(3)}}}))(Fe.a),rr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;Object(p.a)(this,a),i=t.call(this,e);var r=e.match.params;return i.state={mid:r.mid?r.mid:"",mergeRequestInfo:{id:"",sourceRepository:r.sourceRepository?r.sourceRepository:"",sourceBranch:r.sourceBranch?decodeURIComponent(r.sourceBranch):"",targetRepository:r.targetRepository?r.targetRepository:"",targetBranch:r.targetBranch?decodeURIComponent(r.targetBranch):""},sourceRepositoryInfo:null,targetRepositoryInfo:null,requesterInfo:null,handlerInfo:null,title:r.sourceBranch?decodeURIComponent(r.sourceBranch):"",description:"",tabValue:0,pending:!0,changedFiles:[],fileDiff:[],effectFileCount:0,addLine:0,deleteLine:0,commits:[],activities:[],showCommitInput:!1,mergeMessage:"",usingSquash:!1,error:{},hasMergeConflict:!1,mergeStatus:"open",versionList:[],latestVersion:"",baseVersion:"",submitMergeRequest:!1,mergePending:!1,reviewers:[],reviewersMenu:null,updateReviewersPending:!1},i.checkInput=ne.stateValidator(Object(R.a)(i),[{name:"message",passPattern:/^.+$/,errorMessage:i.props.intl.formatMessage({id:"message.error._S_empty"},{s:i.props.intl.formatMessage({id:"label.branchName"})})},{name:"message",passPattern:/^.{1,30}$/,errorMessage:i.props.intl.formatMessage({id:"message.error.noMoreThan_N_characters"},{n:30})}]),i.getVersionDiff=i.getVersionDiff.bind(Object(R.a)(i)),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.closeDrawer(),this.state.mid?this.getDetailData(this.props,this.state):this.getChangeData(this.props,this.state),this.state.mid&&this.getVersionList(this.state)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.repositoryList.length!==e.repositoryList.length?(this.state.mid?this.getDetailData(e,t):this.getChangeData(e,t),this.getVersionList(t),!1):JSON.stringify(this.state.mergeRequestInfo)!==JSON.stringify(t.mergeRequestInfo)?this.state.updateReviewersPending?(this.getActivities(this.state.mergeRequestInfo.targetRepository,this.state.mergeRequestInfo.id),!1):(this.getChangeData(e,t),this.getVersionList(t),!1):this.props.match.params.mid!==e.match.params.mid?(this.setState({mid:e.match.params.mid}),!1):this.state.mid!==t.mid?(this.getDetailData(e,t),this.getVersionList(t),!1):this.state.mergeStatus!==t.mergeStatus?(this.getDetailData(e,t),!1):this.props.currentRepositoryKey===e.currentRepositoryKey||(this.getDetailData(e,t),!1)}},{key:"getVersionDiff",value:function(e,t,a,i,r){var n=this;zt.fileChanges({versionCompare:!0,repository:e,original:a,targetRepository:t,modified:i}).then(re.withEventdispatcher(r.dispatchEvent)(re.getJSONData)).then((function(e){if(!e.code){var t=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),a=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0);n.setState({pending:!1,changedFiles:n.getFileTreeInfo(e.data.detail),fileDiff:e.data.detail,effectFileCount:e.data.count,addLine:t,deleteLine:a})}}))}},{key:"getChangeData",value:function(e,t){var a=this,i=e.repositoryList,r=t.mergeRequestInfo,n=r.id,s=r.sourceRepository,o=r.sourceBranch,c=r.targetRepository,l=r.targetBranch;if(!s||!o||!c||!l||!i.length)return!1;n?this.getRepositories(e,t,!1):(this.setState({submitMergeRequest:!0}),this.getRepositories(e,t,!0)),zt.fileChanges({mergeRequest:n,repository:s,original:o,targetRepository:c,modified:l}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){if(!e.code){var t=e.data.detail.reduce((function(e,t){return e+t.diff.additions}),0),i=e.data.detail.reduce((function(e,t){return e+t.diff.deletions}),0);a.setState({pending:!1,changedFiles:a.getFileTreeInfo(e.data.detail),fileDiff:e.data.detail,effectFileCount:e.data.count,addLine:t,deleteLine:i})}zt.mergeRequestCommits({mergeRequest:n,sourceRepository:s,sourceBranch:o,targetRepository:c,targetBranch:l}).then(re.withEventdispatcher(a.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||a.setState({commits:e.data})})),a.state.mid&&a.getActivities(c,n)}))}},{key:"getActivities",value:function(e,t){var a=this;zt.activities({repository:e,mergeRequest:t}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||a.setState({activities:e.data,updateReviewersPending:!1})}))}},{key:"getFileTreeInfo",value:function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a];i.modified&&i.modified.name&&t.push({name:i.modified.name,add:i.diff.additions,delete:Math.abs(i.diff.deletions),hash:i.modified.sha})}return t}},{key:"getRepositories",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.repositoryList,r=t.mergeRequestInfo,n=i.filter(U.id(r.targetRepository))[0];this.setState({sourceRepositoryInfo:a?i.filter(U.id(r.sourceRepository))[0]:t.mergeRequestInfo.sourceRepoInfo,targetRepositoryInfo:n,requesterInfo:r.submitter,handlerInfo:r.handler?n.members.filter(U.id(r.handler))[0]:null})}},{key:"createMergeRequest",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,i=t.title,r=t.description,n=t.targetRepositoryInfo,s=t.reviewers,o=t.mergePending,c=this.props,l=c.history,p=c.intl;if(o)return!1;this.setState({mergePending:!0}),zt.createMergeRequest({sourceRepository:a.sourceRepository,sourceBranch:a.sourceBranch,targetRepository:a.targetRepository,targetBranch:a.targetBranch,title:i,description:r,reviewers:s.join(",")}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){e.setState({mergePending:!1}),t.code?1030===t.code?e.props.dispatchEvent(te.NewNotification(p.formatMessage({id:"message.error.mergeRequestExists"}),2)):1039===t.code?e.props.dispatchEvent(te.NewNotification(p.formatMessage({id:"message.error.branchProteced"}),2)):e.props.dispatchEvent(te.NewNotification(p.formatMessage({id:"message.error.createMergeRequestFail"}),2)):(e.setState({mid:t.data.id}),l.push(V(n.group.name,n.name,"mergerequests",t.data.id)))}))}},{key:"getDetailData",value:function(e,t){var a=this,i=e.currentRepositoryKey,r=t.mid;if(!r||!i)return!1;zt.mergeRequestDetail({repository:i,mid:r}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||a.setState({mergeRequestInfo:e.data,reviewers:e.data.reviewers.map((function(e){return e.user}))})}))}},{key:"getVersionList",value:function(e){var t=this,a=e.mergeRequestInfo;if(!a.id)return!1;zt.mergeRequestVersionList({mergeRequest:a.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||t.setState({versionList:e.data.mergeVersionList||[],latestVersion:e.data.mergeVersionList.length>0?e.data.mergeVersionList[0].sha:"",baseVersion:e.data.baseVersion,baseVersionList:e.data.baseVersionList})}))}},{key:"checkMergeType",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,i=t.mergeMessage,r=t.usingSquash,n=t.showCommitInput,s=this.props.intl;if(!a.id&&!this.checkInput()&&n)return!1;this.setState({mergePending:!0}),zt.checkMergeType({mergeRequest:a.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){if(t.code)e.setState({mergePending:!1});else if(t.data.canBeFastForward)e.mergeBranch(e.props,e.state,"",!1);else{if(e.setState({showCommitInput:!0}),!i)return e.setState({error:{mergeMessage:s.formatMessage({id:"message.error._S_empty"},{s:e.props.intl.formatMessage({id:"label.mergeMessage"})})},mergePending:!1}),!1;e.mergeBranch(e.props,e.state,i,r)}}))}},{key:"mergeBranch",value:function(e,t,a,i){var r=this,n=t.mergeRequestInfo,s=this.props.intl;if(!n.id)return!1;zt.mergeBranch({message:a,mergeRequest:n.id,usingSquash:i}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){r.setState({mergePending:!1}),e.code?1029===e.code?r.props.dispatchEvent(te.NewNotification(s.formatMessage({id:"message.error.userNotReview"}),2)):1039===e.code?r.props.dispatchEvent(te.NewNotification(s.formatMessage({id:"message.error.branchProteced"}),2)):r.props.dispatchEvent(te.NewNotification(s.formatMessage({id:"message.error.mergeFail"}),2)):e.data.conflict?r.setState({hasMergeConflict:!0,mergeStatus:"conflict",showCommitInput:!1}):r.setState({mergeStatus:"merged",showCommitInput:!1})}))}},{key:"closeMergeRequest",value:function(){var e=this,t=this.props.intl;if(!this.state.mergeRequestInfo)return!1;zt.mergeRequestClose({mergeRequest:this.state.mergeRequestInfo.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(a){a.code||(e.setState({mergeStatus:"closed",showCommitInput:!1}),e.props.dispatchEvent(te.NewNotification(t.formatMessage({id:"message.closed"}),0)))}))}},{key:"assignReviewer",value:function(e,t){var a=this,i=this.state,r=i.updateReviewersPending,n=i.mergeRequestInfo,s=i.reviewers,o=this.props.intl;if(r||!t||!e&&!n.id)return!1;if(e)s.includes(t)?this.deleteReviewer(e,t):this.setState({reviewers:[t]});else{if(s.includes(t))return!1;if(s.length&&this.isReview(s[0]))return this.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotAssign"}),1)),!1;this.setState({updateReviewersPending:!0}),zt.assignReviewer({id:n.id,reviewer:t}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?(a.setState({updateReviewersPending:!1}),1029===e.code&&a.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotAssign"}),1))):(a.setState({reviewers:[t]}),a.getDetailData(a.props,a.state),a.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.updated"}),0)))}))}}},{key:"deleteReviewer",value:function(e,t){var a=this,i=this.state,r=i.updateReviewersPending,n=i.mergeRequestInfo,s=i.reviewers,o=this.props.intl;if(r||!t||!e&&!n.id)return!1;if(e)this.setState({reviewers:s.filter((function(e){return e!==t}))});else{if(this.isReview(t))return this.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotDelete"}),1)),!1;this.setState({updateReviewersPending:!0}),zt.deleteReviewer({id:n.id,reviewer:t}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?(a.setState({updateReviewersPending:!1}),1029===e.code&&a.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.error.reviewedCanNotDelete"}),1))):(a.setState({reviewers:s.filter((function(e){return e!==t}))}),a.getDetailData(a.props,a.state),a.props.dispatchEvent(te.NewNotification(o.formatMessage({id:"message.deleted"}),0)))}))}}},{key:"mergeRequestReview",value:function(){var e=this,t=this.state,a=t.mergeRequestInfo,i=t.updateReviewersPending,r=this.props.intl;if(i||!a.id)return!1;this.setState({updateReviewersPending:!0}),zt.mergeRequestReview({id:a.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.setState({updateReviewersPending:!1}),e.getDetailData(e.props,e.state),e.props.dispatchEvent(te.NewNotification(r.formatMessage({id:"message.approved"}),0)))}))}},{key:"isReview",value:function(e){var t=this.state.mergeRequestInfo;return!!t.id&&(!!(e=t.reviewers.filter((function(t){return t.user===e}))).length&&e[0].isReview)}},{key:"getTabs",value:function(){var e=this.props.intl,t=this.state,a=t.changedFiles,i=t.commits,r=t.activities,n=[];return n.push(e.formatMessage({id:"label.codeDiff"})+"("+a.length+")"),n.push(e.formatMessage({id:"label.commitActivity"})+"("+i.length+")"),this.state.mid&&n.push(e.formatMessage({id:"label.mergeRequestActivity"})+"("+r.length+")"),n}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.history,n=t.classes,s=t.intl,o=this.state,c=o.mergeRequestInfo,l=o.sourceRepositoryInfo,p=o.targetRepositoryInfo,d=o.requesterInfo,u=o.handlerInfo,m=o.title,h=o.description,g=o.tabValue,f=o.pending,b=o.changedFiles,j=o.fileDiff,O=o.effectFileCount,v=o.addLine,y=o.deleteLine,x=o.commits,C=o.activities,S=o.showCommitInput,R=o.mergeMessage,N=o.usingSquash,M=o.hasMergeConflict,T=o.versionList,A=o.latestVersion,I=o.baseVersion,F=o.baseVersionList,P=o.submitMergeRequest,B=o.reviewers,G=o.reviewersMenu;return Object(se.jsxs)(k.a,{container:!0,children:[!this.state.mid&&(l||P)&&Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",className:n.createMRTitle,children:s.formatMessage({id:"label.createMergeRequest"})})}),Object(se.jsx)(k.a,{item:!0,xs:9,children:s.formatMessage({id:"message.from_S_Merge_S"},{s1:l.group.name+"/"+l.name+":"+c.sourceBranch,s2:p.group.name+"/"+p.name+":"+c.targetBranch})}),Object(se.jsx)(k.a,{item:!0,xs:3,align:"right",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(e){return i.push(V(l.group.name,l.name,"mergerequests","new"))},children:s.formatMessage({id:"label.modificationBranch"})})}),Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.title"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:m,onChange:function(t){return e.setState({title:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.description"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:5,value:h,onChange:function(t){return e.setState({description:t.target.value})}})})]})}),Object(se.jsx)(k.a,{item:!0,xs:4,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"message.assignReviewerTitle"})})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(k.a,{className:n.members,children:p.members.map((function(t,a){return!(t.deleteFlag||t.role<L.Role.DEVELOPER)&&Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:n.member,onClick:function(a){return e.assignReviewer(!0,t.id)},children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(ia,{item:t})}),Object(se.jsx)(k.a,{item:!0,children:B.includes(t.id)&&Object(se.jsx)(fe.a,{icon:be.e,className:n.assigned})})]},a)}))})})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,className:n.button,children:Object(se.jsx)(k.a,{container:!0,justifyContent:"flex-end",alignItems:"center",children:Object(se.jsxs)(k.a,{item:!0,children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",disableElevation:!0,className:n.cancel,onClick:function(e){return i.push(V(p.group.name,p.name,"mergerequests"))},children:s.formatMessage({id:"label.cancel"})}),Object(se.jsx)(_.a,{disabled:!m,variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.createMergeRequest()},children:s.formatMessage({id:"label.submit"})})]})})})]})}),this.state.mid&&c.id&&Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsxs)(k.a,{item:!0,xs:6,children:[Object(se.jsxs)(w.a,{variant:"h6",component:"div",children:[c.title,"\xa0\xa0\xa0\xa0",c.status===D.mergeRequestStatus.merged&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ye,{color:"success",icon:be.K,text:s.formatMessage({id:"message.merged"})}),"\xa0\xa0\xa0\xa0"]}),c.status===D.mergeRequestStatus.closed&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ye,{color:"error",icon:Be.j,text:s.formatMessage({id:"message.closed"})}),"\xa0\xa0\xa0\xa0"]})]}),c.description&&Object(se.jsx)(w.a,{variant:"body1",component:"div",className:n.description,children:c.description})]}),c.status===D.mergeRequestStatus.open&&Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"flex-end",children:[Object(se.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(t){return e.closeMergeRequest()},children:s.formatMessage({id:"label.close"})}),"\xa0\xa0\xa0\xa0",B.includes(a.id)&&!this.isReview(a.id)?Object(se.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(t){return e.mergeRequestReview()},children:s.formatMessage({id:"label.approve"})}):Object(se.jsxs)(_.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(t){return e.checkMergeType()},disabled:this.state.mergePending,children:[this.state.mergePending&&Object(se.jsx)(me.a,{size:"1rem",color:"inherit"}),"\xa0 ",s.formatMessage({id:"label.merge"})," \xa0"]})]})}),Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsxs)(k.a,{container:!0,spacing:2,children:[Object(se.jsx)(k.a,{item:!0,xs:6,children:Object(se.jsx)(E.a,{fullWidth:!0,variant:"outlined",value:R,placeholder:s.formatMessage({id:"message.inputMergeCommit"}),className:S?"":n.hideInput,error:!R,helperText:this.state.error.mergeMessage?"":this.state.error.mergeMessage,onChange:function(t){return e.setState({mergeMessage:t.target.value})}})}),Object(se.jsx)(k.a,{item:!0,xs:2,children:Object(se.jsx)(Xi.a,{className:S?"":n.hideInput,control:Object(se.jsx)(Yi.a,{checked:N,onChange:function(t){return e.setState({usingSquash:!e.state.usingSquash})},name:"usingSquash",color:"primary"}),label:"\u4f7f\u7528Squash"})}),M&&Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:[Object(se.jsx)(w.a,{component:"span",children:s.formatMessage({id:"message.mergeConflictTitle"})})," \xa0",Object(se.jsx)(he.a,{docID:"ee0a3dc6d34828a527e2ca7ac1df3892",type:"icon"})]}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip1"}),Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git checkout -b ",c.sourceBranch," origin/ ",c.sourceBranch]})]}),Object(se.jsx)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:s.formatMessage({id:"message.mergeConflictTip2"})}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip3"}),Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(se.jsx)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:"git fetch origin"}),Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git checkout origin/",c.targetBranch]}),Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git merge --no-ff ",c.sourceBranch]})]}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",gutterBottom:!0,children:[s.formatMessage({id:"message.mergeConflictTip4"}),Object(se.jsxs)(w.a,{variant:"h6",component:"div",gutterBottom:!0,children:["git push origin ",c.targetBranch]})]})]})]})})]}),f?Object(se.jsx)(k.a,{container:!0,spacing:2,className:n.loading,children:Object(se.jsx)(me.a,{})}):Object(se.jsxs)(k.a,{container:!0,spacing:3,children:[Object(se.jsxs)(k.a,{item:!0,xs:this.state.mid?9:12,children:[Object(se.jsx)(k.a,{container:!0,className:n.tabHeader,children:Object(se.jsx)(vt,{tabs:this.getTabs(),onChange:function(t,a){return e.setState({tabValue:a})},currentTab:g,children:"\xa0"})}),Object(se.jsxs)(k.a,{item:!0,xs:12,className:n.tab,children:[0===g&&Object(se.jsx)(ar,{pending:f,mergeRequestDetail:c,changedFilesInfo:b,fileDiff:j,effectFileCount:O,addLine:v,deleteLine:y,showVersionCompare:this.state.mid?Boolean(!0):Boolean(!1),versionList:T,latestVersion:A,baseVersion:I,baseVersionList:F,getVersionDiff:this.getVersionDiff,sourceRepository:c.sourceRepository,targetRepository:c.targetRepository}),1===g&&Object(se.jsx)(si,{title:"",children:x.map((function(e,t){return Object(se.jsx)(Xa,{showBorder:!0,data:e,linkPathBase:V(l.group.name,l.name,"commit"),currentRepositoryConfig:l},t)}))}),2===g&&C.map((function(e,t){return Object(se.jsx)(_a,{item:e},t)}))]})]}),this.state.mid&&c.id&&Object(se.jsx)(k.a,{item:!0,xs:3,children:Object(se.jsxs)(k.a,{container:!0,className:[n.tabHeader,n.mergeRequestInfo].join(" "),children:[Object(se.jsxs)(k.a,{item:!0,xs:12,container:!0,justifyContent:"space-between",alignItems:"center",className:n.reviewersTitle,children:[Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.reviewer"})}),c.status===D.mergeRequestStatus.open&&Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"",className:n.icon,onClick:function(t){return e.setState({reviewersMenu:t.currentTarget})},icon:be.a}),Object(se.jsxs)(pt.a,{anchorEl:G,open:!!G,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},getContentAnchorEl:null,onClose:function(t){return e.setState({reviewersMenu:null})},children:[Object(se.jsx)(ut.a,{disabled:!0,className:n.reviewersMenuItem,children:s.formatMessage({id:"message.selectReviewer"})}),p.members&&p.members.map((function(t,a){return!(t.deleteFlag||t.role<L.Role.DEVELOPER)&&Object(se.jsxs)(ut.a,{className:n.reviewersMenuItem,onClick:function(a){e.setState({reviewersMenu:null}),e.assignReviewer(!1,t.id)},children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(ia,{item:t})}),"\xa0\xa0",Object(se.jsx)(k.a,{item:!0,children:B.includes(t.id)&&Object(se.jsx)(fe.a,{icon:be.e,className:n.assigned})})]},a)})),Object(se.jsx)(ta.a,{className:n.divider}),Object(se.jsxs)(ut.a,{className:n.deleteReviewer,onClick:function(t){e.setState({reviewersMenu:null}),e.deleteReviewer(!1,B[0])},children:[Object(se.jsx)(fe.a,{icon:be.D}),"\xa0\xa0",s.formatMessage({id:"message.deleteReviewer"})]})]})]})]}),Object(se.jsx)(k.a,{container:!0,children:B.length>0?B.map((function(t,a){var i=e.isReview(t);return Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",className:n.reviewersMember,children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)(ia,{item:p.members.filter(U.id(t))[0]},a)}),Object(se.jsx)(k.a,{children:Object(se.jsx)(Ye,{color:i?"success":"error",text:s.formatMessage({id:i?"message.approved":"message.notApprove"})})})]},a)})):Object(se.jsx)(k.a,{item:!0,xs:12,children:Object(se.jsx)(w.a,{className:n.noReviewers,variant:"caption",component:"div",children:s.formatMessage({id:"message.notSelectReviewers"})})})}),Object(se.jsx)(k.a,{container:!0,alignItems:"center",className:[n.reviewersTitle,n.activityTitle].join(" "),children:Object(se.jsx)(w.a,{variant:"subtitle1",component:"div",children:s.formatMessage({id:"label.activity"})})}),Object(se.jsxs)(k.a,{item:!0,xs:12,children:[Object(se.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(se.jsx)(fe.a,{icon:be.v}),s.formatMessage({id:"label.requestMerge"}),":\xa0\xa0",l.group.displayName,"/",l.displayName,"/",c.sourceBranch," -> ",p.group.displayName,"/",p.displayName,"/",c.targetBranch]}),Object(se.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(se.jsx)(ir,{src:D.HOSTS.PGYER_AVATAR_HOST+d.icon}),d.name,"\xa0\xa0",s.formatMessage({id:"label.requestCreated"}),":\xa0\xa0",Object(se.jsx)(Mt,{timestamp:c.create}),Object(se.jsx)("div",{className:n.activityItemLine})]}),c.status!==D.mergeRequestStatus.open&&Object(se.jsxs)(w.a,{variant:"body2",component:"div",className:n.activityItem,children:[Object(se.jsx)(ir,{src:D.HOSTS.PGYER_AVATAR_HOST+u.icon}),u.name,"\xa0\xa0",s.formatMessage({id:c.status===D.mergeRequestStatus.merged?"label.requestMerged":"label.requestClosed"}),":\xa0\xa0",Object(se.jsx)(Mt,{timestamp:c.status===D.mergeRequestStatus.merged?c.merge:c.close}),Object(se.jsx)("div",{className:n.activityItemLine})]})]})]})})]})]})}}]),a}(r.a.Component),nr=Object(N.b)(Object(ge.a)(Object(S.a)((function(e){return{loading:{paddingTop:e.spacing(16),paddingBottom:e.spacing(16),justifyContent:"center"},createMRTitle:{lineHeight:e.spacing(5)+"px",marginBottom:e.spacing(2),borderBottom:"1px solid "+e.palette.border},activityItem:{display:"flex",position:"relative",alignItems:"center",height:e.spacing(8),padding:"0px "+e.spacing(2)+"px","& > svg:first-child":{padding:"12px",borderRadius:"50%",marginRight:e.spacing(2),color:e.palette.primary.main,border:"1px solid "+e.palette.border,width:e.spacing(5),height:e.spacing(5),boxSizing:"border-box"},"& > div:first-child":{width:e.spacing(5),height:e.spacing(5),marginRight:e.spacing(2)}},activityItemLine:{top:"-12px",position:"absolute",left:e.spacing(4.5),height:e.spacing(3),borderLeft:"1px solid "+e.palette.border},hideInput:{display:"none"},tab:{marginTop:e.spacing(3)},tabHeader:{position:"sticky",top:e.spacing(8),zIndex:9,borderBottom:"1px solid "+e.palette.border},mergeRequestInfo:{border:0},description:{padding:e.spacing(2)+"px"},button:{margin:e.spacing(2)+"px 0px"},icon:{color:e.palette.text.light},assigned:{color:e.palette.primary.main},members:{overflowY:"auto",borderRadius:"4px",boxSizing:"border-box",maxHeight:e.spacing(27.5),border:"1px solid "+e.palette.border},member:{cursor:"pointer",borderBottom:"1px solid "+e.palette.border,padding:e.spacing(1.5)+"px "+e.spacing(2)+"px","&:last-child":{border:"none"},"&:hover":{background:e.palette.background.main}},reviewersTitle:{height:e.spacing(5),boxSizing:"content-box",padding:"0px "+e.spacing(2)+"px",borderBottom:"1px solid "+e.palette.border},activityTitle:{marginBottom:e.spacing(2)},reviewersMenuItem:{justifyContent:"space-between",height:e.spacing(5)},divider:{margin:e.spacing(1)+"px 0px"},deleteReviewer:{color:e.palette.error.main},reviewersMember:{padding:e.spacing(3)+"px "+e.spacing(2)+"px",height:e.spacing(10)},noReviewers:{fontSize:"14px",textAlign:"center",lineHeight:e.spacing(10)+"px"},cancel:{marginRight:e.spacing(2)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo,currentRepositoryKey:e.DataStore.currentRepositoryKey,repositoryList:e.DataStore.repositoryList}}),(function(e,t){return{dispatchEvent:function(t){e(t)},closeDrawer:function(){return e({type:"drawer.expandStatus.close"})}}}))(rr))))),sr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{path:"/userInfo",component:ue}),Object(se.jsx)(h.a,{path:"/settings",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/settings/profile",component:Je}),Object(se.jsx)(h.a,{exact:!0,path:"/settings/sshkey",component:we}),Object(se.jsx)(h.a,{exact:!0,path:"/settings/notification",component:tt}),Object(se.jsx)(h.a,{exact:!0,path:"/settings/email",component:Ie}),Object(se.jsx)(h.a,{path:"/settings",component:Je})]})}),Object(se.jsx)(h.a,{path:"/admin",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/admin/users",component:xt}),Object(se.jsx)(h.a,{exact:!0,path:"/admin/groups",component:kt}),Object(se.jsx)(h.a,{exact:!0,path:"/admin/repositories",component:Et}),Object(se.jsx)(h.a,{exact:!0,path:"/admin/settings",component:At}),Object(se.jsx)(h.a,{path:"/admin",component:lt})]})}),Object(se.jsx)(h.a,{path:"/mergerequests",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/mergerequests",component:Ji}),Object(se.jsx)(h.a,{exact:!0,path:"/mergerequests/new",component:Zi})]})}),Object(se.jsx)(h.a,{path:"/repositories",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/repositories/new",component:Wt}),Object(se.jsx)(h.a,{exact:!0,path:"/repositories/fork/:repositoryID([0-9a-f]+)",component:Jt}),Object(se.jsx)(h.a,{exact:!0,path:"/repositories/forklist/:repositoryID([0-9a-f]+)",component:Ht}),Object(se.jsx)(h.a,{path:"/repositories",component:Ht})]})}),Object(se.jsx)(h.a,{path:"/groups",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{path:"/groups/new",component:Oa}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})",component:Ht}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/repositories",component:Ht}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/members",component:Ca}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/activities",component:Ta}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/repositories/new",component:Wt}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/mergerequests",component:Ji}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/mergerequests/new",component:Zi}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings",component:ya}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings/general",component:ya}),Object(se.jsx)(h.a,{exact:!0,path:"/groups/:groupName([A-Za-z0-9_]{5,})/settings/advanced",component:Na}),Object(se.jsx)(h.a,{path:"/groups",component:ba})]})}),Object(se.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/files",component:ri}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/files/:rev([\\w\\-\\.%]+)",component:ri}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/:type(files|blame)/:rev([\\w\\-\\.%]+):path(/.*)",component:ri}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commit/:hash([0-9a-f]{8})",component:Hi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits",component:ci}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits/:rev([\\w\\-\\.%]+)",component:ci}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/commits/:rev([\\w\\-\\.%]+):path(/.*)",component:ci}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests",component:Ji}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/new",component:Zi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/detail/:sourceRepository([0-9a-f]{32})/:sourceBranch([\\w\\-\\.%]+)/:targetRepository([0-9a-f]{32})/:targetBranch([\\w\\-\\.%]+)",component:nr}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/mergerequests/:mid(\\d+)",component:nr}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/branches",component:hi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/branches/new",component:yi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/tags",component:fi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/tags/new",component:Oi}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/members",component:la}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/activities",component:Ta}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings",component:Zt}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/general",component:Zt}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/branch",component:Xt}),Object(se.jsx)(h.a,{exact:!0,path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)/settings/advanced",component:ma}),Object(se.jsx)(h.a,{component:ri})]})})]})}}]),a}(r.a.Component),or=Object(h.f)(sr),cr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={groupListLoaded:!1,repositoryListLoaded:!1},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})})),zt.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.repositoryList.update",data:t.data}),e.setState({repositoryListLoaded:!0}))})),pa.list().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||(e.props.dispatchEvent({type:"data.groupList.update",data:t.data}),e.setState({groupListLoaded:!0}))}))}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(t.groupListLoaded&&this.state.groupListLoaded!==t.groupListLoaded||this.props.match.params.groupName!==e.match.params.groupName||this.props.match.params.repositoryName!==e.match.params.repositoryName&&!e.match.params.repositoryName){var i=e.groupList.filter(U.name(e.match.params.groupName))[0];i&&i.id?(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:i.id}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}),e.history.location.pathname.match(/^\/groups/i)&&pa.config({gKey:i.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?a.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}):a.props.dispatchEvent({type:"data.currentGroupConfig.update",data:e.data})}))):(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:""}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}))}else e.match.params.groupName||(this.props.dispatchEvent({type:"data.currentGroupKey.update",data:""}),this.props.dispatchEvent({type:"data.currentGroupConfig.update",data:{}}));if(t.repositoryListLoaded&&this.state.repositoryListLoaded!==t.repositoryListLoaded||this.props.match.params.groupName!==e.match.params.groupName||this.props.match.params.repositoryName!==e.match.params.repositoryName){var r=e.repositoryList.filter((function(t){return t.group.name===e.match.params.groupName&&t.name===e.match.params.repositoryName}))[0];r&&r.id?(this.props.dispatchEvent({type:"data.currentRepositoryKey.update",data:r.id}),zt.config({rKey:r.id}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code?a.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}):(a.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:e.data}),a.setState({repositoryListLoaded:!0}))})),this.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}),this.props.dispatchEvent({type:"data.currentRepositoryError.update",data:!1})):(this.props.dispatchEvent({type:"data.currentRepositoryKey.update",data:""}),this.props.dispatchEvent({type:"data.currentRepositoryConfig.update",data:{}}),this.props.dispatchEvent({type:"data.currentRepositoryError.update",data:!0}))}return!0}},{key:"render",value:function(){var e=this.props.classes;return Object(se.jsx)("div",{className:e.container,children:Object(se.jsxs)("main",{className:e.content,children:[Object(se.jsx)("div",{className:e.toolbar}),Object(se.jsx)("div",{className:e.mainContainer,children:Object(se.jsx)(or,{})})]})})}}]),a}(r.a.Component),lr=Object(S.a)((function(e){return{container:{backgroundColor:e.palette.background.light},content:{padding:0},toolbar:e.mixins.toolbar,mainContainer:{padding:e.spacing(3)+"px "+e.spacing(6)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(cr))),pr=a(565),dr=a(566),ur=a(564),mr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={anchorEl:null},i.handleUserMenuClick=i.handleUserMenuClick.bind(Object(R.a)(i)),i.handleUserMenuClose=i.handleUserMenuClose.bind(Object(R.a)(i)),i.logout=i.logout.bind(Object(R.a)(i)),i}return Object(d.a)(a,[{key:"handleUserMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleUserMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"logout",value:function(){this.setState({anchorEl:null}),window.location.href="/user/logout"}},{key:"goView",value:function(e){this.setState({anchorEl:null}),this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserInfo,i=t.classes,n=t.className,s=t.intl;return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)("div",{className:[i.settings,n].join(" "),onClick:this.handleUserMenuClick,children:[Object(se.jsx)(Fe.a,{src:D.HOSTS.PGYER_AVATAR_HOST+a.icon,className:i.icon}),Object(se.jsx)(fe.a,{icon:be.G,className:i.down})]}),Object(se.jsxs)(pt.a,{id:"user-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.handleUserMenuClose,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:i.menu},MenuListProps:{className:i.list},getContentAnchorEl:null,children:[Object(se.jsxs)(ut.a,{disabled:!0,className:i.name,children:[Object(se.jsx)(w.a,{variant:"h6",component:"div",children:a.name}),Object(se.jsx)(w.a,{variant:"caption",component:"div",children:a.email})]}),Object(se.jsx)(ta.a,{}),Object(se.jsxs)(ut.a,{onClick:function(t){e.goView("/settings/profile")},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.t})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.profile"})})]}),Object(se.jsxs)(ut.a,{onClick:function(t){e.goView("/settings/email")},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.j})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.mail"})})]}),Object(se.jsxs)(ut.a,{onClick:function(t){e.goView("/settings/sshkey")},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.q})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.SSHKey_pl"})})]}),Object(se.jsx)(ta.a,{}),Object(se.jsxs)(ut.a,{onClick:this.logout,children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.l})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:s.formatMessage({id:"menu.logout"})})]})]})]})}}]),a}(i.Component),hr=Object(N.b)(Object(S.a)((function(e){return{settings:{display:"flex",alignItems:"center",cursor:"pointer"},menu:{width:e.spacing(30),marginTop:e.spacing(1),padding:0},list:{"& > li":{height:e.spacing(5)},"& > hr":{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},name:{opacity:"1 !important",display:"block",height:"auto !important"},icon:{width:e.spacing(4),height:e.spacing(4)},down:{marginLeft:e.spacing(2),fontSize:e.spacing(1)}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(mr)))),gr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={anchorEl:null,userInfoLoadingStatus:!1},i.handleUserMenuClick=i.handleUserMenuClick.bind(Object(R.a)(i)),i.handleUserMenuClose=i.handleUserMenuClose.bind(Object(R.a)(i)),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({userInfoLoadingStatus:!0})}},{key:"handleUserMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleUserMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"changeLanguage",value:function(e){this.props.dispatchEvent({type:"data.currentLanguage.update",data:e}),this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=this.props,i=a.intl,n=a.classes,s=a.currentLanguage;return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsx)(Ae,{label:"label.language",onClick:this.handleUserMenuClick,icon:be.r,className:this.props.className}),Object(se.jsxs)(pt.a,{id:"language-menu",anchorEl:t,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:n.menu},getContentAnchorEl:null,open:Boolean(t),onClose:this.handleUserMenuClose,children:[Object(se.jsx)(ut.a,{selected:"zh-cn"===s,onClick:function(t){return e.changeLanguage("zh-cn")},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"lang.chinese"})})}),Object(se.jsx)(ut.a,{selected:"en-us"===s,onClick:function(t){return e.changeLanguage("en-us")},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:i.formatMessage({id:"lang.english"})})})]})]})}}]),a}(i.Component),fr=Object(N.b)(Object(S.a)((function(e){return{menu:{marginTop:e.spacing(1),padding:0}}}))(Object(h.f)(Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(gr)))),br=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={newMenuAnchor:null,helpMenuAnchor:null},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.currentUserInfo,r=t.scrollTrigger,n=t.expandStatus,s=t.history,o=t.intl,c=t.notificationOpenStatusToggle;return Object(se.jsx)(pr.a,{position:"fixed",color:"default",className:a.appBar,elevation:r?2:0,children:Object(se.jsx)(dr.a,{children:Object(se.jsxs)(k.a,{container:!0,justifyContent:"space-between",children:[Object(se.jsx)(k.a,{item:!0,children:Object(se.jsx)("div",{className:[a.placeholder,n?a.placeholderExpanded:a.placeholderCollapsed].join(" ")})}),Object(se.jsxs)(k.a,{item:!0,className:a.options,children:[Object(se.jsx)(Ae,{label:"label.create",color:"primary",onClick:function(t){return e.setState({newMenuAnchor:t.currentTarget})},icon:be.E,className:a.optionItem}),Object(se.jsx)(ta.a,{orientation:"vertical",className:[a.split,a.optionItem].join(" ")}),Object(se.jsxs)(pt.a,{id:"new-menu",anchorEl:this.state.newMenuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},PaperProps:{className:a.menu},getContentAnchorEl:null,open:Boolean(this.state.newMenuAnchor),onClose:function(t){return e.setState({newMenuAnchor:null})},children:[Object(se.jsx)(ut.a,{onClick:function(t){s.push("/repositories/new"),e.setState({newMenuAnchor:null})},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:o.formatMessage({id:"label.newRepository"})})}),Object(se.jsx)(ut.a,{onClick:function(t){s.push("/groups/new"),e.setState({newMenuAnchor:null})},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:o.formatMessage({id:"label.newGroup"})})}),Object(se.jsx)(ut.a,{onClick:function(t){s.push("/mergerequests/new"),e.setState({newMenuAnchor:null})},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:o.formatMessage({id:"label.createMergeRequest"})})})]}),Object(se.jsx)(Ae,{label:"label.mergeRequest",onClick:function(){s.push("/mergerequests")},icon:be.v,className:a.optionItem}),Object(se.jsx)(Ae,{label:"label.notification",icon:be.c,badge:i.unReadNotification,className:a.optionItem,onClick:function(e){return c()}}),Object(se.jsx)(fr,{className:a.optionItem}),Object(se.jsx)(Ae,{label:"label.help",onClick:function(t){return e.setState({helpMenuAnchor:t.currentTarget})},icon:be.p,className:a.optionItem}),i.admin&&Object(se.jsx)(Ae,{label:"label.adminArea",onClick:function(){s.push("/admin")},icon:be.w,className:a.optionItem}),Object(se.jsx)(pt.a,{id:"help-menu",anchorEl:this.state.helpMenuAnchor,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},PaperProps:{className:a.menu},getContentAnchorEl:null,open:Boolean(this.state.helpMenuAnchor),onClose:function(t){return e.setState({helpMenuAnchor:null})},children:Object(se.jsx)(ut.a,{onClick:function(t){e.setState({helpMenuAnchor:null}),window.postMessage({verifyKey:"kf_doc_verify_key"},window.location.origin)},children:Object(se.jsx)(gt.a,{disableTypography:!0,primary:o.formatMessage({id:"label.getHelp"})})})}),Object(se.jsx)(hr,{className:a.optionItem})]})]})})})}}]),a}(r.a.Component),jr=Object(N.b)(Object(h.f)(Object(S.a)((function(e){return{appBar:{width:"100%",zIndex:e.zIndex.drawer-1,borderBottom:"1px solid "+e.palette.border},placeholder:{display:"inline-block",verticalAlign:"middle",height:e.spacing(4),marginRight:e.spacing(2),transition:e.transitions.create("width")},placeholderExpanded:{width:e.spacing(37)},placeholderCollapsed:{width:e.spacing(8)},options:{display:"flex"},split:{marginTop:e.spacing(1),height:e.spacing(2)},optionItem:{marginRight:e.spacing(2)},menu:{marginTop:e.spacing(1),padding:0}}}))(Object(l.b)((function(e,t){return{expandStatus:e.DrawerStates.expandStatus,currentUserInfo:e.DataStore.currentUserInfo}}),(function(e,t){return{notificationOpenStatusToggle:function(){return e({type:"notification.notificationOpenStatus.toggle"})}}}))((Ma={threshold:0,watching:".app-content"},function(e){return function(t){Object(u.a)(i,t);var a=Object(m.a)(i);function i(e){var t;return Object(p.a)(this,i),(t=a.call(this,e)).target=null,t.cancel=null,t.onScroll=t.onScroll.bind(Object(R.a)(t)),t.state={scrollTrigger:!1},t}return Object(d.a)(i,[{key:"componentDidMount",value:function(){Ma.watching&&(this.cancel&&this.cancel(),this.target=document.querySelector(Ma.watching),this.cancel=function(){this.target.removeEventListener("scroll",this.onScroll)},this.target.addEventListener("scroll",this.onScroll),this.onScroll({target:this.target}))}},{key:"componentWillUnmount",value:function(){this.cancel&&this.cancel(),this.cancel=null,this.target=null}},{key:"onScroll",value:function(e){var t=e.target.pageYOffset||e.target.scrollTop;t>Ma.threshold&&!this.state.scrollTrigger?this.setState({scrollTrigger:!0}):t<=Ma.threshold&&this.state.scrollTrigger&&this.setState({scrollTrigger:!1})}},{key:"render",value:function(){return Object(se.jsx)(e,Object(y.a)({ref:this.mountContainer,scrollTrigger:this.state.scrollTrigger},this.props))}}]),i}(r.a.Component)})(br))))),Or=a(578),vr=a(539),yr=a(560),xr=a(297),Cr=a.n(xr),Sr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={anchorElement:null},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getToRepository",value:function(e){this.setState({anchorElement:null}),this.props.history.push("/"+e.group.name+"/"+e.name+"/")}},{key:"getToGroup",value:function(e){this.setState({anchorElement:null}),this.props.history.push("/groups/"+e.name+"/")}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.intl,r=t.history,n=t.match,s=t.currentRepositoryKey,o=t.currentGroupKey,c=t.repositoryList,l=t.groupList,p=c.filter(U.withPermission(L.PermissionCode.REPO_READ)).map((function(t,i){return Object(se.jsxs)(ut.a,{onClick:function(a){e.getToRepository(t)},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.X,className:a.icon})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:t.group.displayName+"/"+t.displayName})]},"r"+i)})),d=l.filter(U.withPermission(L.PermissionCode.REPO_READ)).map((function(t,i){return Object(se.jsxs)(ut.a,{onClick:function(a){e.getToGroup(t)},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:be.Y,className:a.icon})}),Object(se.jsx)(gt.a,{disableTypography:!0,primary:t.displayName+" /"})]},"g"+i)})),u=c.filter(U.id(s))[0],m=l.filter(U.id(o))[0];return Object(se.jsxs)("span",{children:[this.props.repositoryList.length+this.props.groupList.length?Object(se.jsxs)(_.a,{color:"inherit","aria-owns":"user-menu","aria-haspopup":"true",className:a.button,onClick:function(t){e.setState({anchorElement:t.currentTarget})},children:[u?u.displayName:m?m.displayName+" /":i.formatMessage({id:"menu.repository_pl"}),Object(se.jsx)(fe.a,{icon:Be.a})]}):Object(se.jsx)(_.a,{color:"inherit","aria-owns":"user-menu","aria-haspopup":"true",onClick:function(e){r.push("/repositories/new")},disabled:!0,children:i.formatMessage({id:"label.newRepository"})}),this.props.repositoryList.length+this.props.groupList.length>0&&Object(se.jsxs)(pt.a,{id:"user-menu",anchorEl:this.state.anchorElement,open:Boolean(this.state.anchorElement),onClose:function(t){e.setState({anchorElement:null})},classes:{paper:a.menu},children:[n.params.repositoryName&&p,n.params.groupName&&!n.params.repositoryName&&d]})]})}}]),a}(i.Component),Rr=Object(N.b)(Object(S.a)((function(e){return{menu:{top:e.spacing(7)+"px !important",left:e.spacing(3)+"px !important",width:e.spacing(34)+"px !important"},button:{position:"relative",maxWidth:"100%",paddingRight:e.spacing(3),"& > span":{display:"list-item",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& svg":{position:"absolute",right:e.spacing(1),top:"10px"}},icon:{fontSize:e.spacing(2)+"px"}}}))(Object(h.f)(Object(l.b)((function(e,t){return{repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentGroupKey:e.DataStore.currentGroupKey}}),(function(e,t){return{}}))(Sr)))),Nr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={open:{},itemSwitch:!1,itemName:null,avatarHover:!1},i}return Object(d.a)(a,[{key:"openChildren",value:function(e){var t=Object(y.a)({},this.state.open);t[e]=!t[e],this.setState({open:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,i=t.drawerExpandStatus,n=t.drawerConfig,s=t.location,o=t.intl,c=t.mode,l=t.repositoryList,p=t.currentRepositoryKey,d=t.groupList,u=t.currentGroupKey,m=n.map((function(t,r){var n=!1;t.activePattern.map((function(e){return s.pathname&&s.pathname.match(e)&&(n=!0),!0}));var c=Object(se.jsxs)(Wa.a,{className:[a.listItem,n?a.active:"",i?a.listItemExpand:a.listItemCollapsed].join(" "),onClick:function(){e.props.history.push(t.path),t.children&&e.openChildren(r)},children:[Object(se.jsx)(ur.a,{children:Object(se.jsx)(fe.a,{icon:t.icon,className:[a.listIcon,n?a.iconActive:""].join(" ")})}),Object(se.jsx)(gt.a,{className:[a.listItemText,i?a.listItemTextExpand:a.listItemTextCollapsed].join(" "),primary:o.formatMessage({id:t.name})}),Object(se.jsx)(w.a,{variant:"caption",children:t.count}),t.children?e.state.open[r]?Object(se.jsx)(Cr.a,{}):Object(se.jsx)(wi.a,{}):""]}),l=t.children?t.children.map((function(t,c){var l=!1;return t.activePattern.map((function(e){return s.pathname&&s.pathname.match(e)&&(l=!0),!0})),Object(se.jsx)(yr.a,{in:e.state.open[r]&&i,timeout:"auto",unmountOnExit:!0,onClick:function(){return e.props.history.push(t.path)},className:n?a.secondCollapse:"",children:Object(se.jsx)(vr.a,{component:"div",disablePadding:!0,children:Object(se.jsx)(Wa.a,{className:a.listItem,children:Object(se.jsx)(gt.a,{className:[a.listItemText,l?a.secondActive:"",i?a.listItemTextExpand:a.listItemTextCollapsed].join(" "),inset:!0,primary:o.formatMessage({id:t.name})})})})},c)})):"";return Object(se.jsxs)("div",{className:t.children&&n&&e.state.open[r]&&i?a.morePadding:"",children:[c,l]},r)})),h={},g=l.filter(U.id(p))[0],f=d.filter(U.id(u))[0];if(["repository","group"].includes(c)){var b=g&&g.icon||f&&f.icon,j=g&&g.name||f&&f.name;b?h.src=D.HOSTS.STATIC_AVATAR_PREFIX+b:j&&(h.children=j[0].toUpperCase()),"repository"===c?h.onClick=function(){e.props.history.push("/"+g.group.name+"/"+g.name+"/")}:"group"===c&&(h.onClick=function(){e.props.history.push("/groups/"+f.name)}),h.onMouseEnter=function(){e.setState({avatarHover:!0})},h.onMouseLeave=function(){e.setState({avatarHover:!1})},this.state.avatarHover&&(h.src="",h.children=Object(se.jsx)(_e.a,{title:o.formatMessage({id:"message.backHome"}),placement:"top",children:Object(se.jsx)(_.a,{variant:"contained",color:"primary",className:a.button,children:Object(se.jsx)(fe.a,{icon:be.P,style:{width:16}})})}),h.onClick=function(){e.props.history.push("/repositories"),e.setState({avatarHover:!1})})}else h.src="/static/00000000000000/images/logo-ico.png",h.onClick=function(){e.props.history.push("/repositories"),e.setState({avatarHover:!1})};return Object(se.jsxs)(r.a.Fragment,{children:[Object(se.jsxs)("div",{className:[a.drawerHeader,i?a.drawerHeaderExpand:a.drawerHeaderCollapsed].join(" "),children:[Object(se.jsx)(Fe.a,Object(y.a)({variant:"square",className:[a.avatar,this.state.avatarHover&&a.home].join(" ")},h)),Object(se.jsxs)(w.a,{variant:"subtitle1",component:"div",className:[a.title,i?a.titleExpand:a.titleCollapsed].join(" "),children:["default"===c&&"CodeFever","admin"===c&&"CodeFever Admin",["repository","group"].includes(c)&&Object(se.jsx)(Rr,{})]})]}),Object(se.jsx)(vr.a,{component:"nav",children:m})]})}}]),a}(r.a.Component),Mr=Object(N.b)(Object(S.a)((function(e){return{listItem:{overflow:"hidden",width:e.spacing(34),height:e.spacing(5),borderRadius:e.spacing(.5),transition:[e.transitions.create("width"),e.transitions.create("padding")].join(","),cursor:"pointer","& svg, & span":{color:e.palette.text.light},"&:hover":{"& > div > svg":{color:e.palette.primary.main},"& span":{color:e.palette.text.main}}},listItemExpand:{padding:"0px "+e.spacing(4)+"px"},listItemCollapsed:{width:e.spacing(5),minWidth:e.spacing(5),padding:"0px "+e.spacing(1.5)+"px"},listItemText:{margin:0,overflow:"hidden",transition:e.transitions.create("height"),"& > span":{lineHeight:e.spacing(5)+"px"}},listItemTextExpand:{height:e.spacing(5)+"px"},listItemTextCollapsed:{height:0},drawerHeader:{display:"flex",overflow:"hidden",alignItems:"center",height:e.spacing(4),width:e.spacing(28),background:e.palette.background.main,padding:e.spacing(1)+"px "+e.spacing(3)+"px",transition:[e.transitions.create("width"),e.transitions.create("padding")].join(",")},drawerHeaderExpand:{width:e.spacing(28),padding:e.spacing(1)+"px "+e.spacing(3)+"px"},drawerHeaderCollapsed:{width:e.spacing(4),padding:e.spacing(1)+"px "+e.spacing(.5)+"px"},active:{backgroundColor:e.palette.background.light,"& span":{color:e.palette.text.main}},secondCollapse:{backgroundColor:e.palette.background.light},morePadding:{width:e.spacing(34),borderRadius:e.spacing(.5),paddingBottom:e.spacing(2)+"px",backgroundColor:e.palette.background.light},secondActive:{borderRadius:e.spacing(.5),backgroundColor:e.palette.background.main,"& span":{color:e.palette.text.main}},home:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},iconActive:{color:e.palette.primary.main+" !important"},avatar:{cursor:"pointer",width:e.spacing(4),height:e.spacing(4)},title:{fontSize:"18px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",height:e.spacing(4),paddingLeft:e.spacing(2),lineHeight:e.spacing(4)+"px",transition:e.transitions.create("height")},titleExpand:{height:e.spacing(4)},titleCollapsed:{height:0},button:{"&:hover":{background:e.palette.primary.main}}}}))(Object(l.b)((function(e,t){return{drawerExpandStatus:e.DrawerStates.expandStatus,repositoryList:e.DataStore.repositoryList,groupList:e.DataStore.groupList,currentRepositoryKey:e.DataStore.currentRepositoryKey,currentGroupKey:e.DataStore.currentGroupKey}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Object(h.f)(Nr))));var wr={makeDrawerConfig:function(){return[{path:"/repositories",name:"menu.repository_pl",icon:be.X,activePattern:[/^\/repositories\/?.*$/i]},{path:"/groups",name:"menu.group_pl",icon:be.Y,activePattern:[/^\/groups\/?.*$/i]},{path:"/mergerequests",name:"menu.mergeRequest_pl",icon:be.T,activePattern:[/^\/mergerequests\/?.*$/i]},{path:"/settings",name:"menu.setting_pl",icon:be.Z,activePattern:[/^\/settings$/i,/^\/settings\/(profile|email|sshkey|notification)$/i],children:[{path:"/settings/profile",name:"menu.profile",icon:be.R,activePattern:[/^\/settings$/i,/^\/settings\/profile/i]},{path:"/settings/email",name:"menu.mail",icon:be.R,activePattern:[/^\/settings\/email/i]},{path:"/settings/sshkey",name:"menu.SSHKey_pl",icon:be.L,activePattern:[/^\/settings\/sshkey/i]},{path:"/settings/notification",name:"menu.notification",icon:be.L,activePattern:[/^\/settings\/notification/i]}]}]},makeAdminDrawerConfig:function(){return[{path:"/admin/dashboard",name:"menu.dashboard",icon:be.Q,activePattern:[/^\/admin(\/)?$/i,/^\/admin\/dashboard\/?.*$/i]},{path:"/admin/users",name:"menu.user_pl",icon:be.S,activePattern:[/^\/admin\/users\/?.*$/i]},{path:"/admin/groups",name:"menu.group_pl",icon:be.Y,activePattern:[/^\/admin\/groups\/?.*$/i]},{path:"/admin/repositories",name:"menu.repository_pl",icon:be.X,activePattern:[/^\/admin\/repositories\/?.*$/i]},{path:"/admin/settings",name:"menu.setting_pl",icon:be.Z,activePattern:[/^\/admin\/settings\/?.*$/i]}]},makeGroupDrawerConfig:function(e){return e&&e.group?[{path:["/groups",e.group.name,"repositories"].join("/"),name:"menu.repository_pl",icon:be.X,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/repositories/i]},{path:["/groups",e.group.name,"mergerequests"].join("/"),name:"menu.mergeRequest_pl",icon:be.T,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/mergerequests\/?.*$/i]},{path:["/groups",e.group.name,"members"].join("/"),name:"menu.member_pl",icon:be.S,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/members(\/)?$/i]},{path:["/groups",e.group.name,"activities"].join("/"),name:"menu.activity_pl",icon:be.Q,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/activities(\/)?/i]},{path:["/groups",e.group.name,"settings"].join("/"),name:"menu.setting_pl",icon:be.Z,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/settings\/.*$/i],children:[{path:["/groups",e.group.name,"settings","general"].join("/"),name:"menu.general",icon:be.Z,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings(\/)?$/i,/\/groups\/([A-Za-z0-9_]{5,})\/settings\/general(\/)?$/i]},{path:["/groups",e.group.name,"settings","advanced"].join("/"),name:"menu.advanced",icon:be.Z,activePattern:[/\/groups\/([A-Za-z0-9_]{5,})\/settings\/advanced(\/)?$/i]}]}]:[]},makeRepositoryDrawerConfig:function(e){return e&&e.repository?[{path:["",e.group.name,e.repository.name,"files"].join("/"),name:"menu.file_pl",icon:be.N,activePattern:[/^\/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/files(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/files\/.*$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/blame\/.*$/i]},{path:["",e.group.name,e.repository.name,"commits"].join("/"),name:"menu.commit_pl",count:e.count.commit,icon:be.J,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commits(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commits\/.*$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/commit\/.*$/i]},{path:["",e.group.name,e.repository.name,"mergerequests"].join("/"),name:"menu.mergeRequest_pl",count:e.count.mergeRequest.open,icon:be.T,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/mergerequests(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/mergerequests\/.*$/i]},{path:["",e.group.name,e.repository.name,"branches"].join("/"),name:"menu.branch_pl",count:e.count.branch,icon:be.F,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/branches(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/branches\/.*$/i]},{path:["",e.group.name,e.repository.name,"tags"].join("/"),name:"menu.tag_pl",count:e.count.tag,icon:be.ab,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/tags(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/tags\/.*$/i]},{path:["",e.group.name,e.repository.name,"members"].join("/"),name:"menu.member_pl",count:e.members&&e.members.filter(U.notDeleted()).length||0,icon:be.S,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/members(\/)?$/i]},{path:["",e.group.name,e.repository.name,"activities"].join("/"),name:"menu.activity_pl",icon:be.Q,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/activities(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings"].join("/"),name:"menu.setting_pl",icon:be.Z,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/.*$/i],children:[{path:["",e.group.name,e.repository.name,"settings","general"].join("/"),name:"menu.general",icon:be.Z,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings(\/)?$/i,/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/general(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings","branch"].join("/"),name:"menu.branch_pl",icon:be.Z,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/branch(\/)?$/i]},{path:["",e.group.name,e.repository.name,"settings","advanced"].join("/"),name:"menu.advanced",icon:be.Z,activePattern:[/([A-Za-z0-9_]{5,})\/[A-Za-z0-9_]+\/settings\/advanced(\/)?$/i]}]}]:[]}},kr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.expandStatus,i=e.toggleDrawer,r=e.currentGroupConfig,n=e.currentRepositoryConfig;return Object(se.jsxs)("div",{className:t.drawerContainer,children:[Object(se.jsx)("div",{className:t.drawerExpandControl,onClick:i,children:Object(se.jsx)(fe.a,{icon:be.u,className:a?"":t.transform})}),Object(se.jsx)(Or.a,{open:!0,variant:"permanent",classes:{paper:t.drawerPaper},className:[t.container,a?t.containerExpanded:t.containerCollapsed].join(" "),children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{path:"/(settings|mergerequests)",children:Object(se.jsx)(Mr,{drawerConfig:wr.makeDrawerConfig(),mode:"default"})}),Object(se.jsx)(h.a,{path:"/admin",children:Object(se.jsx)(Mr,{drawerConfig:wr.makeAdminDrawerConfig(),mode:"admin"})}),Object(se.jsx)(h.a,{path:"/(repositories|groups)/(new|fork|forklist)",children:Object(se.jsx)(Mr,{drawerConfig:wr.makeDrawerConfig(),mode:"default"})}),Object(se.jsx)(h.a,{path:"/groups/:groupName([A-Za-z0-9_]{5,})",children:Object(se.jsx)(Mr,{drawerConfig:wr.makeGroupDrawerConfig(r),mode:"group"})}),Object(se.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",children:Object(se.jsx)(Mr,{drawerConfig:wr.makeRepositoryDrawerConfig(n),mode:"repository"})}),Object(se.jsx)(h.a,{children:Object(se.jsx)(Mr,{drawerConfig:wr.makeDrawerConfig(),mode:"default"})})]})})]})}}]),a}(r.a.Component),_r=Object(S.a)((function(e){return{drawerContainer:{position:"relative"},container:{height:"100vh",transition:e.transitions.create("width")},containerExpanded:{width:e.spacing(40)},containerCollapsed:{width:e.spacing(11)},drawerPaper:{position:"relative",boxSizing:"border-box",width:"100%"},drawerExpandControl:{position:"absolute",top:"19px",right:"-12px",fontSize:"14px",color:"#64728C",cursor:"pointer",textAlign:"center",borderRadius:"50%",width:e.spacing(3),height:e.spacing(3),zIndex:e.zIndex.drawer+1,lineHeight:e.spacing(3)+"px",background:e.palette.background.light,border:"1px solid "+e.palette.border},transform:{transform:"rotate(180deg)"},toolbar:e.mixins.toolbar}}))(Object(l.b)((function(e){return{expandStatus:e.DrawerStates.expandStatus,currentGroupConfig:e.DataStore.currentGroupConfig,currentRepositoryConfig:e.DataStore.currentRepositoryConfig}}),(function(e,t){return{toggleDrawer:function(){e({type:"drawer.expandStatus.toggle"})}}}))(Object(h.f)(kr))),Er=a(568),Tr=a(567),Ar=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={loading:!1},i.observed={openStatus:!1},i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.observed.openStatus!==e.openStatus&&(this.observed.openStatus=e.openStatus,this.setState({loading:!1}),this.props.dispatchEvent(te.consumeComformation())),this.observed.eventCount!==e.eventCount&&this.props.dispatchEvent(te.consumeComformation()),!0}},{key:"onCancel",value:function(e){this.props.rejectFn&&this.props.rejectFn(),this.props.dispatchEvent(te.cancelComformation())}},{key:"onAccept",value:function(e){this.setState({loading:!0}),this.props.acceptFn&&this.props.acceptFn()}},{key:"render",value:function(){var e=this,t=this.props,a=t.openStatus,i=t.title,r=t.description,n=t.intl;return Object(se.jsxs)(dt.a,{open:a,onClose:function(t){return e.onCancel(t)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(se.jsx)(ht.a,{id:"alert-dialog-title",children:i}),Object(se.jsx)(ft.a,{children:Object(se.jsx)(Tr.a,{id:"alert-dialog-description",children:r})}),Object(se.jsxs)(Er.a,{children:[Object(se.jsx)(_.a,{color:"default",onClick:function(t){return e.onCancel(t)},children:n.formatMessage({id:"label.cancel"})}),Object(se.jsx)(_.a,{color:"primary",onClick:function(t){return e.onAccept(t)},children:this.state.loading?Object(se.jsx)(me.a,{size:24}):n.formatMessage({id:"label.ok"})})]})]})}}]),a}(r.a.Component),Dr=Object(N.b)(Object(h.f)(Object(l.b)((function(e,t){return{openStatus:e.NotificationStates.confirmation.open,eventCount:e.NotificationStates.confirmation.eventCount,title:e.NotificationStates.confirmation.title,description:e.NotificationStates.confirmation.description,acceptFn:e.NotificationStates.confirmation.accept,rejectFn:e.NotificationStates.confirmation.reject}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Ar))),Ir=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={pending:!1,menuAnchor:null,category:D.notificationCategory.unRead,list:[],pagesize:20,page:1,loadMore:!0},i}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.notificationOpenStatus!==e.notificationOpenStatus&&!0===e.notificationOpenStatus||this.state.category!==t.category?(this.getData(t,!0),!1):this.state.page===t.page||(this.getData(t,!1),!1)}},{key:"getData",value:function(e,t){var a=this,i=e.pending,r=e.category,n=e.list,s=e.pagesize,o=e.page,c=e.loadMore;if(i)return!1;this.setState({pending:!0,list:t?[]:n,page:t?1:o,loadMore:!!t||c}),ee.notifications({category:r,page:t?1:o}).then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(e){e.code||(e.data.map((function(e){return function(e,t){if(!e.type||!e.data)return!1;var a=e.data=JSON.parse(e.data);return e.text=t.formatMessage({id:"notification."+e.type},a),e.url="",["mergeRequest:create","mergeRequest:close","mergeRequest:merge","mergeRequestReviewer:create","mergeRequestReviewer:review"].includes(e.type)&&(e.url=[a.group,a.repository,"mergerequests",a.number].join("/")),!0}(e,a.props.intl)})),a.setState({pending:!1,list:[].concat(Object(T.a)(a.state.list),Object(T.a)(e.data)),loadMore:e.data.length===s}))}))}},{key:"reloadUserData",value:function(){var e=this;ee.getUserInfo().then(re.withEventdispatcher(this.props.dispatchEvent)(re.getJSONData)).then((function(t){t.code||e.props.dispatchEvent({type:"data.currentUserInfo.update",data:t.data})}))}},{key:"setNotificationRead",value:function(e){var t=this,a=this.props,i=a.dispatchEvent,r=a.intl,n=this.state.list;if(this.state.pending)return!1;this.setState({menuAnchor:null,pending:!0}),ee.setNotificationRead({id:e,all:e?"":"1"}).then(re.withEventdispatcher(i)(re.getJSONData)).then((function(a){n.map((function(t,a){return e?e&&t.id===e&&(t.isRead=!0):t.isRead=!0,!0})),t.setState({pending:!1,list:n}),t.reloadUserData(),a.code&&i(te.NewNotification(r.formatMessage({id:"message.error.updateFail"}),2))}))}},{key:"deleteNotification",value:function(e){var t=this,a=this.props,i=a.dispatchEvent,r=a.intl,n=this.state.list;if(this.state.pending)return!1;this.setState({menuAnchor:null,pending:!0}),ee.deleteNotification({id:e,all:e?"":"1"}).then(re.withEventdispatcher(i)(re.getJSONData)).then((function(a){n=n.filter((function(a,i){return e?(a.id===e&&!a.isRead&&t.reloadUserData(),a.id!==e):!a.isRead})),t.setState({pending:!1,list:n}),a.code&&i(te.NewNotification(r.formatMessage({id:"message.error.deleteFail"}),2))}))}},{key:"aLink",value:function(e){var t=this.props.history;this.props.notificationOpenStatusClose(),!e.isRead&&this.setNotificationRead(e.id),t.push(V(e.url))}},{key:"notificationSetting",value:function(){this.props.notificationOpenStatusClose(),this.props.history.push(V("settings/notification"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.notificationOpenStatus,i=t.notificationOpenStatusClose,r=t.classes,n=t.intl,s=this.state,o=s.pending,c=s.menuAnchor,l=s.category,p=s.list,d=s.page,u=s.loadMore,m=[];return m[D.notificationCategory.all]=n.formatMessage({id:"label.all"}),m[D.notificationCategory.unRead]=n.formatMessage({id:"label.unread"}),Object(se.jsxs)(Or.a,{anchor:"right",open:a,onClose:function(e){return!o&&i()},className:r.notification,elevation:8,PaperProps:{className:r.paper,onScroll:function(t){return!o&&u&&t.target.offsetHeight-2+t.target.scrollTop===t.target.scrollHeight&&e.setState({page:d+1})}},children:[Object(se.jsxs)(k.a,{container:!0,className:r.header,children:[Object(se.jsxs)(k.a,{container:!0,className:r.headerTitle,children:[Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsx)(w.a,{variant:"h6",component:"div",children:n.formatMessage({id:"label.notificationCenter"})})}),Object(se.jsxs)(k.a,{item:!0,xs:4,align:"right",children:[Object(se.jsx)(Ae,{label:"label.setting",icon:be.Z,className:r.icon,onClick:function(t){return e.notificationSetting()}}),Object(se.jsx)(Ae,{label:"label.close",icon:be.f,className:[r.icon,r.close].join(" "),onClick:function(e){return!o&&i()}})]})]}),Object(se.jsx)(k.a,{item:!0,xs:12,className:r.menu,children:Object(se.jsxs)(vt,{currentTab:l,onChange:function(t,a){return!o&&e.setState({category:a})},tabs:m,children:[Object(se.jsx)(Ae,{label:"label.more",icon:be.V,className:[r.icon,r.more].join(" "),onClick:function(t){return e.setState({menuAnchor:t.target})}}),Object(se.jsxs)(pt.a,{anchorEl:c,open:!!c,onClose:function(t){return e.setState({menuAnchor:null})},children:[Object(se.jsx)(ut.a,{onClick:function(t){return e.setNotificationRead("")},children:n.formatMessage({id:"message.tagAllRead"})}),Object(se.jsx)(ut.a,{onClick:function(t){return e.deleteNotification("")},children:n.formatMessage({id:"message.deleteAllReaded"})})]})]})})]}),Object(se.jsxs)(k.a,{container:!0,children:[p.map((function(t,a){return Object(se.jsxs)(k.a,{item:!0,xs:12,className:[r.notify,t.isRead?r.readed:""].join(" "),onClick:function(a){return!t.isRead&&e.setNotificationRead(t.id)},children:[Object(se.jsxs)(k.a,{container:!0,children:[Object(se.jsx)(k.a,{item:!0,xs:8,children:Object(se.jsxs)(w.a,{variant:"body2",component:"div",className:r.notifiTitle,children:["\xa0\xb7\xa0",t.data.group&&t.data.group+" / ",t.data.repository]})}),Object(se.jsxs)(k.a,{item:!0,xs:4,className:r.notifySetting,align:"right",children:[!t.isRead&&Object(se.jsx)(Ae,{label:"message.tagRead",icon:be.e,className:r.icon}),Object(se.jsx)(Ae,{label:"label.delete",icon:be.bb,className:r.icon,onClick:function(a){e.deleteNotification(t.id),a.stopPropagation()}})]})]}),Object(se.jsx)(w.a,{variant:t.isRead?"body2":"subtitle2",component:"div",className:r.notifiContent,onClick:function(a){e.aLink(t),a.stopPropagation()},children:t.text}),Object(se.jsx)(w.a,{component:"div",className:r.notifiTitle,children:Object(se.jsx)(Mt,{timestamp:1*t.created})})]},a)})),u?Object(se.jsx)(k.a,{container:!0,className:r.loading,children:o&&Object(se.jsx)(me.a,{size:30})}):Object(se.jsx)(k.a,{item:!0,xs:12,align:"center",className:r.loading,children:Object(se.jsx)(_.a,{size:"small",disabled:!0,children:n.formatMessage({id:"label.noMore"})})})]})]})}}]),a}(r.a.Component),Fr=Object(N.b)(Object(S.a)((function(e){return{notification:{"& > div:first-child":{background:"transparent"}},paper:{padding:0,top:e.spacing(8),boxSizing:"border-box",width:e.spacing(50),height:"calc(100% - 64px)",background:e.palette.background.light,border:"1px solid "+e.palette.border},header:{top:0,zIndex:1,position:"sticky",background:e.palette.background.light},headerTitle:{display:"flex",alignItems:"center",height:e.spacing(6)+"px",padding:"0px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},close:{"& svg":{width:"14px !important",height:"14px !important",padding:"2px"}},icon:{color:e.palette.text.light},more:{marginTop:e.spacing(.5)},menu:{padding:"0px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},notifySetting:{display:"none"},notify:{"&:hover":{background:e.palette.background.main,"& > div:first-child > div:nth-of-type(2)":{display:"block"}},padding:e.spacing(2)+"px "+e.spacing(3)+"px",borderBottom:"1px solid "+e.palette.border},notifiTitle:{lineHeight:e.spacing(4)+"px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > span":{fontSize:"12px"}},readed:{"& div, & span":{color:e.palette.text.lighter+"!important"}},notifiContent:{cursor:"pointer",lineHeight:e.spacing(2.5)+"px",maxHeight:e.spacing(5),overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical"},loading:{justifyContent:"center",padding:e.spacing(4)+"px"}}}))(Object(l.b)((function(e){return{notificationOpenStatus:e.NotificationStates.notificationOpenStatus}}),(function(e,t){return{dispatchEvent:function(t){e(t)},notificationOpenStatusClose:function(){return e({type:"notification.notificationOpenStatus.close"})}}}))(Object(h.f)(Ir)))),Pr=a(300),Lr=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).messageLists=[],e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.messageLists=[]}},{key:"addMessage",value:function(e){var t=this;if(e.message){var a=this.messageLists.length;this.messageLists.push(Object(y.a)(Object(y.a)({},e),{},{openStatus:!0})),setTimeout((function(){t.closeMessage(a)}),5e3)}}},{key:"closeMessage",value:function(e){var t=this;this.messageLists[e].openStatus=!1,this.props.dispatchEvent({type:"notification.message.change"}),setTimeout((function(){t.messageLists.reduce((function(e,t){return e||t.openStatus}),!1)||(t.messageLists=[])}),200)}},{key:"shouldComponentUpdate",value:function(e,t){return e.notificationBody!==this.props.notificationBody}},{key:"render",value:function(){var e=this,t=this.props.notificationBody;this.addMessage(t);var a=0;return this.messageLists.map((function(t,i){return a+=t.openStatus?1:0,Object(se.jsx)(Pr.a,{level:t.level,offset:a>0?a-1:0,open:t.openStatus,onClose:function(t,a){return"timeout"===a&&e.closeMessage(i)},action:t.action,message:t.message},i)}))}}]),a}(r.a.Component),Br=Object(l.b)((function(e,t){return{notificationBody:e.NotificationStates.notificationBody}}),(function(e,t){return{dispatchEvent:function(t){e(t)}}}))(Lr),Ur=Object(y.a)({__namespace__:"lang"},{chinese:"\u7b80\u4f53\u4e2d\u6587",english:"English"}),Gr=Object(y.a)(Object(y.a)({},{Added:"\u5df2\u6dfb\u52a0",created:"\u5df2\u521b\u5efa",updated:"\u5df2\u66f4\u65b0",removed:"\u5df2\u79fb\u9664",deleted:"\u5df2\u5220\u9664",copied:"\u5df2\u62f7\u8d1d",merged:"\u5df2\u5408\u5e76",opened:"\u5df2\u6253\u5f00",closed:"\u5df2\u5173\u95ed",binded:"\u5df2\u7ed1\u5b9a",unbinded:"\u5df2\u89e3\u7ed1",verified:"\u5df2\u9a8c\u8bc1",approved:"\u5df2\u8bc4\u5ba1",enabled:"\u5df2\u6062\u590d",disabled:"\u5df2\u7981\u7528",reseted:"\u5df2\u91cd\u7f6e",createPersonalGroupNotice:"\u81f3\u5c11\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4\u4f5c\u4e3a\u4e2a\u4eba\u4ed3\u5e93\u7ec4",emailCodeHasSendNewEmail:"\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u81f3\u65b0\u7684\u90ae\u7bb1",phoneCodeHasSendNewPhone:"\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u81f3\u65b0\u7684\u624b\u673a",finishIdentityVerify:"\u524d\u8bf7\u8f93\u5165\u60a8\u7684\u8d26\u53f7\u5bc6\u7801\u4ee5\u5b8c\u6210\u8eab\u4efd\u9a8c\u8bc1",unbindEnterCodeFeverPassword:"\u82e5\u786e\u8ba4\uff0c\u8bf7\u8f93\u5165\u60a8\u7684CodeFever\u8d26\u53f7\u5bc6\u7801\u4ee5\u9a8c\u8bc1\u8eab\u4efd",scanQrcodeBind:"\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u5b8c\u6210\u7ed1\u5b9a",theAccountUsedWechat_N:'\u8be5\u8d26\u53f7\u66fe\u4f7f\u7528\u5fae\u4fe1"{n}"\u4e0e\u84b2\u516c\u82f1\u65d7\u4e0b\u4ea7\u54c1\u5c0f\u7a0b\u5e8f\u7ed1\u5b9a\uff0c\u786e\u8ba4\u4f7f\u7528\u5f53\u524d\u5fae\u4fe1\u8d26\u53f7\u66ff\u6362"{n}"\u7684\u7ed1\u5b9a\u5417?',rebindWechat:"\u53d6\u6d88\uff0c\u66f4\u6362\u5fae\u4fe1\u540e\u91cd\u65b0\u7ed1\u5b9a",unbindAllProduct:"\u89e3\u9664\u7ed1\u5b9a\uff0c\u60a8\u5c06\u540c\u65f6\u89e3\u7ed1\u84b2\u516c\u82f1\u65d7\u4e0b\u6240\u6709\u4ea7\u54c1",mfaGuide:"\u6253\u5f00\u5177\u6709 MFA \u529f\u80fd\u7684 App \u5e76\u626b\u63cf\u4e0b\u65b9\u4e8c\u7ef4\u7801\uff0c\u8f93\u5165 App \u4e0a\u7684\u663e\u793a\u7684\u4e24\u7ec4\u4e0d\u540c\u7684 MFA \u5bc6\u7801\u5e76\u70b9\u51fb \u4fdd\u5b58 \u6309\u94ae\u5b8c\u6210 MFA \u8bbe\u5907\u8bbe\u7f6e\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u624b\u673a\u5e94\u7528\u5e02\u573a\u641c\u7d22 MFA \u4e0b\u8f7d\u4f60\u4fe1\u4efb\u7684 App\u3002",inputEmailToAddMemeber:"\u8f93\u5165\u7528\u6237\u7684\u6ce8\u518c\u90ae\u7bb1\u4ee5\u6dfb\u52a0\u4e3a\u6210\u5458",groupMemberCanControlRepositoryNotice:"\u6b64\u4ed3\u5e93\u6240\u5728\u4ed3\u5e93\u7ec4\u7684\u6210\u5458\u5bf9\u4e8e\u6b64\u4ed3\u5e93\u7684\u63a7\u5236\u6743\u7531\u5176\u4ed3\u5e93\u7ec4\u89d2\u8272\u51b3\u5b9a",repositoryChangeCreatorNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6362\u6b64\u4ed3\u5e93\u521b\u5efa\u8005\u5417 ? \u65b0\u7684\u521b\u5efa\u7740\u5c06\u62e5\u6709\u4ed3\u5e93\u6240\u6709\u7ba1\u7406\u6743\u9650, \u4e14\u66fe\u7ecf\u7684\u521b\u5efa\u8005\u5c06\u4f1a\u62e5\u6709 \u6240\u6709\u8005 \u89d2\u8272",repositoryChangeURLNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6539\u6b64\u4ed3\u5e93 URL \u5417 ? URL \u66f4\u6539\u540e\uff0c\u4e0d\u80fd\u518d\u4f7f\u7528\u539f URL \u7ba1\u7406\u4ed3\u5e93, git \u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4ed3\u5e93\u5730\u5740\u4e5f\u4f1a\u540c\u6b65\u53d8\u66f4, \u60a8\u9700\u8981\u4f7f\u7528 git remote \u547d\u4ee4\u91cd\u65b0\u8bbe\u7f6e\u4ed3\u5e93\u5730\u5740",repositoryDeleteRepositoryNotice:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4ed3\u5e93\u5417 ? \u4ed3\u5e93\u5220\u9664\u540e\u6b64\u4ed3\u5e93\u4e0d\u518d\u53ef\u7528, \u4ed3\u5e93\u5185\u7684 \u6587\u4ef6 \u548c \u76f8\u5173\u8bb0\u5f55 \u90fd\u4f1a\u4e0d\u53ef\u9006\u7684\u88ab\u5220\u9664, \u8bf7\u786e\u8ba4\u9700\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5df2\u7ecf\u5907\u4efd\u5b8c\u6210, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u64cd\u4f5c\u3002",repositoryDeleteRepositoryConfirmNotice:"\u9700\u8981\u60a8\u518d\u6b21\u786e\u8ba4\u5220\u9664\u6b64\u4ed3\u5e93 ? \u6b64\u4ed3\u5e93\u5220\u9664\u540e, \u6240\u6709\u4fe1\u606f\u548c\u6587\u4ef6\u90fd\u4f1a\u88ab\u4e0d\u53ef\u9006\u5220\u9664, \u6b64\u64cd\u4f5c\u9020\u6210\u7684\u540e\u679c\u4e0d\u53ef\u6062\u590d, \u8bf7\u786e\u8ba4\u9700\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5df2\u7ecf\u5907\u4efd\u5b8c\u6210, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u6b64\u64cd\u4f5c\u3002",groupChangeCreatorNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6362\u6b64\u4ed3\u5e93\u7ec4\u521b\u5efa\u8005\u5417 ? \u65b0\u7684\u521b\u5efa\u7740\u5c06\u62e5\u6709\u4ed3\u5e93\u7ec4\u6240\u6709\u7ba1\u7406\u6743\u9650, \u4e14\u66fe\u7ecf\u7684\u521b\u5efa\u8005\u5c06\u4f1a\u62e5\u6709 \u6240\u6709\u8005 \u89d2\u8272, \u6ce8\u610f\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4\u4e0d\u80fd\u66f4\u6539\u521b\u5efa\u8005",groupChangeURLNotice:"\u60a8\u786e\u5b9a\u9700\u8981\u66f4\u6539\u6b64\u4ed3\u5e93\u7ec4 URL \u5417 ? URL \u66f4\u6539\u540e\uff0c\u4e0d\u80fd\u518d\u4f7f\u7528\u539f URL \u7ba1\u7406\u4ed3\u5e93\u7ec4, git \u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u7ec4\u5185\u4ed3\u5e93\u5730\u5740\u4e5f\u4f1a\u540c\u6b65\u53d8\u66f4, \u60a8\u9700\u8981\u4f7f\u7528 git remote \u547d\u4ee4\u91cd\u65b0\u8bbe\u7f6e\u4ed3\u5e93\u5730\u5740",groupDeleteRepositoryNotice:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u5417 ? \u4ed3\u5e93\u7ec4\u5220\u9664\u540e\u4e0d\u518d\u53ef\u7528, \u4ed3\u5e93\u7ec4\u5185\u7684 \u76f8\u5173\u8bb0\u5f55 \u90fd\u4f1a\u4e0d\u53ef\u9006\u7684\u88ab\u5220\u9664, \u5728\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u524d\u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u6240\u6709\u4ed3\u5e93, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u64cd\u4f5c\u3002",groupDeleteRepositoryConfirmNotice:"\u9700\u8981\u60a8\u518d\u6b21\u786e\u8ba4\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4 ? \u6b64\u4ed3\u5e93\u7ec4\u5220\u9664\u540e, \u6240\u6709\u4fe1\u606f\u90fd\u4f1a\u88ab\u4e0d\u53ef\u9006\u5220\u9664, \u6b64\u64cd\u4f5c\u9020\u6210\u7684\u540e\u679c\u4e0d\u53ef\u6062\u590d, \u5728\u5220\u9664\u6b64\u4ed3\u5e93\u7ec4\u524d\u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u6240\u6709\u4ed3\u5e93, \u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\u53ef\u4ee5\u53d6\u6d88\u6b64\u64cd\u4f5c\u3002",inputCommitFilter:"\u8f93\u5165\u63d0\u4ea4\u4fe1\u606f\u8fc7\u6ee4",repositoryEmpty:"\u4ed3\u5e93\u4e3a\u7a7a",displaySource:"\u5c55\u793a\u6e90\u7801",displayRendereFile:"\u5c55\u793a\u6e32\u67d3\u5185\u5bb9",fileContentEmpty:"\u6587\u4ef6\u5185\u5bb9\u4e3a\u7a7a",fileContentOversize:"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u5141\u8bb8\u5c55\u793a\u7684\u6700\u5927\u9650\u5ea6, \u8bf7\u5728\u672c\u5730\u67e5\u770b",fileTypeNotSupport:"\u6682\u4e0d\u652f\u6301\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u5c55\u793a",diffFileToMany:"\u8d85\u8fc7\u5141\u8bb8\u5c55\u793a\u7684\u6700\u5927\u6587\u4ef6\u6570\u91cf, \u8bf7\u5728\u672c\u5730\u67e5\u770b",_S_empty:"\u8bf7\u8f93\u5165{s}",repository_S_empty:"\u4ed3\u5e93\u5185\u8fd8\u6ca1\u6709{s}",repositoryBranchEmpty:"Git\u5206\u652f\uff0c\u672c\u8d28\u4e0a\u662f\u6307\u5411\u63d0\u4ea4\u5bf9\u8c61\u7684\u53ef\u53d8\u6307\u9488\u3002\u4f7f\u7528 git \u547d\u4ee4\u521b\u5efa\u5206\u652f\uff1a 'git branch \u65b0\u5206\u652f\u540d\u79f0 \u65e7\u5206\u652f\u540d\u79f0'",repositoryTagEmpty:"\u6807\u7b7e\u662f\u67d0\u4e00\u65f6\u95f4\u70b9\u4e0a\u7684\u7248\u672c\uff0c\u901a\u5e38\u4f7f\u7528\u6807\u7b7e\u6807\u8bc6\u4ee3\u7801\u5e93\u7684\u91cd\u8981\u7248\u672c\uff0c\u5982\u5728\u9879\u76ee\u7684\u91cc\u7a0b\u7891\u521b\u5efa\u6807\u7b7e\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528 git \u547d\u4ee4\u521b\u5efa\u6807\u7b7e\uff1agit tag -a v1.0 -m '\u7248\u672c 1.0'",mergeRequestEmpty:"\u672a\u627e\u5230\u76f8\u5173\u5408\u5e76\u8bf7\u6c42\u8bb0\u5f55",addNewCommit:"\u65b0\u589e\u4e00\u4e2a\u63d0\u4ea4",alreadyMergeRequest:"\u5df2\u7ecf\u5408\u5e76\u8bf7\u6c42",alreadyCloseRequest:"\u5df2\u7ecf\u5173\u95ed\u8bf7\u6c42",assignReviewerTitle:"\u6307\u5b9a\u8bc4\u5ba1\u5458\uff08\u53ea\u80fd\u6307\u5b9a1\u4eba\uff09",selectReviewer:"\u9009\u62e9\u8bc4\u5ba1\u5458",notSelectReviewers:"\u672a\u6307\u5b9a\u8bc4\u5ba1\u5458",deleteReviewer:"\u6e05\u9664\u8bc4\u5ba1\u5458",notApprove:"\u672a\u8bc4\u5ba1",assign_N_M_Reviewer:"\u6307\u5b9a {n} \u4e3a\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u8bc4\u5ba1\u5458",delete_M_N_Reviewer:"\u5220\u9664\u4e86\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u8bc4\u5ba1\u5458 {n}",review_M_Reviewer:"\u8bc4\u5ba1\u4e86\u548c\u5e76\u8bf7\u6c42 {m} \u7684\u4ee3\u7801",_S_listEmpty:"{s}\u5217\u8868\u4e3a\u7a7a",repositoryListEmptyNotice:"\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93, \u5f00\u59cb\u4f53\u9a8c\u5427",groupListEmptyNotice:"\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4, \u7ec4\u7ec7\u5e76\u7ba1\u7406\u7ec4\u5185\u4ed3\u5e93",input_S_name:"\u8f93\u5165{s}\u540d\u8fc7\u6ee4",confirmDelete:"\u786e\u8ba4\u5220\u9664{s}?",jumpWithLink:"\u8df3\u8f6c\u94fe\u63a5",noRepositoryFind:"\u6ca1\u6709\u67e5\u770b\u6743\u9650",noCommitRecord:"\u6682\u65e0\u63d0\u4ea4\u8bb0\u5f55",plsInputInvitedEmail:"\u8bf7\u8f93\u5165\u88ab\u9080\u8bf7\u4eba\u90ae\u7bb1",repositoryDeleteTipFirst:"\u5220\u9664\u9879\u76ee\u5c06\u5220\u9664\u5176\u5b58\u50a8\u5e93\u548c\u6240\u6709\u76f8\u5173\u8d44\u6e90\uff0c\u5305\u62ec\u95ee\u9898\u3001\u5408\u5e76\u8bf7\u6c42\u7b49",repositoryDeleteTipSecond:"\u65e0\u6cd5\u8fd8\u539f\u5df2\u5220\u9664\u7684\u9879\u76ee!",inputMergeCommit:"\u8bf7\u8f93\u5165\u5408\u5e76\u7684\u63d0\u4ea4\u4fe1\u606f, \u5e76\u6839\u636e\u60c5\u51b5\u52fe\u9009\u662f\u5426\u4f7f\u7528squash\u529f\u80fd",selectDifferentBranch:"\u5fc5\u987b\u9009\u62e9\u4e0d\u540c\u7684\u5206\u652f\u8fdb\u884c\u5408\u5e76",mergeConflictTitle:"\u4f60\u8981\u5408\u5e76\u7684\u4e24\u4e2a\u5206\u652f\u6709\u4ee3\u7801\u51b2\u7a81\uff0c\u8bf7\u6839\u636e\u4e0b\u9762\u7684\u547d\u4ee4\u5728\u672c\u5730\u8fdb\u884c\u5408\u5e76",mergeConflictTip1:"\u7b2c\u4e00\u6b65:\u62c9\u53d6\u4ee3\u7801\u5e76\u65b0\u5efa\u5408\u5e76\u8bf7\u6c42\u7684\u5206\u652f",mergeConflictTip2:"\u7b2c\u4e8c\u6b65:\u672c\u5730\u68c0\u67e5\u4ee3\u7801\u66f4\u6539",mergeConflictTip3:"\u7b2c\u4e09\u6b65:\u5408\u5e76\u5206\u652f\u5e76\u89e3\u51b3\u51b2\u7a81",mergeConflictTip4:"\u7b2c\u56db\u6b65:\u5c06\u4ee3\u7801\u63a8\u9001\u5230codeForge\u5e73\u53f0",from_S_Merge_S:"\u4ece {s1} \u8bf7\u6c42\u5408\u5e76\u5230 {s2}",defaultGroupReqiured:"\u9700\u8981\u9ed8\u8ba4\u4ed3\u5e93\u7ec4",defaultGroupReqiuredDescription:"\u60a8\u9700\u8981\u81f3\u5c11\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u7ec4\u7528\u4e8e\u5b58\u653e\u4ed3\u5e93",someVersion:"\u76f8\u5173\u7248\u672c",backHome:"\u56de\u5230\u9996\u9875",inputSSHKEYContent:"\u8bf7\u8f93\u5165 SSH Key \u5185\u5bb9",inputSSHKEYName:"\u8bf7\u8f93\u5165 SSH Key \u540d\u79f0",defaultBranchDescription:"\u9ed8\u8ba4\u5206\u652f\u88ab\u89c6\u4e3a\u4ee3\u7801\u5e93\u4e2d\u7684\u57fa\u672c\u5206\u652f, \u662f\u6240\u6709\u514b\u9686\u3001\u4ee3\u7801\u63d0\u4ea4\u548c\u5408\u5e76\u8bf7\u6c42\u7684\u76ee\u6807\u5206\u652f",settingToDefaultBranch:"\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u5206\u652f",updateDefaultBranch:"\u4fee\u6539\u9ed8\u8ba4\u5206\u652f",settingDefaultBranch:"\u8bf7\u8bbe\u7f6e\u9ed8\u8ba4\u5206\u652f",protectedBranchDescription:"\u4fdd\u62a4\u5206\u652f\u4f1a\u4fdd\u969c\u5206\u652f\u5b89\u5168\u6027, \u4e0d\u5141\u8bb8\u9664\u6240\u6709\u8005\u4ee5\u5916\u89d2\u8272\u8fdb\u884c\u5f3a\u5236\u63a8\u9001\u53ca\u5220\u9664",protectedBranchRuleEmpty:"\u76ee\u524d\u65e0\u4fdd\u62a4\u5206\u652f\u89c4\u5219, \u8bf7\u65b0\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219, \u4fdd\u62a4\u5206\u652f\u5b89\u5168",inputBranchOrRegexp:"\u8bf7\u8f93\u5165\u5206\u652f\u540d\u79f0\u6216\u901a\u7528\u7b26\u89c4\u5219",createProtectedBranchRule:"\u65b0\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219",updateProtectedBranchRule:"\u4fee\u6539\u4fdd\u62a4\u5206\u652f\u89c4\u5219",deleteProtectedBranchRule:"\u5220\u9664\u4fdd\u62a4\u5206\u652f\u89c4\u5219",noBodyAllow:"\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba",primaryEmail:"\u4e3b\u90ae\u7bb1\u5730\u5740",primaryEmailDescription:"\u5f53\u524d CodeFever \u8d26\u53f7\u7684\u90ae\u7bb1\u5730\u5740, \u7528\u4e8e\u63a5\u6536\u76f8\u5173\u901a\u77e5, \u5bc6\u7801\u91cd\u7f6e, \u767b\u5f55\u7b49\u64cd\u4f5c",updatePrimaryEmail:"\u66f4\u6539\u4e3b\u90ae\u7bb1\u5730\u5740",myEmail:"\u6211\u7684\u90ae\u7bb1\u5730\u5740",myEmailDescription:"\u591a\u90ae\u7bb1\u529f\u80fd\u7528\u4e8e\u540c\u4e00\u7528\u6237\u6709\u591a\u4e2a\u4e0d\u540c\u90ae\u7bb1\u7528\u4e8e\u63d0\u4ea4\u4ee3\u7801, \u7cfb\u7edf\u53ef\u8bc6\u522b\u5e76\u521b\u5efa\u5173\u8054\u5173\u7cfb",addEmail:"\u65b0\u5efa\u90ae\u7bb1\u5730\u5740",contactedEmail:"\u5df2\u5173\u8054\u90ae\u7bb1",shouldValidation:"\u5f85\u9a8c\u8bc1",resendEmail:"\u91cd\u53d1\u90ae\u4ef6",differenceBetweenHTTPSAndSSH:"HTTPS \u4e0e SSH \u6709\u4ec0\u4e48\u533a\u522b ?",generateAndSetSSHKey:"\u8bf7\u786e\u8ba4\u5ba2\u6237\u7aef\u7684 SSH Key \u5df2\u7ecf\u751f\u6210\u5e76\u4e14\u5728 CodeFever \u4e0a\u6b63\u786e\u8bbe\u7f6e\u3002",itsMyEmail:"\u8fd9\u662f\u6211\u7684\u90ae\u7bb1",notificationSystem:"\u7cfb\u7edf\u6d88\u606f",notificationMention:"\u63d0\u5230\u6211\u7684",tagRead:"\u6807\u8bb0\u4e3a\u5df2\u8bfb",tagAllRead:"\u6807\u8bb0\u6240\u6709\u4e3a\u5df2\u8bfb",deleteAllReaded:"\u5220\u9664\u6240\u6709\u5df2\u8bfb\u7528\u6237\u6d88\u606f",mergeRequestNotification:"\u5408\u5e76\u8bf7\u6c42\u901a\u77e5",mergeRequestNotificationDesc:"\u53ef\u63a5\u6536\u4ed3\u5e93\u6210\u5458\u53d1\u5e03\u7684\u548c\u5e76\u8bf7\u6c42\u901a\u77e5, \u5f00\u53d1\u8005\u53ca\u4ee5\u4e0a\u6210\u5458\u53ef\u63a5\u6536",emailNotification:"\u90ae\u4ef6\u901a\u77e5",emailNotificationDesc:"\u901a\u77e5\u8bbe\u7f6e\u4e2d\u7684\u6d88\u606f\u5c06\u53d1\u9001\u5230\u60a8\u7684\u6ce8\u518c\u90ae\u7bb1\u4e2d\u3002",searchByName:"\u67e5\u627e\u59d3\u540d\u6216\u90ae\u7bb1",userStatusEnabled:"\u6062\u590d\u786e\u8ba4",userStatusDisabled:"\u7981\u7528\u786e\u8ba4",userStatusEnabled_N:'\u786e\u8ba4\u6062\u590d\u7528\u6237 "{n}" ?',userStatusDisabled_N:'\u786e\u8ba4\u7981\u7528\u7528\u6237 "{n}" ?',closeMFA:"\u5173\u95ed2FA\u8ba4\u8bc1",closeMFAConfirm:"\u5173\u95ed2FA\u8ba4\u8bc1\u786e\u8ba4",closeMFA_N:'\u786e\u8ba4\u5173\u95ed\u7528\u6237 "{n}" 2FA\u8ba4\u8bc1?',resetPassword:"\u91cd\u7f6e\u5bc6\u7801",reset_N_Password:'\u91cd\u7f6e\u7528\u6237 "{n}" \u5bc6\u7801',searchRepository:"\u67e5\u627e\u4ed3\u5e93",searchGroup:"\u67e5\u627e\u4ed3\u5e93\u7ec4",roleToOwner:"\u6307\u5b9a\u4e3a\u6240\u6709\u8005",setGroupOwner_S:"\u786e\u5b9a\u6307\u5b9a {s} \u4e3a\u4ed3\u5e93\u7ec4\u7684\u6240\u6709\u8005?",setAdministrator:"\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458",cancelAdministrator:"\u53d6\u6d88\u7ba1\u7406\u5458",memberRemoveConfirm:"\u6210\u5458\u5220\u9664\u786e\u8ba4",successAddUser:"\u6dfb\u52a0\u7528\u6237\u6210\u529f"}),{},{__namespace__:"message"}),Hr=Object(y.a)(Object(y.a)({},{_S_empty:"\u8bf7\u8f93\u5165{s}",_S_retype:"\u8bf7\u518d\u6b21\u8f93\u5165{s}",_S_has_illegal_character:"{s}\u542b\u6709\u975e\u6cd5\u5b57\u7b26(\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf(_)\u3001\u4e2d\u5212\u7ebf(-)\u548c\u70b9(.)\u7684\u7ec4\u5408)",_S_notChoose:"\u8bf7\u9009\u62e9{s}",_S_duplicate:"{s}\u91cd\u590d",_S_invalid:"{s}\u4e0d\u6b63\u786e",_S_notFound:"\u6ca1\u6709\u627e\u5230\u6b64{s}",noMoreThan_N_characters:"\u4e0d\u80fd\u8d85\u8fc7{n}\u4e2a\u5b57\u7b26",within_N1_to_N2_characters:"\u9700\u8981\u5728{n1}\u81f3{n2}\u4e2a\u5b57\u7b26\u4e4b\u95f4",only_N1_or_N2_characters:"\u53ea\u80fd\u5305\u542b{n1}\u6216{n2}\u4e2a\u5b57\u7b26",requireCombinationOfCharactersNumbersAndUnderscore:"\u53ea\u80fd\u662f\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7684\u7ec4\u5408",input_S_placeholder:"\u8bf7\u8f93\u5165{s}\uff0c\u53ea\u652f\u6301\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf(_)\u3001\u4e2d\u5212\u7ebf(-)\u548c\u70b9(.)\u7684\u7ec4\u5408",inputNotSame:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4",inputSame:"\u4e24\u6b21\u8f93\u5165\u4e00\u81f4",canNotAddCreatorAsMember:"\u521b\u5efa\u8005\u4e0d\u80fd\u5f53\u4f5c\u6210\u5458\u6dfb\u52a0",createRepositoryFail:"\u521b\u5efa\u4ed3\u5e93\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createGroupFail:"\u521b\u5efa\u4ed3\u5e93\u7ec4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createBranchFail:"\u521b\u5efa\u5206\u652f\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createTagFail:"\u521b\u5efa\u6807\u7b7e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createMergeRequestFail:"\u521b\u5efa\u5408\u5e76\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",createProtectedBrancheRuleFail:"\u521b\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",AddFail:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",updateFail:"\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",removeFail:"\u79fb\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",deleteFail:"\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",verifyFail:"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",forkRepositoryFail:"Fork\u4ed3\u5e93\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getFileFail:"\u83b7\u53d6\u5b8c\u6574\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getEmailCodeFail:"\u83b7\u53d6\u90ae\u7bb1\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",getPhoneCodeFail:"\u83b7\u53d6\u624b\u673a\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",change_S_Fail:"\u4fee\u6539{s}\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",waitToRetry:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",canNotChangeOwnerOfUserGroup:"\u4e0d\u80fd\u66f4\u6539\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4\u7684\u521b\u5efa\u8005",canNotDeleteUserGroup:"\u4e0d\u80fd\u5220\u9664\u4e2a\u4eba\u9ed8\u8ba4\u4ed3\u5e93\u7ec4",canNotDeleteNonEmptyGroup:"\u4ed3\u5e93\u7ec4\u5185\u542b\u6709\u672a\u5220\u9664\u7684\u4ed3\u5e93, \u8bf7\u624b\u52a8\u5220\u9664\u7ec4\u5185\u4ed3\u5e93\u540e\u518d\u8bd5",mergeRequestExists:"\u5b58\u5728\u5df2\u6253\u5f00\u7684\u5408\u5e76\u8bf7\u6c42",mergeFail:"\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",reviewedCanNotAssign:"\u4e0d\u80fd\u66ff\u6362\u8bc4\u5ba1\u8fc7\u7684\u8bc4\u5ba1\u5458",reviewedCanNotDelete:"\u4e0d\u80fd\u5220\u9664\u8bc4\u5ba1\u8fc7\u7684\u8bc4\u5ba1\u5458",branchProteced:"\u4e0d\u80fd\u5728\u4fdd\u62a4\u5206\u652f\u4e0a\u5408\u5e76",userNotReview:"\u4e0d\u80fd\u5408\u5e76\uff0c\u8fd8\u6709\u8bc4\u5ba1\u5458\u672a\u8bc4\u5ba1",inputNewEmail:"\u8bf7\u8f93\u5165\u65b0\u7684\u90ae\u7bb1",bindEmailFirst:"\u4f60\u9700\u8981\u7ed1\u5b9a\u90ae\u7bb1\u624d\u53ef\u4ee5\u7ed1\u5b9a\u7b2c\u4e09\u65b9\u5e73\u53f0",wechatHasbound:"\u8be5\u5fae\u4fe1\u53f7\u5df2\u7ecf\u88ab\u7ed1\u5b9a\uff0c\u8bf7\u626b\u7801\u767b\u5f55\u540e\u89e3\u7ed1\u91cd\u8bd5"}),{},{__namespace__:"message.error"}),qr=Object(y.a)(Object(y.a)({},{createdGroup:"\u521b\u5efa\u4ed3\u5e93\u7ec4",updateGroup_S_Avator:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u5934\u50cf",updateGroup_S_Name:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u540d\u79f0",updateGroup_S_Description:"\u66f4\u65b0\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u63cf\u8ff0",addGroup_S_Memeber:"\u5411\u4ed3\u5e93\u7ec4 {s} \u6dfb\u52a0\u4e86\u6210\u5458",changeGroup_S_MemebrRole:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93\u7ec4 {s} \u5185\u6210\u5458\u89d2\u8272",removeGroup_S_Memebr:"\u79fb\u9664\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u6210\u5458",setGroup_S_Creator:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u521b\u5efa\u8005",setGroup_S_URL:"\u4fee\u6539\u4e86\u4ed3\u5e93\u7ec4 {s} \u7684\u8bbf\u95ee\u5730\u5740",createdRepository:"\u521b\u5efa\u4ed3\u5e93",deleteRepository:"\u5220\u9664\u4ed3\u5e93",forkRepository:"fork \u5e76\u521b\u5efa\u4ed3\u5e93",updateRepository_S_Avator:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u5934\u50cf",updateRepository_S_Name:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u540d\u79f0",updateRepository_S_Description:"\u66f4\u65b0\u4e86\u4ed3\u5e93 {s} \u7684\u63cf\u8ff0",pushTo_S_Branch:"\u63a8\u9001\u63d0\u4ea4\u5230\u4ed3\u5e93 {s} \u7684\u5206\u652f",pushTo_S_NewBranch:"\u63a8\u9001\u5206\u652f\u5230\u4ed3\u5e93 {s}",created_S_NewBranch:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u65b0\u5206\u652f",delete_S_Branch:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u4e86\u5206\u652f",update_S_DefaultBranch:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u9ed8\u8ba4\u5206\u652f",created_S_ProtectedBranchRule:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u4fdd\u62a4\u5206\u652f\u89c4\u5219",update_S_ProtectedBranchRule:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u4fdd\u62a4\u5206\u652f\u89c4\u5219",delete_S_ProtectedBranchRule:"\u5220\u9664\u4e86\u4ed3\u5e93 {s} \u7684\u4fdd\u62a4\u5206\u652f\u89c4\u5219",pushTo_S_Tag:"\u63a8\u9001\u63d0\u4ea4\u5230\u4ed3\u5e93 {s} \u7684\u6807\u7b7e",pushTo_S_NewTag:"\u63a8\u9001\u6807\u7b7e\u5230\u4ed3\u5e93 {s}",created_S_NewTag:"\u5728\u4ed3\u5e93 {s} \u521b\u5efa\u65b0\u6807\u7b7e",delete_S_Tag:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u4e86\u6807\u7b7e",addRepository_S_Memeber:"\u5411\u4ed3\u5e93 {s} \u6dfb\u52a0\u4e86\u6210\u5458",changeRepository_S_MemebrRole:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93 {s} \u5185\u6210\u5458\u89d2\u8272",removeRepository_S_Memebr:"\u79fb\u9664\u4e86\u4ed3\u5e93 {s} \u7684\u6210\u5458",setRepository_S_Creator:"\u8bbe\u7f6e\u4e86\u4ed3\u5e93 {s} \u7684\u521b\u5efa\u8005",setRepository_S_URL:"\u4fee\u6539\u4e86\u4ed3\u5e93 {s} \u7684\u8bbf\u95ee\u5730\u5740",open_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u6253\u5f00\u5408\u5e76\u8bf7\u6c42",close_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u5173\u95ed\u5408\u5e76\u8bf7\u6c42",merge_S_MergeRquest:"\u5728\u4ed3\u5e93 {s} \u5408\u5e76\u8bf7\u6c42",assign_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u6307\u5b9a\u8bc4\u5ba1\u5458",delete_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u5220\u9664\u8bc4\u5ba1\u5458",review_S_Reviewer:"\u5728\u4ed3\u5e93 {s} \u8bc4\u5ba1\u4e86\u4ee3\u7801"}),{},{__namespace__:"message.activity"}),zr=Object(y.a)(Object(y.a)({},{repository:"\u4ed3\u5e93",repository_pl:"\u4ed3\u5e93",group:"\u4ed3\u5e93\u7ec4",group_pl:"\u4ed3\u5e93\u7ec4",file:"\u6587\u4ef6",file_pl:"\u6587\u4ef6",commit:"\u63d0\u4ea4",commit_pl:"\u63d0\u4ea4",mergeRequest:"\u5408\u5e76\u8bf7\u6c42",mergeRequest_pl:"\u5408\u5e76\u8bf7\u6c42",branch:"\u5206\u652f",branch_pl:"\u5206\u652f",tag:"\u6807\u7b7e",tag_pl:"\u6807\u7b7e",member:"\u6210\u5458",member_pl:"\u6210\u5458",activity:"\u52a8\u6001",activity_pl:"\u52a8\u6001",setting:"\u8bbe\u7f6e",setting_pl:"\u8bbe\u7f6e",SSHKey:"SSH Key",SSHKey_pl:"SSH Keys",user:"\u7528\u6237",user_pl:"\u7528\u6237",fileTree:"\u6587\u4ef6\u6811",merge:"\u5408\u5e76",data:"\u6570\u636e",clone:"\u514b\u9686",fork:"Fork",limitation:"\u9650\u5236",role:"\u89d2\u8272",team:"\u56e2\u961f",code:"\u6e90\u7801",hash:"\u54c8\u5e0c\u503c",time:"\u65f6\u95f4",number:"\u6570\u91cf",line:"\u884c",guest:"\u8bbf\u5ba2",reporter:"\u76d1\u7763\u8005",developer:"\u5f00\u53d1\u8005",maintianer:"\u7ef4\u62a4\u8005",owner:"\u6240\u6709\u8005",parentNode:"\u7236\u8282\u70b9"}),{},{__namespace__:"term"}),Vr=Object(y.a)(Object(y.a)({},zr),{},{CodeFever:"CodeFever",ID:"ID",user:"\u7528\u6237",name:"\u540d\u79f0",creator:"\u521b\u5efa\u8005",reviewer:"\u8bc4\u5ba1\u5458",administrator:"\u7ba1\u7406\u5458",title:"\u6807\u9898",description:"\u63cf\u8ff0",origin:"\u6765\u6e90",source:"\u6e90",target:"\u76ee\u6807",url:"URL",slug:"\u6807\u8bc6\u4e32",avatar:"\u5934\u50cf",joinedAt:"\u52a0\u5165\u65f6\u95f4",unknown:"\u672a\u77e5",all:"\u6240\u6709",detail:"\u8be6\u60c5",language:"\u8bed\u8a00",browser:"\u6d4f\u89c8",expand:"\u5c55\u5f00",times:"\u6b21",full:"\u5b8c\u6574",invite:"\u9080\u8bf7",before:"\u524d",new:"\u65b0\u5efa",add:"\u65b0\u589e",open:"\u6253\u5f00",close:"\u5173\u95ed",save:"\u4fdd\u5b58",create:"\u521b\u5efa",update:"\u66f4\u65b0",remove:"\u79fb\u9664",modification:"\u4fee\u6539",delete:"\u5220\u9664",and:"\u548c",ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",copy:"\u62f7\u8d1d",push:"\u63a8\u9001",merge:"\u5408\u5e76",chose:"\u9009\u62e9",show:"\u663e\u793a",list:"\u5217\u8868",copied:"\u5df2\u590d\u5236",contain:"\u5305\u542b",request:"\u8bf7\u6c42",bind:"\u7ed1\u5b9a",unbind:"\u89e3\u7ed1",replace:"\u66ff\u6362",sort:"\u6392\u5e8f",manage:"\u7ba1\u7406",protected:"\u4fdd\u62a4",operating:"\u64cd\u4f5c",approve:"\u8bc4\u5ba1",enable:"\u6062\u590d",disable:"\u7981\u7528",last:"\u6700\u8fd1",default:"\u9ed8\u8ba4",active:"\u6d3b\u8dc3",inactive:"\u975e\u6d3b\u8dc3",path:"\u8def\u5f84",email:"\u7535\u5b50\u90ae\u4ef6\u5730\u5740",password:"\u5bc6\u7801",oldPassword:"\u65e7\u5bc6\u7801",newPassword:"\u65b0\u5bc6\u7801",mfaCode:"MFA \u5bc6\u7801",twoFactorAuthentication:"\u4e8c\u56e0\u7d20\u8ba4\u8bc1",emailCode:"\u9a8c\u8bc1\u7801",phoneCode:"\u9a8c\u8bc1\u7801",phone:"\u624b\u673a",china:"\u4e2d\u56fd",company:"\u516c\u53f8",job:"\u804c\u4f4d",wechat:"\u5fae\u4fe1",credential:"\u51ed\u636e",login:"\u767b\u5f55",logout:"\u9000\u51fa\u767b\u5f55",next:"\u4e0b\u4e00\u9875",prev:"\u4e0a\u4e00\u9875",mergeMessage:"\u5408\u5e76\u4fe1\u606f",submit:"\u63d0\u4ea4",rule:"\u89c4\u5219",allow:"\u5141\u8bb8",status:"\u72b6\u6001",history:"\u5386\u53f2",notification:"\u901a\u77e5",learnMore:"\u4e86\u89e3\u66f4\u591a",myServiceTicket:"\u6211\u7684\u5de5\u5355",getHelp:"\u83b7\u53d6\u5e2e\u52a9",help:"\u5e2e\u52a9",result:"\u7ed3\u679c",success:"\u6210\u529f",failure:"\u5931\u8d25",doc:"\u6587\u6863",adminArea:"\u7ba1\u7406\u540e\u53f0",edit:"\u7f16\u8f91"}),Wr=Object(y.a)(Object(y.a)({},Vr),{},{__namespace__:"phrase"}),Kr=Object(y.a)(Object(y.a)(Object(y.a)({},zr),Wr),{},{dashboard:"\u6982\u89c8",general:"\u5e38\u89c4",advanced:"\u9ad8\u7ea7",profile:"\u4e2a\u4eba\u4fe1\u606f",mail:"\u591a\u90ae\u7bb1"}),Jr=Object(y.a)(Object(y.a)({},Kr),{},{__namespace__:"menu"}),$r="",Zr=Object(y.a)(Object(y.a)(Object(y.a)({},Wr),zr),{},{retryAfter_N_seconds:"{n} \u79d2\u540e\u91cd\u8bd5",userAvatar:[Wr.user,Wr.avatar].join($r),userName:[Wr.user,Wr.name].join($r),getEmailCode:["\u83b7\u53d6",Wr.emailCode].join($r),getPhoneCode:["\u83b7\u53d6",Wr.phoneCode].join($r),mostSeen:"\u5e38\u89c1",loginCredential:[Wr.login,Wr.credential].join($r),CodeFeverPassword:[Wr.CodeFever,Wr.password].join($r),wechatBind:[Wr.wechat,Wr.bind].join($r),unbind_P:"\u89e3\u9664{p}\u7ed1\u5b9a",repositoryID:[zr.repository,Wr.ID].join($r),repositoryName:[zr.repository,Wr.name].join($r),repositoryDescription:[zr.repository,Wr.description].join($r),repositoryURL:[zr.repository,Wr.url].join($r),repositorySlug:[zr.repository,Wr.slug].join($r),repositoryMember:[zr.repository,zr.member].join($r),newRepository:[Wr.new,zr.repository].join($r),forkRepository:[zr.fork,zr.repository].join($r),unknownRepository:[Wr.unknown,zr.repository].join($r),allRepository:[Wr.all,zr.repository].join($r),deleteRepository:[Wr.delete,zr.repository].join($r),groupID:[zr.group,Wr.ID].join($r),groupName:[zr.group,Wr.name].join($r),groupDescription:[zr.group,Wr.description].join($r),groupURL:[zr.group,Wr.url].join($r),groupSlug:[zr.repository,Wr.slug].join($r),groupMember:[zr.group,zr.member].join($r),newGroup:[Wr.new,zr.group].join($r),unknownGroup:[Wr.unknown,zr.group].join($r),deleteGroup:[Wr.delete,zr.group].join($r),inviteMember:[Wr.invite,zr.member].join($r),removeMember:[Wr.remove,zr.member].join($r),forkFrom_S:[zr.fork,"\u81ea: {s}"].join($r),updateFrom_S1_To_S2:["\u4ece {s1} \u66f4\u65b0\u4e3a {s2}"].join($r),repositoryAvatar:[zr.repository,Wr.avatar].join($r),groupAvatar:[zr.group,Wr.avatar].join($r),basicInfo:"\u57fa\u672c\u4fe1\u606f",security:"\u5b89\u5168\u6027",setupNewMFADevice:"\u8bbe\u7f6e MFA \u8bbe\u5907",changeMFADevice:"\u66f4\u6362 MFA \u8bbe\u5907",removeMFADevice:"\u79fb\u9664 MFA \u8bbe\u5907",commitTime:[Wr.commit,Wr.time].join($r),copyPath:[Wr.copy,Wr.path].join($r),copyHash:[Wr.copy,zr.hash].join($r),copyCode:[Wr.copy,zr.code].join($r),lastCommit:[Wr.last,zr.commit].join($r),lastUpdate:[Wr.last,Wr.update].join($r),updateCreator:[Wr.update,Wr.creator].join($r),updateRepositoryURL:[Wr.update,zr.repository,Wr.url].join($r),updateGroupURL:[Wr.update,zr.group,Wr.url].join($r),createOrigin:[Wr.create,Wr.origin].join($r),choseCreateOrigin:[Wr.chose,Wr.create,Wr.origin].join($r),tagDescription:[zr.tag,Wr.description].join($r),tagName:[zr.tag,Wr.name].join($r),branchName:[zr.branch,Wr.name].join($r),defaultBranch:[Wr.default,zr.branch].join($r),protectedBranch:[Wr.protected,zr.branch].join($r),branchRule:[Wr.branch,Wr.rule].join($r),allowPush:[Wr.allow,Wr.push].join($r),allowMerge:[Wr.allow,Wr.merge].join($r),noData:["\u6ca1\u6709",zr.data].join($r),newBranch:[Wr.new,zr.branch].join($r),newTag:[Wr.new,zr.tag].join($r),deleteBranch:[Wr.delete,zr.branch].join($r),deleteTag:[Wr.delete,zr.tag].join($r),updateTime:[Wr.update,zr.time].join($r),updatedIn:"\u66f4\u65b0\u4e8e",editIn:"\u7f16\u8f91\u4e8e",expandFullFile:[Wr.expand,Wr.full,Wr.file].join($r),showDiffOnly:"\u4ec5\u5c55\u793a\u4fee\u6539\u884c",codeDiff:"\u4ee3\u7801\u5dee\u5f02",requestCreated:"\u521b\u5efa\u4e8e",requestClosed:"\u5173\u95ed\u4e8e",requestMerged:"\u5408\u5e76\u4e8e",createRepository:["\u8bf7",Wr.create,zr.repository].join($r),commitActivity:[zr.commit,Wr.activity].join($r),mergeRequestActivity:[zr.mergeRequest,Wr.activity].join($r),memberActivity:[zr.member,Wr.activity].join($r),addSSHKey:[Wr.add,zr.SSHKey].join($r),emailManage:["\u90ae\u7bb1",Wr.manage].join($r),memberManage:[zr.member,Wr.manage].join($r),primaryEmail:"\u4e3b\u90ae\u7bb1",contactEmail:"\u5173\u8054\u90ae\u7bb1\u5217\u8868",SSHKeyManage:[zr.SSHKey_pl," ",Wr.manage].join($r),notificationCenter:"\u901a\u77e5\u4e2d\u5fc3",notificationReceiveStatus:"\u63a5\u6536\u901a\u77e5\u72b6\u6001",unread:"\u672a\u8bfb",fileModification:[zr.file,Wr.modification].join($r),fileModificationList:[Wr.modification,zr.file,Wr.list].join($r),lineAdd:[zr.line,Wr.add].join($r),lineDelete:[zr.line,Wr.delete].join($r),browserFile:[Wr.browser,Wr.file].join($r),browserUnchangedFIle:[Wr.browser,Wr.modification,Wr.before,Wr.file].join($r),commitHash:[zr.commit,zr.hash].join($r),allFiles:[Wr.all,Wr.file].join($r),openFileTree:[Wr.open,zr.fileTree].join($r),closeFileTree:[Wr.close,zr.fileTree].join($r),requestMerge:[Wr.request,Wr.merge].join($r),createMergeRequest:[Wr.create,zr.mergeRequest].join($r),closeMergeRequest:[Wr.close,zr.mergeRequest].join($r),more:"\u67e5\u770b\u66f4\u591a",noMore:"\u6ca1\u6709\u66f4\u591a",processing:"\u5904\u7406\u4e2d",IJoined:"\u6211\u53c2\u4e0e\u7684",ICreated:"\u6211\u521b\u5efa\u7684",dangerOperation:"\u5371\u9669\u64cd\u4f5c",dangerOperationConfirm:"\u6700\u540e\u786e\u8ba4\u5371\u9669\u64cd\u4f5c",compareBranch:"\u5bf9\u6bd4\u5206\u652f\u5e76\u7ee7\u7eed",lastModified:"\u6700\u8fd1\u4fee\u6539",lastModified_N:["\u7b2c","{n}","\u6b21\u4fee\u6539"].join($r),openMergeRequest:[Wr.open,zr.mergeRequest].join($r),modificationBranch:[Wr.modification,zr.branch].join($r),sourceBranch:[Wr.source,zr.branch].join($r),targetBranch:[Wr.target,zr.branch].join($r),repositoryAdvancedSetting:"\u4ed3\u5e93\u9ad8\u7ea7\u8bbe\u7f6e",branchSetting:"\u5206\u652f\u8bbe\u7f6e",groupAdvancedSetting:"\u4ed3\u5e93\u7ec4\u9ad8\u7ea7\u8bbe\u7f6e",memberLimitation:[zr.member,zr.limitation].join($r),modificationLimitation:[Wr.modification,zr.limitation].join($r),roleID_1:zr.guest,roleID_2:zr.reporter,roleID_3:zr.developer,roleID_4:zr.maintianer,roleID_5:zr.owner,yourself:"\u4f60\u81ea\u5df1",enabledMFA:"\u5f00\u542f\u4e862FA",disabledMFA:"\u672a\u5f00\u542f2FA",blocked:"\u7981\u7528",createTime:"\u521b\u5efa\u65f6\u95f4",addUser:"\u6dfb\u52a0\u7528\u6237",statistic:"\u7edf\u8ba1",systemResources:"\u7cfb\u7edf\u8d44\u6e90",diskUsgae:"\u78c1\u76d8\u4f7f\u7528\u91cf",serviceStatus:"\u670d\u52a1\u72b6\u6001",host:"\u4e3b\u673a",senderName:"\u53d1\u4ef6\u4eba\u540d\u79f0",senderAddress:"\u53d1\u4ef6\u4eba\u5730\u5740",register:"\u6ce8\u518c",allowRegister:"\u5f00\u653e\u6ce8\u518c",_N_repository:"{n} {n, plural, =0 {"+zr.repository+"}\n=1 {"+zr.repository+"}\nother {"+zr.repository_pl+"}}",_N_commit:"{n} {n, plural, =0 {"+zr.commit+"}\n=1 {"+zr.commit+"}\nother {"+zr.commit_pl+"}}",_N_branch:"{n} {n, plural, =0 {"+zr.branch+"}\n=1 {"+zr.branch+"}\nother {"+zr.branch_pl+"}}",_N_tag:"{n} {n, plural, =0 {"+zr.tag+"}\n=1 {"+zr.tag+"}\nother {"+zr.tag_pl+"}}",_N_byte:"{n} {n, plural, =0 {Byte}\n=1 {Byte}\nother {Bytes}}",_N_mergeRequest:"{n} {n, plural, =0 {"+zr.mergeRequest+"}\n=1 {"+zr.mergeRequest+"}\nother {"+zr.mergeRequest_pl+"}}",_N_member:"{n} {n, plural, =0 {"+zr.member+"}\n=1 {"+zr.member+"}\nother {"+zr.member_pl+"}}"}),Yr=Object(y.a)(Object(y.a)({},Zr),{},{__namespace__:"label"}),Xr=Object(y.a)(Object(y.a)({},{"mergeRequest:create":"{user} \u6253\u5f00\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequest:close":"{user} \u5173\u95ed\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequest:merge":"{user} \u5408\u5e76\u4e86\u548c\u5e76\u8bf7\u6c42: !{number} {title}","mergeRequestReviewer:create":"{user} \u6307\u5b9a\u4f60\u4e3a\u5408\u5e76\u8bf7\u6c42 !{number} {title} \u7684\u8bc4\u5ba1\u5458","mergeRequestReviewer:review":"{user} \u901a\u8fc7\u4e86\u548c\u5e76\u8bf7\u6c42 !{number} {title} \u7684\u8bc4\u5ba1"}),{},{__namespace__:"notification"}),Qr=Object(y.a)(Object(y.a)({},{Added:"Added",created:"Created",updated:"Updated",removed:"Removed",deleted:"Deleted",copied:"Copied",merged:"Merged",opened:"Opened",closed:"Closed",binded:"Binded",unbinded:"Unbinded",verified:"Verified",approved:"Approved",enabled:"Enabled",disabled:"Disabled",reseted:"reseted",createPersonalGroupNotice:"At Least One Group is Required",emailCodeHasSendNewEmail:"A E-mail Contains Validation Code Has Sent To Your E-mail Box",phoneCodeHasSendNewPhone:"A Text Message Contains Validation Code Has Sent To Your Cellphone",finishIdentityVerify:"Input Password To Verify Your Identity",unbindEnterCodeFeverPassword:"Input Password To Confirm",scanQrcodeBind:"Scan QR Code To Bind Your Account By Using WeChat App",theAccountUsedWechat_N:'This Account Has Binded Account Named "{n}", Are Your Confirm To Substitute It?',rebindWechat:"Cancel",unbindAllProduct:"Unbind All Pgyer's Products",mfaGuide:"Use Apps with MFA Feature to Scan the Following QRCode, Input Two Different MFA Code And Press Save Button to Setup a New MFA Device. You Can Search MFA in Any App Merket to Download a MFA App You Trusted in.",inputEmailToAddMemeber:"Input Email To Add A Member",groupMemberCanControlRepositoryNotice:"Members In Group Can Also Access This Repositoy Using Same Role Privilige In Group",repositoryChangeCreatorNotice:"Sure To Change Creator ? Both New And Old Creator Will Be Owner Of This Repository",repositoryChangeURLNotice:"Sure To Change URL ? Both Git Client And Web Wiil Not Respond For Old URL, You May Wish To Reset Remote Via git remote Command",repositoryDeleteRepositoryNotice:"Sure To Delete This Repositoy ? Your Repository Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",repositoryDeleteRepositoryConfirmNotice:"This Repository Will Be Deleted, Are You Sure About This ? Your Repository Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",groupChangeCreatorNotice:"Sure To Change Creator ? Both New And Old Creator Will Be Owner Of This Repository, Notice That You Can Not Change Creator Of Default Group",groupChangeURLNotice:"Sure To Change URL ? Both Git Client And Web Wiil Not Respond For Old URL, You May Wish To Reset Remote Via git remote Command",groupDeleteRepositoryNotice:"Sure To Delete This Group ? Your Group And Related Repositoies Will NOT BE AVAILABLE Any More, All Record Related To This Group Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",groupDeleteRepositoryConfirmNotice:"This Group Will Be Deleted, Are You Sure About This ? Your Group And Related Repositoies Will NOT BE AVAILABLE Any More, All Record Related To This Repositoy Will Also Be DELETED. Please Make Sure ALL IMPORTANT DATA BACKUPED. You Can Click CANCEL Button To Cancel It.",inputCommitFilter:"Input To Filter",repositoryEmpty:"Empty Repository",displaySource:"View Source",displayRendereFile:"View Rendered",fileContentEmpty:"Empty File",fileContentOversize:"File Size Exceed limitation, Check It Out Localy",fileTypeNotSupport:"Binary File Can Not Shown",diffFileToMany:" The maximum number of files allowed to be displayed is exceeded, please check locally",_S_empty:"Please Input {s}",repository_S_empty:"No {s} In Repository",repositoryBranchEmpty:"Branch List Empty",repositoryTagEmpty:"Tag List Empty",mergeRequestEmpty:"Empty Merge Request List",addNewCommit:"Add New Commit",alreadyMergeRequest:"Merged",alreadyCloseRequest:"Close",assignReviewerTitle:"Assigne Reviewer(Only One Person Can Be Assigned)",selectReviewer:"Select Reviewer",notSelectReviewers:"No Assign Reviewer",deleteReviewer:"Delete Reviewer",notApprove:"Not Approve",assign_N_M_Reviewer:"Assign {n} As A Reviewer For Merge Request {m}",delete_M_N_Reviewer:"Removed Reviewer {n} Of Merge Request {m}",review_M_Reviewer:"Approve Changes Of Merge Request {m}",_S_listEmpty:"Empty {s} List",repositoryListEmptyNotice:"Create A Repositoy To Explore",groupListEmptyNotice:"Create A Group To Manage Your Repositories",input_S_name:"Input {s} To Filter",confirmDelete:"Delteing {s}?",jumpWithLink:"Go To This Link",noRepositoryFind:"No view permission",noCommitRecord:"No Commit Record",plsInputInvitedEmail:"Input E-mail to Invite",repositoryDeleteTipFirst:"All Recored Related To This Repositoy Will Also Be DELTED, Include Source, Merge Request Record etc.",repositoryDeleteTipSecond:"A Delted Repository CAN NOT Recover!",inputMergeCommit:"Input Commit Message, Check Squash When Needed.",selectDifferentBranch:"Can Not Merge INTO Source Itself",mergeConflictTitle:"Conflict Found In Merge Progeress, Follows Instructions Below To Resolve Conflict Localy ",mergeConflictTip1:"1: Pull Target Branch To Local",mergeConflictTip2:"2: Check File Diff",mergeConflictTip3:"3: Resolve Conflicts And Merge",mergeConflictTip4:"4 : Push Changes To Remote",from_S_Merge_S:"Request Merge From {s1} To {s2}",defaultGroupReqiured:"A Group Is Required",defaultGroupReqiuredDescription:"At Least One Group Is Required To Create Repository",someVersion:"Related Version",backHome:"Homepage",inputSSHKEYContent:"Please Enter The SSH Key",inputSSHKEYName:"Please Enter SSH Key Name",defaultBranchDescription:"The Default Branch Is Regarded As The Basic Branch In The Code Base And Is The Target Branch For All Clones, Code Submissions, And Merge Requests",settingToDefaultBranch:"Set As Default Branch",updateDefaultBranch:"Modify The Default Branch",settingDefaultBranch:"Please Set The Default Branch",protectedBranchDescription:"Protecting Branches Will Ensure Branch Security, And Roles Other Than Owner Are Not Allowed To Be Pushed And Deleted Forcibly",protectedBranchRuleEmpty:"There Are No Protection Branch Rules At Present, Please Create A New Protection Branch Rule To Protect Branch Safety",inputBranchOrRegexp:"Please Enter The Branch Name or Universal Rules",createProtectedBranchRule:"New Protection Branch Rule",updateProtectedBranchRule:"Modify Protection Branch Rule",deleteProtectedBranchRule:"Delete Protection Branch Rule",noBodyAllow:"Nobody",primaryEmail:"Primary E-mail",primaryEmailDescription:"The Email Address Of The Current CodeFever Account, Used To Receive Relevant Notifications, Password Reset, Login And Other Operations",updatePrimaryEmail:"Change Primary E-mail",myEmail:"My E-mail",myEmailDescription:"Multi-mailbox Function Is Used For The Same User To Have Multiple Different Mailboxes For Code Submission, The System Can Identify And Create An Association Relationship",addEmail:"Add E-mail",contactedEmail:"Mailbox Linked",shouldValidation:"To Be Verified",resendEmail:"Resend Mail",differenceBetweenHTTPSAndSSH:"HTTPS or SSH, Which one should I choose ?",generateAndSetSSHKey:"Please Confirm The SSH Key Has Been Generated And Set Porperly On CodeFever.",itsMyEmail:"It's My Email",notificationSystem:"System Message",notificationMention:"Mentioned Me",tagRead:"Mark As Read",tagAllRead:"Mark All As Read",deleteAllReaded:"Delete All Read User Messages",mergeRequestNotification:"Notification Of Merge Request",mergeRequestNotificationDesc:"Can Receive And Request Notifications Issued By Warehouse Members, Developers And Above Members Can Receive",emailNotification:"E-mail notification",emailNotificationDesc:"The Message In The Notification Settings Will Be Sent To Your Registered Mailbox.",searchByName:"Search by name or email",userStatusEnabled:"Enable confirmation",userStatusDisabled:"Disable confirmation",userStatusEnabled_N:'Confirm to enable user "{n}"?',userStatusDisabled_N:'Confirm to disable user "{n}"?',closeMFA:"Turn off 2FA certification",closeMFAConfirm:"Close 2FA authentication confirmation",closeMFA_N:'Are you sure to turn off 2FA authentication for user "{n}"?',resetPassword:"Reset Password",reset_N_Password:'Reset user "{n}" password',searchRepository:"Search repository",searchGroup:"Sreach group",roleToOwner:"Designated as owner",setGroupOwner_S:"Are you sure to specify {s} as the owner of the group?",setAdministrator:"Set as administrator",cancelAdministrator:"Cancel an administrator",memberRemoveConfirm:"Member delete confirmation",successAddUser:"User added successfully"}),{},{__namespace__:"message"}),en=Object(y.a)(Object(y.a)({},{_S_empty:"Please Input {s}",_S_retype:"Please Retype {s}",_S_has_illegal_character:"Only Combination of Alphanumeric '_' '-' '.' Allowed in {s}",_S_notChoose:"Please Choose {s}",_S_duplicate:"{s} Duplicated",_S_invalid:"{s} Invalid",_S_notFound:"{s} Not Found",noMoreThan_N_characters:"No More{n} Characters",within_N1_to_N2_characters:"Between {n1} to {n2} Characters",only_N1_or_N2_characters:"Only {n1} Or {n2} Characters Allowed",requireCombinationOfCharactersNumbersAndUnderscore:"Only Combination Of Numberic, Underscore And Character Allowd",input_S_placeholder:"Please Input {s}, Only Numberic, Underscore, strike, dot And Character Allowed",inputNotSame:"Doesn't Match The Retype Field",inputSame:"Same Input",canNotAddCreatorAsMember:"Can Not Add Creator As Member",createRepositoryFail:"Create Repository Fail, Please Retry Later",createGroupFail:"Create Group Fail, Please Retry Later",createBranchFail:"Create Branch Fail, Please Retry Later",createTagFail:"Create Tags Fail, Please Retry Later",createMergeRequestFail:"Create Merge Request Fail, Please Retry Later",createProtectedBrancheRuleFail:"Failed To Create Protection Branch Rule, Please Retry Later",AddFail:"Fail To Add, Please Retry Later",updateFail:"Fail To Update, Please Retry Later",removeFail:"Fail To Remove, Please Retry Later",deleteFail:"Fail To Delete, Please Retry Later",verifyFail:"Fail To Verify, Please Retry Later",forkRepositoryFail:"Fail To Fork, Please Retry Later",getFileFail:"Fail To Get File Content, Please Retry Later",getEmailCodeFail:"Fail To Get Email Validation Code, Please Retry Later",getPhoneCodeFail:"Fail To Get Phone Number Validation Code, Please Retry Later",change_S_Fail:"Fail To Update {s}, Please Retry Later",waitToRetry:"Connection Down, Please Retry Later",canNotChangeOwnerOfUserGroup:"Creator Of Default Group CAN NOT Be Modified",canNotDeleteUserGroup:"Default Group CAN NOT Be Deleted",canNotDeleteNonEmptyGroup:"Group CAN NOT Be Deleted When Contains Repository",mergeRequestExists:"Same Merge Request Exsits",mergeFail:"Fail To Merge, Please Retry Later",reviewedCanNotAssign:"Can\u2019t Replace The Reviewer",reviewedCanNotDelete:"Cannot Delete Reviewers Who Have Reviewed The Code",branchProteced:"Can Not Perform Merge On Proteced Branch",userNotReview:"Cannot Be Merged, And The Reviewers Have Not Reviewed",inputNewEmail:"Input New Email",bindEmailFirst:"An Login Email Is Required When Bind Account Of Other Platform",wechatHasbound:"This Account Has Been Used, Please Select Another Account And Retry"}),{},{__namespace__:"message.error"}),tn=Object(y.a)(Object(y.a)({},{createdGroup:"Create A Group",updateGroup_S_Avator:"Update Avatar Of Group {s}",updateGroup_S_Name:"Update Name Of Group {s}",updateGroup_S_Description:"Update Description Of Group {s}",addGroup_S_Memeber:"Add New Member To Group {s}",changeGroup_S_MemebrRole:"Update Role Of A Member In Group {s}",removeGroup_S_Memebr:"Remove A Member In Group {s}",setGroup_S_Creator:"Set A Member As Creator Of Group {s}",setGroup_S_URL:"Change URL Of Group {s}",createdRepository:"Create A Repository",deleteRepository:"Delete A Repository",forkRepository:"Frok And Create A Repository",updateRepository_S_Avator:"Update Avatar Of Repository {s}",updateRepository_S_Name:"Update Name Of Repository {s}",updateRepository_S_Description:"Update Description Of Repository {s}",pushTo_S_Branch:"Push Commits To Repository {s}",pushTo_S_NewBranch:"Push Branches To Repository {s}",created_S_NewBranch:"Add Branch In Repository {s}",delete_S_Branch:"Delete Branche In Repository {s}",update_S_DefaultBranch:"Modified The Default Branch Of Repository {s}",created_S_ProtectedBranchRule:"Create Protection Branch Rule in Repository {s}",update_S_ProtectedBranchRule:"Modified The Protection Branch Rule Of Repository {s}",delete_S_ProtectedBranchRule:"Removed Protection Branch Rule For Repository {s}",pushTo_S_Tag:"Push Commits To A Tag Of Repository {s}",pushTo_S_NewTag:"Push Tags To Repository {s}",created_S_NewTag:"Create A Tag In Repository {s}",delete_S_Tag:"Delete A Tag In Repository {s}",addRepository_S_Memeber:"Add A Member To Repository {s}",changeRepository_S_MemebrRole:"Set Role To A Memebre In Repository {s}",removeRepository_S_Memebr:"Remove Members in Repository {s}",setRepository_S_Creator:"Set A Member As Creator Of Repository {s}",setRepository_S_URL:"Change URL Of Repository {s}",open_S_MergeRquest:"Open A Merge Request In Repository {s}",close_S_MergeRquest:"Close A Merge Request In Repository {s}",merge_S_MergeRquest:"Merged A Merge Request In Repository {s}",assign_S_Reviewer:"Assign Reviewer In Repository {s}",delete_S_Reviewer:"Delete Reviewer In Repository {s}",review_S_Reviewer:"Approve Changes In Repository {s}"}),{},{__namespace__:"message.activity"}),an=Object(y.a)(Object(y.a)({},{repository:"Repository",repository_pl:"Repositories",group:"Group",group_pl:"Groups",file:"File",file_pl:"Files",commit:"Commit",commit_pl:"Commits",mergeRequest:"Merge Request",mergeRequest_pl:"Merge Requests",branch:"Branch",branch_pl:"Branches",tag:"Tag",tag_pl:"Tags",member:"Member",member_pl:"Members",activity:"Activity",activity_pl:"Activities",setting:"Setting",setting_pl:"Settings",SSHKey:"SSH Key",SSHKey_pl:"SSH Keys",user:"User",user_pl:"Users",fileTree:"File Tree",merge:"Merge",data:"Data",clone:"Clone",fork:"Fork",limitation:"Limitation",role:"Role",team:"Team",code:"Source",hash:"Hash",time:"Time",number:"Count",line:"Line",guest:"Guest",reporter:"Reporter",developer:"Developer",maintianer:"Maintainer",owner:"Owner",parentNode:"Parent Node"}),{},{__namespace__:"term"}),rn=Object(y.a)(Object(y.a)({},an),{},{CodeFever:"CodeFever",ID:"ID",user:"User",name:"Name",creator:"Creator",reviewer:"Reviewer",administrator:"Administrator",title:"Title",description:"Description",origin:"Origin",source:"Source",target:"Target",url:"URL",slug:"Slug",avatar:"Avatar",joinedAt:"Joined In",unknown:"Unknown",all:"All",detail:"Detail",language:"Language",browser:"View",expand:"Expand",full:"Full",invite:"Invite",times:"Times",before:"Before",new:"New",add:"Add",open:"Open",close:"Close",save:"Save",create:"Create",update:"Update",remove:"Remove",modification:"Modify",delete:"Delete",and:"And",ok:"OK",cancel:"Cancel",copy:"Copy",push:"Push",merge:"Merge",chose:"Choose",show:"Show",list:"List",copied:"Copied",contain:"Contain",request:"Request",bind:"Bind",unbind:"Unbind",replace:"Replace",sort:"Sort",manage:"Manage",protected:"Protected",operating:"Operating",approve:"Approve",enable:"Enable",disable:"Disable",last:"Latest",default:"Default",active:"Active",inactive:"Inactive",path:"Path",email:"E-mail",password:"Password",oldPassword:"Current Password",newPassword:"New Password",mfaCode:"MFA Code",twoFactorAuthentication:"Two-Factor Authentication",emailCode:"Validation Code",phoneCode:"Validation Code",phone:"Cellphone",china:"China",company:"Company",job:"Job",wechat:"Wechat",credential:"Credential",login:"Sign In",logout:"Sign Out",next:"Next",prev:"Previous",mergeMessage:"Merge Message",submit:"Submit",rule:"Rule",allow:"Allow",status:"Status",history:"History",notification:"Notification",learnMore:"Learn More",myServiceTicket:"My Service Tickets",getHelp:"Get Help",help:"Help",result:"Result",success:"Success",failure:"Failure",doc:"DOC",adminArea:"Admin Area",edit:"Edit"}),nn=Object(y.a)(Object(y.a)({},rn),{},{__namespace__:"phrase"}),sn=Object(y.a)(Object(y.a)(Object(y.a)({},an),nn),{},{dashboard:"Dashboard",general:"General",advanced:"Advanced",profile:"Profile",mail:"E-mails"}),on=Object(y.a)(Object(y.a)({},sn),{},{__namespace__:"menu"}),cn=" ",ln=Object(y.a)(Object(y.a)(Object(y.a)({},nn),an),{},{retryAfter_N_seconds:"Retry After {n} Seconds",userAvatar:[nn.user,nn.avatar].join(cn),userName:[nn.user,nn.name].join(cn),getEmailCode:["Get",nn.emailCode].join(cn),getPhoneCode:["Get",nn.phoneCode].join(cn),mostSeen:"Most Seen",loginCredential:[nn.login,nn.credential].join(cn),CodeFeverPassword:[nn.CodeFever,nn.password].join(cn),wechatBind:[nn.wechat,nn.bind].join(cn),unbind_P:"Unbind {p}",repositoryID:[an.repository,nn.ID].join(cn),repositoryName:[an.repository,nn.name].join(cn),repositoryDescription:[an.repository,nn.description].join(cn),repositoryURL:[an.repository,nn.url].join(cn),repositorySlug:[an.repository,nn.slug].join(cn),repositoryMember:[an.repository,an.member].join(cn),newRepository:[nn.new,an.repository].join(cn),forkRepository:[an.fork,an.repository].join(cn),unknownRepository:[nn.unknown,an.repository].join(cn),allRepository:[nn.all,an.repository].join(cn),deleteRepository:[nn.delete,an.repository].join(cn),groupID:[an.group,nn.ID].join(cn),groupName:[an.group,nn.name].join(cn),groupDescription:[an.group,nn.description].join(cn),groupURL:[an.group,nn.url].join(cn),groupSlug:[an.repository,nn.slug].join(cn),groupMember:[an.group,an.member].join(cn),newGroup:[nn.new,an.group].join(cn),unknownGroup:[nn.unknown,an.group].join(cn),deleteGroup:[nn.delete,an.group].join(cn),inviteMember:[nn.invite,an.member].join(cn),removeMember:[nn.remove,an.member].join(cn),forkFrom_S:[an.fork,"From: {s}"].join(cn),updateFrom_S1_To_S2:["Update From {s1} To {s2}"].join(cn),repositoryAvatar:[an.repository,nn.avatar].join(cn),groupAvatar:[an.group,nn.avatar].join(cn),basicInfo:"Basic Info",security:"Security",setupNewMFADevice:"Setup New MFA Device",changeMFADevice:"Change MFA Device",removeMFADevice:"Remove MFA Device",commitTime:[nn.commit,nn.time].join(cn),copyPath:[nn.copy,nn.path].join(cn),copyHash:[nn.copy,an.hash].join(cn),copyCode:[nn.copy,an.code].join(cn),lastCommit:[nn.last,an.commit].join(cn),lastUpdate:[nn.last,nn.update].join(cn),updateCreator:[nn.update,nn.creator].join(cn),updateRepositoryURL:[nn.update,an.repository,nn.url].join(cn),updateGroupURL:[nn.update,an.group,nn.url].join(cn),createOrigin:[nn.create,nn.origin].join(cn),choseCreateOrigin:[nn.chose,nn.create,nn.origin].join(cn),tagDescription:[an.tag,nn.description].join(cn),tagName:[an.tag,nn.name].join(cn),branchName:[an.branch,nn.name].join(cn),defaultBranch:[nn.default,an.branch].join(cn),protectedBranch:[nn.protected,an.branch].join(cn),branchRule:[nn.branch,nn.rule].join(cn),allowPush:[nn.allow,nn.push].join(cn),allowMerge:[nn.allow,nn.merge].join(cn),noData:["No",an.data].join(cn),newBranch:[nn.new,an.branch].join(cn),newTag:[nn.new,an.tag].join(cn),deleteBranch:[nn.delete,an.branch].join(cn),deleteTag:[nn.delete,an.tag].join(cn),updateTime:[nn.update,an.time].join(cn),updatedIn:"Updated At",editIn:"Edited At",expandFullFile:[nn.expand,nn.full,nn.file].join(cn),showDiffOnly:"Show Diff",codeDiff:"Diff",requestCreated:"Created At",requestClosed:"Closed At",requestMerged:"Merged At",createRepository:["Please",nn.create,an.repository].join(cn),commitActivity:[an.commit,nn.activity].join(cn),mergeRequestActivity:[an.mergeRequest,nn.activity].join(cn),memberActivity:[an.member,nn.activity].join(cn),addSSHKey:[nn.add,an.SSHKey].join(cn),emailManage:[nn.email,nn.manage].join(cn),memberManage:[an.member,nn.manage].join(cn),primaryEmail:"Primary E-mail",contactEmail:"List Of Associated Mailboxes",SSHKeyManage:[an.SSHKey_pl,nn.manage].join(cn),notificationCenter:"Notification Center",notificationReceiveStatus:"Receive Notification Status",unread:"Unread",fileModification:[an.file,nn.modification].join(cn),fileModificationList:[nn.modification,an.file,nn.list].join(cn),lineAdd:[an.line,nn.add].join(cn),lineDelete:[an.line,nn.delete].join(cn),browserFile:[nn.browser,nn.file].join(cn),browserUnchangedFIle:[nn.browser,nn.modification,nn.before,nn.file].join(cn),commitHash:[an.commit,an.hash].join(cn),allFiles:[nn.all,nn.file].join(cn),openFileTree:[nn.open,an.fileTree].join(cn),closeFileTree:[nn.close,an.fileTree].join(cn),requestMerge:[nn.request,nn.merge].join(cn),createMergeRequest:[nn.create,an.mergeRequest].join(cn),closeMergeRequest:[nn.close,an.mergeRequest].join(cn),more:"More",noMore:"No More",processing:"Processing",IJoined:"Joined",ICreated:"Created By Me",dangerOperation:"Dangerous Action",dangerOperationConfirm:"Confirm Dangerous Action",compareBranch:"Comoare And Continue",lastModified:"Last Modified",lastModified_N:"{n}{n, plural, =1 {st}\n=2 {nd}\n=3 {rd}\nother {th}} Revision",openMergeRequest:[nn.open,an.mergeRequest].join(cn),modificationBranch:[nn.modification,an.branch].join(cn),sourceBranch:[nn.source,an.branch].join(cn),targetBranch:[nn.target,an.branch].join(cn),repositoryAdvancedSetting:"Repository Advanced Settings",branchSetting:"Branch Settings",groupAdvancedSetting:"Group Advanced Settings",memberLimitation:[an.member,an.limitation].join(cn),modificationLimitation:[nn.modification,an.limitation].join(cn),roleID_1:an.guest,roleID_2:an.reporter,roleID_3:an.developer,roleID_4:an.maintianer,roleID_5:an.owner,yourself:"It's you",enabledMFA:"2FA Enabled",disabledMFA:"2FA Disabled",blocked:"Blocked",createTime:"Created Time",addUser:"Add user",statistic:"Statistic",systemResources:"System Resources",diskUsgae:"Disk Usgae",serviceStatus:"Service Status",host:"Host",senderName:"Sender Name",senderAddress:"Sender Email Address",register:"Register",allowRegister:"Allow Register",_N_repository:"{n} {n, plural, =0 {"+an.repository+"}\n=1 {"+an.repository+"}\nother {"+an.repository_pl+"}}",_N_commit:"{n} {n, plural, =0 {"+an.commit+"}\n=1 {"+an.commit+"}\nother {"+an.commit_pl+"}}",_N_branch:"{n} {n, plural, =0 {"+an.branch+"}\n=1 {"+an.branch+"}\nother {"+an.branch_pl+"}}",_N_tag:"{n} {n, plural, =0 {"+an.tag+"}\n=1 {"+an.tag+"}\nother {"+an.tag_pl+"}}",_N_byte:"{n} {n, plural, =0 {Byte}\n=1 {Byte}\nother {Bytes}}",_N_mergeRequest:"{n} {n, plural, =0 {"+an.mergeRequest+"}\n=1 {"+an.mergeRequest+"}\nother {"+an.mergeRequest_pl+"}}",_N_member:"{n} {n, plural, =0 {"+an.member+"}\n=1 {"+an.member+"}\nother {"+an.member_pl+"}}"}),pn=Object(y.a)(Object(y.a)({},ln),{},{__namespace__:"label"}),dn=Object(y.a)(Object(y.a)({},{"mergeRequest:create":"{user} Open Merge Request: !{number} {title}","mergeRequest:close":"{user} Close Merge Request: !{number} {title}","mergeRequest:merge":"{user} Merge The Merge Request: !{number} {title}","mergeRequestReviewer:create":"{user} Assign You As The Reviewer For The Merge Request !{number} {title}","mergeRequestReviewer:review":"{user} Approve Changes Of Merge Request !{number} {title} "}),{},{__namespace__:"notification"});function un(e){switch(e){case"zh-cn":return W(Ur,Gr,qr,Hr,zr,Wr,Jr,Yr,Xr);case"en-us":return W(Ur,Qr,tn,en,an,nn,on,pn,dn)}}var mn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.currentLanguage,t=Object(f.a)({}),a=Object(f.a)(C(t));return Object(se.jsx)(b.a,{theme:a,children:Object(se.jsx)(O.a,{utils:j.a,locale:v.a,children:Object(se.jsx)(g.a,{locale:e,messages:un(e),children:Object(se.jsxs)("div",{className:"app-root",children:[Object(se.jsx)(_r,{}),Object(se.jsxs)("div",{className:"app-content",ref:this.appContent,children:[Object(se.jsx)(jr,{}),Object(se.jsx)(lr,{}),Object(se.jsx)(Fr,{}),Object(se.jsx)(Br,{}),Object(se.jsx)(Dr,{})]})]})})})})}}]),a}(r.a.Component),hn=Object(l.b)((function(e,t){return{currentLanguage:e.DataStore.currentLanguage}}))(mn),gn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(se.jsxs)(h.c,{children:[Object(se.jsx)(h.a,{exact:!0,path:"/",component:hn}),Object(se.jsx)(h.a,{exact:!0,path:"/userInfo",component:hn}),Object(se.jsx)(h.a,{exact:!0,path:"/createApp",component:hn}),Object(se.jsx)(h.a,{path:"/groups/:groupName([A-Za-z0-9_]{5,})",component:hn}),Object(se.jsx)(h.a,{path:"/groups",component:hn}),Object(se.jsx)(h.a,{path:"/repositories",component:hn}),Object(se.jsx)(h.a,{path:"/:groupName([A-Za-z0-9_]{5,})/:repositoryName([A-Za-z0-9_]+)",component:hn}),Object(se.jsx)(h.a,{path:"/mergerequests",component:hn}),Object(se.jsx)(h.a,{path:"/settings",component:hn}),Object(se.jsx)(h.a,{path:"/admin",component:hn})]})}}]),a}(r.a.Component),fn=Object(h.f)(gn);var bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.repositoryList=G(e.repositoryList,[]),e.repositoryListPending=G(e.repositoryListPending,!0),e.groupList=G(e.groupList,[]),e.groupListPending=G(e.groupListPending,!0),e.currentRepositoryKey=G(e.currentRepositoryKey,""),e.currentRepositoryError=G(e.currentRepositoryError,!1),e.currentRepositoryConfig=G(e.currentRepositoryConfig,{}),e.currentGroupKey=G(e.currentGroupKey,""),e.currentGroupConfig=G(e.currentGroupConfig,{}),e.currentUserInfo=G(e.currentUserInfo,{});var a=window.localStorage.getItem("lang");return a||(a=navigator.language.toLowerCase()||navigator.userLanguage.toLowerCase(),["zh-cn","en-us"].indexOf(a)<0&&(a="zh-cn"),window.localStorage.setItem("lang",a),e.currentLanguage=a),e.currentLanguage=G(e.currentLanguage,a),t.type.match(/^data\./)?("data.repositoryList.update"===t.type?(e.repositoryList=t.data,e.repositoryListPending=!1):"data.groupList.update"===t.type?(e.groupList=t.data,e.groupListPending=!1):"data.currentRepositoryKey.update"===t.type?e.currentRepositoryKey=t.data:"data.currentRepositoryError.update"===t.type?e.currentRepositoryError=t.data:"data.currentRepositoryConfig.update"===t.type?e.currentRepositoryConfig=t.data:"data.currentGroupKey.update"===t.type?e.currentGroupKey=t.data:"data.currentGroupConfig.update"===t.type?e.currentGroupConfig=t.data:"data.currentUserInfo.update"===t.type?e.currentUserInfo=t.data:"data.currentLanguage.update"===t.type&&(e.currentLanguage=t.data,window.localStorage.setItem("lang",t.data)),Object(y.a)({},e)):Object(y.a)({},e)};var jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e.expandStatus=G(e.expandStatus,!0),t.type.match(/^drawer\./)?("drawer.expandStatus.toggle"===t.type?e.expandStatus=!e.expandStatus:"drawer.expandStatus.close"===t.type?e.expandStatus=!1:"drawer.expandStatus.open"===t.type&&(e.expandStatus=!0),Object(y.a)({},e)):Object(y.a)({},e)};var On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.notificationCount=G(e.notificationCount,0),e.notificationBody=G(e.notificationBody,{}),e.askHandleStatus=G(e.askHandleStatus,!1),e.confirmation=G(e.confirmation,{open:!1,title:"",description:"",accept:function(){},reject:function(){},queueList:[],eventCount:0}),e.notificationOpenStatus=G(e.notificationOpenStatus,!1),!t.type.match(/^notification\./))return Object(y.a)({},e);if("notification.message.add"===t.type?(e.notificationCount++,e.notificationBody=t.data):"notification.message.change"===t.type?e.notificationBody=t.data={}:"notification.askhandle.status"===t.type&&(e.askHandleStatus=t.data),"notification.confirmation.popup"===t.type?(e.confirmation.open=!0,e.confirmation.title=t.data.title,e.confirmation.description=t.data.description,e.confirmation.accept=t.data.accept||function(){return!0},e.confirmation.reject=t.data.reject||function(){return!0}):"notification.confirmation.close"===t.type&&(e.confirmation.eventCount++,e.confirmation.open=!1,e.confirmation.accept=function(){return!0},e.confirmation.reject=function(){return!0}),"notification.confirmation.add"===t.type)e.confirmation.eventCount++,e.confirmation.queueList.push(t.data);else if("notification.confirmation.remove"===t.type){e.confirmation.eventCount++;var a=q(e.confirmation.queueList,"key",t.data.key);"number"===typeof a&&delete e.confirmation.queueList[a]}else if("notification.confirmation.consume"===t.type&&e.confirmation.queueList.length&&!e.confirmation.open){e.confirmation.eventCount++;var i=e.confirmation.queueList.shift();e.confirmation.open=!0,e.confirmation.title=i.data.title,e.confirmation.description=i.data.description,e.confirmation.accept=i.data.accept||function(){return!0},e.confirmation.reject=i.data.reject||function(){return!0}}return"notification.notificationOpenStatus.toggle"===t.type?e.notificationOpenStatus=!e.notificationOpenStatus:"notification.notificationOpenStatus.open"===t.type?e.notificationOpenStatus=!0:"notification.notificationOpenStatus.close"===t.type&&(e.notificationOpenStatus=!1),Object(y.a)(Object(y.a)({},e),{},{confirmation:Object(y.a)(Object(y.a)({},e.confirmation),{},{queueList:Object(T.a)(e.confirmation.queueList)})})},vn=Object(c.a)({DataStore:bn,DrawerStates:jn,NotificationStates:On}),yn=Object(c.b)(vn);s.a.render(Object(se.jsx)(l.a,{store:yn,children:Object(se.jsx)(o.a,{basename:"/",children:Object(se.jsx)(fn,{})})}),document.getElementById("root"))}}));
//# sourceMappingURL=main.837e5eff.js.map